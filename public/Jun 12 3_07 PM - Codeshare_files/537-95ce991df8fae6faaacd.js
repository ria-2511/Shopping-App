"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[537],{75312:function(e,n,a){a.d(n,{Z:function(){return V}});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodesharePlans_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"LoginRegisterModal_codeshare"}],type:"Codeshare",abstractKey:null,hash:"6abae3727982cdaef64679b6dbee6785"};var s=l;const r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodesharePlans_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{args:null,kind:"FragmentSpread",name:"CodeshareProCheckoutModal_me"},{args:null,kind:"FragmentSpread",name:"isCodeshareProSubscriber_me"},{args:null,kind:"FragmentSpread",name:"LoginRegisterModal_me"}],type:"Me",abstractKey:null,hash:"57e135342eb571e8ee1f305dedb4b3c7"};var i=r,o=a(67294);const t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareProCheckoutModal_me",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareProForm_me"}],type:"Me",abstractKey:null,hash:"5ddc07fbe4096768644cb06e9d5542c2"};var d=t,c=a(15861),u=a(87757),m=a.n(u);a(88674);const g={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareProForm_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null}],type:"Me",abstractKey:null,hash:"35b876e5ade374759dfaf95ac7d48884"};var h=g,p=a(86664),y=a(22578),b=a(67912),f=a(50559),v=a(67814),k=a(96767),C=a(3086),_=a(30924),F=a(51436),x=a(70230);const S=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l=[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"node",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"planId",storageKey:null}],storageKey:null}],s={alias:null,args:[{kind:"Literal",name:"first",value:100}],concreteType:"SubscriptionPlanConnection",kind:"LinkedField",name:"subscriptionPlans",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlanConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:l,storageKey:null}],storageKey:"subscriptionPlans(first:100)"},r={alias:null,args:null,concreteType:"SubscriptionPlanEdge",kind:"LinkedField",name:"subscriptionEdge",plural:!1,selections:l,storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"subscribeToCodeshareProMutation",selections:[{alias:null,args:n,concreteType:"SubscribeToCodeshareProPayload",kind:"LinkedField",name:"subscribeToCodesharePro",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[s],storageKey:null},r],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"subscribeToCodeshareProMutation",selections:[{alias:null,args:n,concreteType:"SubscribeToCodeshareProPayload",kind:"LinkedField",name:"subscribeToCodesharePro",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[s,a],storageKey:null},r],storageKey:null}]},params:{cacheID:"ec185b0f100ae7b577271146fb0ca432",id:null,metadata:{},name:"subscribeToCodeshareProMutation",operationKind:"mutation",text:"mutation subscribeToCodeshareProMutation(\n  $input: SubscribeToCodeshareProInput!\n) {\n  subscribeToCodesharePro(input: $input) {\n    me {\n      subscriptionPlans(first: 100) {\n        edges {\n          node {\n            id\n            isActive\n            planId\n          }\n        }\n      }\n      id\n    }\n    subscriptionEdge {\n      node {\n        id\n        isActive\n        planId\n      }\n    }\n  }\n}\n"}}}();S.hash="3ee7d50048ce72a00003bb7838a77138";var j=S,P=a(85893);function M(e){const n=(0,o.useState)(""),a=n[0],l=n[1],s=(0,o.useState)(!1),r=s[0],i=s[1],t=(0,b.useRelayEnvironment)(),d=(0,b.useFragment)(h,e.me),u=(0,p.useStripe)(),g=(0,p.useElements)();if(!d.email)return null;const S=d.email;return(0,P.jsxs)("form",{className:"full-width",onSubmit:function(){var n=(0,c.Z)(m().mark((function n(a){var s,r,o,c,h;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),u&&g){n.next=3;break}return n.abrupt("return");case 3:return _.Z.track("PRO checkout submit",{trigger:e.trigger}),n.prev=4,i(!0),s=g.getElement(p.CardElement),f.Z.assert(s,"card element is required"),n.next=10,u.createPaymentMethod({type:"card",card:s,billing_details:{email:S}});case 10:if(r=n.sent,o=r.error,c=r.paymentMethod,!o){n.next=17;break}throw new f.Z(o.message||"Payment failed, try again.");case 17:if(null!=c){n.next=21;break}throw new f.Z("Unexpected error, try again.");case 21:return n.next=23,new Promise(((e,n)=>{(0,y.commitMutation)(t,{mutation:j,variables:{input:{stripePaymentMethodId:c.id}},configs:[{type:"RANGE_ADD",parentName:"me",parentID:d.id,connectionName:"subscriptionPlans",edgeName:"subscriptionEdge",rangeBehaviors:{"":"append","orderby(-createdBy.userIdAndExpiresAt)":"prepend"}}],onError(e){const a=(0,x.Z)(e);n(f.Z.wrap(e,(null===a||void 0===a?void 0:a.message)||"Unexpected server error, try again."))},onCompleted(){e()}})}));case 23:i(!1),e.onSuccess(),_.Z.track("PRO checkout success",{trigger:e.trigger});case 26:n.next=34;break;case 28:n.prev=28,n.t0=n.catch(4),h=n.t0,i(!1),l(h.message),_.Z.track("PRO checkout error",{trigger:e.trigger});case 34:case"end":return n.stop()}}),n,null,[[4,28]])})));return function(e){return n.apply(this,arguments)}}(),children:[(0,P.jsxs)(k.k,{children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{style:{float:"left"},children:"Payment Information"}),(0,P.jsxs)("label",{style:{float:"right"},children:[(0,P.jsx)(v.G,{icon:F.byT}),"\xa0Secure"]})]}),(0,P.jsx)("div",{style:{clear:"both"}}),(0,P.jsx)(p.CardElement,{options:{classes:{base:"input cc"},style:{base:{fontSize:"18px"}}},onChange:()=>{_.Z.track("PRO checkout entered credit card")}})]}),a?(0,P.jsxs)("span",{id:"error",children:["Error: ",a]}):null,(0,P.jsx)(C.Z,{label:"Complete Upgrade",disabled:!u||!g||r})]})}var N=a(55769),K=a(54465),L=a(34156),w=a.n(L),T=a(34155);f.Z.assert("pk_live_51I6rPMFHH3CDqdNAyadQVl1wOiccdSH9b3uUok2ftgw8Vh6a7psCf9EUcJNeGFUmftzEWZ8tiIBtD4VMxaMHmrCD00wEPpZXox","env is missing STRIPE_PUBLISHABLE_KEY",{env:T.env});const E=w()(K.J);var Z=e=>{const n=E("pk_live_51I6rPMFHH3CDqdNAyadQVl1wOiccdSH9b3uUok2ftgw8Vh6a7psCf9EUcJNeGFUmftzEWZ8tiIBtD4VMxaMHmrCD00wEPpZXox");return(0,P.jsx)(p.Elements,{stripe:n,children:e.children})};function A(e){const n=(0,b.useFragment)(d,e.me);return(0,P.jsx)(N.Z,{title:"Upgrade to Codeshare Pro",onClose:e.onClose,renderBody:()=>null,renderFooter:()=>(_.Z.track("Open PRO checkout modal",{trigger:e.trigger}),(0,P.jsx)("div",{className:"modal__footer",style:{paddingTop:0},children:(0,P.jsx)(Z,{children:(0,P.jsx)(M,{trigger:e.trigger,me:n,onSuccess:e.onClose})})}))})}var R=e=>{let n=e.children;return(0,P.jsx)("span",{className:"plan-list-description hint--left","data-hint":n,children:(0,P.jsx)(v.G,{icon:F.Fuz})})},I=a(46359),D=a(13126),U=a(22644);function V(e){const n=(0,o.useRef)(!1);(0,o.useEffect)((()=>()=>{n.current=!0}),[]);const a=(0,o.useState)(!1),l=a[0],r=a[1],t=(0,o.useState)(!1),d=t[0],c=t[1],u=(0,b.useFragment)(i,e.me),m=e.codeshare?(0,b.useFragment)(s,e.codeshare):void 0,g=(0,o.useRef)(null);(0,o.useEffect)((()=>{g.current&&g.current.focus()}),[g]);const h=(0,U.Z)(u);return(0,P.jsxs)("div",{className:"container",children:[(0,P.jsx)("h1",{className:"is-title",children:h?"You're a Codeshare Pro!":"Upgrade to Codeshare Pro"}),(0,P.jsxs)("div",{className:"group plans",children:[(0,P.jsx)("div",{className:"span1"}),(0,P.jsx)("div",{className:"span5",children:(0,P.jsxs)("div",{className:"plan",children:[(0,P.jsxs)("h2",{className:"plan-name",children:["Free ",(0,P.jsx)("span",{className:"plan-price",children:"$0/mth"})]}),(0,P.jsxs)("ul",{className:"plan-list",children:[(0,P.jsx)("li",{className:"plan-list-item",children:"20 Saved Codeshares"}),(0,P.jsx)("li",{className:"plan-list-item",children:"Unlimited Collaborators"})]}),(0,P.jsx)("p",{children:h?(0,P.jsx)("a",{href:"mailto:hello@codeshare.io?subject=Downgrade from Codeshare Pro Please",className:"btn-primary btn-block",children:"Downgrade Now"}):null})]})}),(0,P.jsx)("div",{className:"span5",children:(0,P.jsxs)("div",{className:"plan",children:[(0,P.jsxs)("h2",{className:"plan-name",children:["Pro ",(0,P.jsx)("span",{className:"plan-price",children:"$49/mth"})]}),(0,P.jsxs)("ul",{className:"plan-list",children:[(0,P.jsxs)("li",{className:"plan-list-item",children:["Unlimited Saved Codeshares"," ",(0,P.jsx)(R,{children:"Create and save as many Codeshares as you like."})]}),(0,P.jsxs)("li",{className:"plan-list-item",children:["Unlimited Collaborators"," ",(0,P.jsx)(R,{children:"Collaborators are people who can view/edit your Codeshare."})]}),(0,P.jsxs)("li",{className:"plan-list-item",children:["View-Only Mode"," ",(0,P.jsx)(R,{children:"View-Only enables Codeshare creators to lock the code so viewers can't edit. Great for educators or presenters."})]}),(0,P.jsxs)("li",{className:"plan-list-item",children:["No Ads (including collaborators)"," ",(0,P.jsx)(R,{children:"Pro users never see ads and Codeshares created by Pro users hide ads for all collaborators."})]}),(0,P.jsxs)("li",{className:"plan-list-item",children:["Default Codeshare Settings"," ",(0,P.jsx)(R,{children:"Create Codeshares with default syntax and tab-size."})]})]}),(0,P.jsx)("p",{children:u.anonymous?(0,P.jsx)(I.Z,{className:"btn-primary btn-block",href:"/login",children:"Log In To Upgrade"}):h?(0,P.jsx)("button",{disabled:!0,className:"btn-disabled btn-block",children:"Your Current Plan"}):(0,P.jsx)("button",{ref:g,className:"btn-primary btn-block",onClick:()=>r(!0),children:"Upgrade Now"})})]})}),(0,P.jsx)("div",{className:"span1"})]}),(0,P.jsx)("div",{className:"group",children:(0,P.jsxs)("div",{className:"span12",children:[(0,P.jsxs)("p",{className:"aligncenter",children:["Payments processed securely with Stripe.",(0,P.jsx)("br",{}),(0,P.jsx)("img",{src:"/-/img/powered_by_stripe@3x.png",width:"120",alt:"Powered by Stripe"})]}),(0,P.jsxs)("p",{className:"aligncenter",children:["Need something more custom or robust for your company?"," ",(0,P.jsx)("a",{href:"mailto:hello@codeshare.io",children:"Contact us for custom plans"}),"."]})]})}),d?(0,P.jsx)(D.Z,{source:"plans_upgrade_button",me:u,codeshare:m,onClose:e=>{n.current||(c(!1),e&&r(!0))}}):null,l?(0,P.jsx)(A,{trigger:e.trigger,me:u,onClose:()=>{n.current||r(!1)},onSuccess:()=>{n.current||(r(!1),e.onSuccess&&e.onSuccess())}}):null]})}},53127:function(e,n,a){a.d(n,{J:function(){return t}});var l=a(98152),s=a(4942),r=(a(66992),a(51532),a(33948),a(91038),a(21249),a(67294)),i=a(29652),o=a(85893);class t{constructor(){(0,s.Z)(this,"EVENT_NAME","modals:change"),(0,s.Z)(this,"modals",new Map),(0,s.Z)(this,"ee",(0,i.Z)())}getModalEntries(){return Array.from(this.modals.entries())}onModalsChange(e){this.ee.on(this.EVENT_NAME,e)}offModalsChange(e){this.ee.off(this.EVENT_NAME,e)}emitModalsChange(){this.ee.emit(this.EVENT_NAME,this.modals.values())}addModal(e,n){this.modals.set(e,n),this.emitModalsChange()}removeModal(e){this.modals.delete(e),this.emitModalsChange()}}const d=(0,r.createContext)(null),c=d.Provider;function u(){const e=(0,r.useContext)(d),n=(0,r.useState)((null===e||void 0===e?void 0:e.getModalEntries())||[]),a=n[0],s=n[1],i=()=>{s((null===e||void 0===e?void 0:e.getModalEntries())||[])};return(0,r.useEffect)((()=>(null===e||void 0===e||e.onModalsChange(i),()=>{null===e||void 0===e||e.offModalsChange(i)})),[]),(0,o.jsx)("div",{id:"modals",children:a.map((e=>{let n=(0,l.Z)(e,2),a=n[0],s=n[1];return(0,o.jsx)("div",{children:s},a)}))})}d.Provider=e=>(0,o.jsxs)(c,{value:e.value,children:[e.children,(0,o.jsx)(u,{})]}),n.Z=d},7986:function(e,n,a){a.d(n,{Z:function(){return y}});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LoginForm_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Me",abstractKey:null,hash:"497a19debdfc2c44cec95b28e3898893"};var s=l;const r=function(){var e={alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},n=[{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},e];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LoginForm_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"ModifiedBy",kind:"LinkedField",name:"modifiedBy",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null},e],storageKey:null}],type:"Codeshare",abstractKey:null}}();r.hash="9892f3cab56a99a6bb12365a64a08d14";var i=r;const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},i={alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"CodeshareConnection",kind:"LinkedField",name:"codesharesCreated",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeshareConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"node",plural:!1,selections:[a],storageKey:null}],storageKey:null}],storageKey:"codesharesCreated(first:1)"},o={alias:null,args:null,kind:"ScalarField",name:"token",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LoginFormMutation",selections:[{alias:null,args:n,concreteType:"AuthResponse",kind:"LinkedField",name:"login",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[a,l,s,r,i],storageKey:null},{args:null,kind:"FragmentSpread",name:"CodesharePage_viewer"}],storageKey:null},o],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LoginFormMutation",selections:[{alias:null,args:n,concreteType:"AuthResponse",kind:"LinkedField",name:"login",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[a,l,s,r,i,{alias:null,args:null,concreteType:"UserSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"theme",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"keymap",storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:100}],concreteType:"SubscriptionPlanConnection",kind:"LinkedField",name:"subscriptionPlans",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlanConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"planId",storageKey:null},a],storageKey:null}],storageKey:null}],storageKey:"subscriptionPlans(first:100)"}],storageKey:null}],storageKey:null},o],storageKey:null}]},params:{cacheID:"0ca08c9c30d966e4d89b24d6b5ffc2d1",id:null,metadata:{},name:"LoginFormMutation",operationKind:"mutation",text:"mutation LoginFormMutation(\n  $input: LoginInput!\n) {\n  login(input: $input) {\n    viewer {\n      me {\n        id\n        name\n        email\n        anonymous\n        codesharesCreated(first: 1) {\n          edges {\n            node {\n              id\n            }\n          }\n        }\n      }\n      ...CodesharePage_viewer\n    }\n    token\n  }\n}\n\nfragment AuthUserNavbar_me on Me {\n  anonymous\n  name\n  email\n  ...Gravatar_me\n}\n\nfragment CodeshareCodeMirror_me on Me {\n  id\n  ...useTheme_me\n  ...useKeymap_me\n}\n\nfragment CodeshareEditor_me on Me {\n  ...CodeshareFirepad_me\n}\n\nfragment CodeshareFirepad_me on Me {\n  id\n  ...CodeshareCodeMirror_me\n}\n\nfragment CodeshareHead_me on Me {\n  ...CodeshareLazyHead_me\n  ...useKeymap_me\n}\n\nfragment CodeshareKeymapFormField_me on Me {\n  ...useKeymap_me\n}\n\nfragment CodeshareLazyHead_me on Me {\n  ...useTheme_me\n}\n\nfragment CodeshareNavbar_me on Me {\n  anonymous\n  ...UserNavbar_me\n  ...CodeshareShareModal_me\n  ...PlansButton_me\n  ...isCodeshareProSubscriber_me\n}\n\nfragment CodesharePage_viewer on Viewer {\n  me {\n    ...CodeshareHead_me\n    ...CodeshareNavbar_me\n    ...CodeshareEditor_me\n    ...CodeshareSidebar_me\n    ...NagModal_me\n    ...isCodeshareProSubscriber_me\n    ...SponsorToast_me\n    ...SponsorFooter_me\n    id\n  }\n}\n\nfragment CodesharePlans_me on Me {\n  anonymous\n  ...CodeshareProCheckoutModal_me\n  ...isCodeshareProSubscriber_me\n  ...LoginRegisterModal_me\n}\n\nfragment CodeshareProCheckoutModal_me on Me {\n  ...CodeshareProForm_me\n}\n\nfragment CodeshareProForm_me on Me {\n  id\n  email\n}\n\nfragment CodeshareProModal_me on Me {\n  ...CodesharePlans_me\n}\n\nfragment CodeshareSettingsForm_me on Me {\n  anonymous\n  ...CodeshareThemeFormField_me\n  ...CodeshareKeymapFormField_me\n}\n\nfragment CodeshareShareModal_me on Me {\n  ...CodeshareViewOnlyCheckbox_me\n}\n\nfragment CodeshareSidebar_me on Me {\n  ...isCodeshareProSubscriber_me\n  ...CodeshareSettingsForm_me\n}\n\nfragment CodeshareThemeFormField_me on Me {\n  ...useTheme_me\n}\n\nfragment CodeshareViewOnlyCheckbox_me on Me {\n  anonymous\n  ...isCodeshareProSubscriber_me\n  ...CodeshareProModal_me\n}\n\nfragment Gravatar_me on Me {\n  name\n  email\n}\n\nfragment LoginForm_me on Me {\n  id\n}\n\nfragment LoginRegisterModal_me on Me {\n  ...LoginForm_me\n  ...RegisterForm_me\n}\n\nfragment NagModal_me on Me {\n  anonymous\n  ...LoginRegisterModal_me\n}\n\nfragment PlansButton_me on Me {\n  ...CodeshareProModal_me\n}\n\nfragment RegisterForm_me on Me {\n  id\n}\n\nfragment SponsorFooter_me on Me {\n  ...PlansButton_me\n  ...SponsorScriptToast_me\n}\n\nfragment SponsorScriptToast_me on Me {\n  ...PlansButton_me\n}\n\nfragment SponsorToast_me on Me {\n  ...PlansButton_me\n  ...SponsorScriptToast_me\n}\n\nfragment UserNavbar_me on Me {\n  anonymous\n  ...AuthUserNavbar_me\n}\n\nfragment isCodeshareProSubscriber_me on Me {\n  subscriptionPlans(first: 100) {\n    edges {\n      node {\n        isActive\n        planId\n        id\n      }\n    }\n  }\n}\n\nfragment useKeymap_me on Me {\n  id\n  anonymous\n  settings {\n    keymap\n  }\n}\n\nfragment useTheme_me on Me {\n  id\n  anonymous\n  settings {\n    theme\n  }\n}\n"}}}();o.hash="5692c818fbca711b0d239a2ead97ff2e";var t=o,d=a(26173),c=a(67294),u=a(51287),m=a(96767),g=a(67912),h=a(85893);const p=t;var y=e=>{const n=(0,c.useState)(""),a=n[0],l=n[1],r=(0,c.useState)(""),o=r[0],t=r[1];let y=null;e.codeshare&&(y=(0,g.useFragment)(i,e.codeshare));const b=(0,g.useFragment)(s,e.me);return(0,h.jsxs)(u.Z,{buttonLabel:e.buttonLabel||"Log in",theme:d.y.FULL_WIDTH,getMutationConfig:()=>({mutation:p,variables:{input:{email:a,password:o}},updater:e=>{const n=e.getRootField("login").getLinkedRecord("viewer"),a=n.getLinkedRecord("me");if(e.getRoot().setLinkedRecord(n,"viewer"),y){const n=e.get(y.id),l=null===n||void 0===n?void 0:n.getLinkedRecord("createdBy");null===l||void 0===l||l.setValue(l.getValue("userId")===a.getValue("id"),"me");const s=null===n||void 0===n?void 0:n.getLinkedRecord("modifiedBy");null===s||void 0===s||s.setValue(s.getValue("userId")===a.getValue("id"),"me");const r=null===n||void 0===n?void 0:n.getLinkedRecord("canEdit"),i=null===r||void 0===r?void 0:r.getValue("userIds");null===r||void 0===r||r.setValue(0===(null===i||void 0===i?void 0:i.length)||(null===i||void 0===i?void 0:i.contains(b.id)),"me")}return e},onSuccess:n=>{if(e.onSuccess)return e.onSuccess(n)}}),children:[(0,h.jsx)(m.Z,{name:"email",id:"email",type:"email",label:"Email address",autoFocus:!0,autoComplete:"email",required:!0,value:a,onChange:n=>{e.onEmailChange&&e.onEmailChange(n),l(n)}}),(0,h.jsx)(m.Z,{name:"password",id:"password",type:"password",label:"Password",autoComplete:"current-password",required:!0,value:o,onChange:t}),e.children]})}},13126:function(e,n,a){a.d(n,{Z:function(){return v}});a(26833),a(88674),a(54747);const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LoginRegisterModal_me",selections:[{args:null,kind:"FragmentSpread",name:"LoginForm_me"},{args:null,kind:"FragmentSpread",name:"RegisterForm_me"}],type:"Me",abstractKey:null,hash:"9eb6a6f1924f52929c439c250cf9d120"};var s=l;const r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LoginRegisterModal_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"LoginForm_codeshare"},{args:null,kind:"FragmentSpread",name:"RegisterForm_codeshare"}],type:"Codeshare",abstractKey:null,hash:"21d09249c9fe7e8cf47c2928139de59f"};var i,o=r,t=a(67912),d=a(46359),c=a(7986),u=a(55769),m=a(7739),g=a(97407),h=a(30924),p=a(22578),y=a(92432),b=a(6492),f=a(85893);function v(e){const n=(0,t.useRelayEnvironment)();let a;e.codeshare&&(a=(0,t.useFragment)(o,e.codeshare));const l=(0,t.useFragment)(s,e.me);return(0,f.jsx)(u.Z,{title:"login_signup_modal",tabs:Object.values(i),onClose:e.onClose,renderBody:s=>{let r=s.tab;return(0,f.jsx)(g.Z,{value:r,cases:{[i.LOGIN]:(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{children:"\ud83d\udc4b Welcome back. Log in to access your code."}),(0,f.jsx)(c.Z,{me:l,codeshare:a,onSuccess:l=>{var s,r;h.Z.track("Log in",{isModal:!0,source:e.source});const i=l.login.viewer.me;h.Z.identify(i.id,{anonymous:i.anonymous,name:i.name,email:i.email}),null!==(s=a)&&void 0!==s&&s.createdBy.me||null===(r=a)||void 0===r||!r.createdBy.user.anonymous?e.onClose(!0):k(n,a.id).then((()=>e.onClose())).catch((()=>e.onClose()))},children:(0,f.jsx)(d.Z,{style:{display:"block",marginBottom:"20px"},href:"/forgot-password",children:"Forgot your password?"})}),(0,f.jsx)("button",{type:"submit",onClick:()=>e.onClose(),className:"btn btn-close",children:"Close"})]}),[i.SIGNUP]:(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{children:"\ud83d\ude0e You've been working for a while. Sign up to save your code."}),(0,f.jsx)(m.Z,{me:l,codeshare:a,onSuccess:l=>{var s,r;h.Z.track("Register",{isModal:!0});const i=l.register.viewer.me;h.Z.identify(i.id,{anonymous:i.anonymous,name:i.name,email:i.email}),null!==(s=a)&&void 0!==s&&s.createdBy.me||null===(r=a)||void 0===r||!r.createdBy.user.anonymous?e.onClose(!0):k(n,a.id).then((()=>e.onClose())).catch((()=>e.onClose()))}}),(0,f.jsx)("button",{type:"submit",onClick:()=>e.onClose(),className:"btn btn-close",children:"Close"})]})}})},renderFooter:()=>null})}function k(e,n){return new Promise(((a,l)=>{(0,p.commitMutation)(e,{mutation:b.Z,variables:{input:{id:n,save:!0}},onError(e){l(e)},onCompleted(e,n){if(n&&n.length)return n.forEach(((e,n)=>y.Z.error("saveCodeshare error",{index:n,err:e}))),void l(n[0]);a()}})}))}!function(e){e.SIGNUP="Sign up",e.LOGIN="Log in"}(i||(i={}))},55769:function(e,n,a){a(21249);var l=a(67814),s=a(57243),r=a(94184),i=a.n(r),o=a(51436),t=a(67294),d=a(85893);const c=e=>{const n=(0,t.useState)(e.activeTabIndex),a=n[0],r=n[1],c={tab:e.tabs.length?e.tabs[a]:"default",onClose:e.onClose};return(0,d.jsx)(s.Z,{name:e.title,children:(0,d.jsx)("div",{className:"modal",onClick:()=>e.onClose(),children:(0,d.jsxs)("div",{className:"modal__dialog",onClick:e=>e.stopPropagation(),children:[e.tabs?(0,d.jsx)("nav",{className:"modal-nav",children:(0,d.jsx)("ul",{className:"modal-nav__list",children:e.tabs.map(((e,n)=>(0,d.jsx)("li",{children:(0,d.jsx)("a",{className:i()({active:a===n,"modal-nav__item":!0}),onClick:()=>r(n),id:"trigger-login",children:e})},e)))})}):null,(0,d.jsxs)("div",{className:"modal__content",children:[e.tabs.length?null:(0,d.jsxs)("div",{className:"modal__header",children:[(0,d.jsx)("button",{className:"btn btn-icon modal__close",onClick:()=>e.onClose(),children:(0,d.jsx)(l.G,{icon:o.NBC})}),(0,d.jsx)("h4",{className:"modal__title",children:e.title})]}),(0,d.jsx)("div",{className:"modal__body",children:e.renderBody(c)}),e.renderFooter(c)]})]})})})};c.defaultProps={activeTabIndex:0,tabs:[],renderFooter:e=>(0,d.jsx)("div",{className:"modal__footer",children:(0,d.jsx)("button",{className:"btn btn-primary",onClick:e.onClose,children:"Close"})})},n.Z=c},57243:function(e,n,a){a.d(n,{Z:function(){return r}});var l=a(53127),s=a(67294);function r(e){const n=e.children,a=(0,s.useContext)(l.Z);return(0,s.useEffect)((()=>{if(n)return null===a||void 0===a||a.addModal(e.name,n),()=>{null===a||void 0===a||a.removeModal(e.name)}}),[n]),n||null===a||void 0===a||a.removeModal(e.name),null}},82683:function(e,n,a){var l=a(11436),s=a(85893);n.Z=e=>(0,s.jsxs)(l.Z,{logoClassName:"span4",children:[e.children,(0,s.jsx)("div",{className:"span8",children:(0,s.jsx)("ul",{className:"navbar navbar--right header__navbar nav-item-pad",children:e.renderActions()})},"user-menu")]})},68173:function(e,n,a){a.d(n,{Z:function(){return C}});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserNavbar_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{args:null,kind:"FragmentSpread",name:"AuthUserNavbar_me"}],type:"Me",abstractKey:null,hash:"79b977bfc79354aabc4c75e4abce9481"};var s=l,r=a(67294),i=a(67912),o=a(82683),t=a(44925);const d={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AuthUserNavbar_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},{args:null,kind:"FragmentSpread",name:"Gravatar_me"}],type:"Me",abstractKey:null,hash:"c625af959b89aab7dbee63863e6f5976"};var c=d,u=a(46359),m=a(11436),g=a(94184),h=a.n(g),p=a(11163),y=a(85893);const b=["logoSrc"],f=e=>{let n=e.logoSrc,a=(0,t.Z)(e,b);const l=(0,r.useState)(!1),s=l[0],o=l[1],d=(0,i.useFragment)(c,a.me),g=(0,r.useRef)(null);(0,r.useEffect)((()=>{function e(e){var n;null!==g&&void 0!==g&&null!==(n=g.current)&&void 0!==n&&n.contains(e.target)||o(!1)}return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}}),[]);const f=(0,p.useRouter)();return(0,y.jsxs)(m.Z,{logoSrc:n,children:[a.children,(0,y.jsx)("div",{className:"span6",children:(0,y.jsxs)("ul",{className:"navbar navbar--right header__navbar",children:[a.renderActions(),(0,y.jsxs)("li",{className:"dropdown",children:[(0,y.jsxs)("a",{href:"#",onClick:function(e){e.preventDefault(),e.stopPropagation(),o(!s)},className:"dropdown-toggle",children:[d.name||d.email||"Anonymous",(0,y.jsx)("span",{className:"glyphicon glyphicon-chevron-down"})]}),(0,y.jsxs)("ul",{ref:g,className:h()({"dropdown-content":!0,"dropdown-content--is-active":s}),children:[/^\/codes$/i.test(f.pathname||"")?null:(0,y.jsx)("li",{className:"dropdown-content__option",children:(0,y.jsx)(u.Z,{href:"/codes",children:"Your Codeshares"})}),(0,y.jsx)("li",{className:"dropdown-content__option",children:(0,y.jsx)(u.Z,{href:"/new",rel:"nofollow",children:"New Codeshare"})}),/^\/settings$/i.test(f.pathname||"")?null:(0,y.jsx)("li",{className:"dropdown-content__option",children:(0,y.jsx)(u.Z,{href:"/settings",rel:"nofollow",children:"Account Settings"})}),(0,y.jsx)("li",{className:"dropdown-content__option",children:(0,y.jsx)(u.Z,{href:"/logout",rel:"nofollow",children:"Log Out"})})]})]})]})},"user-menu")]})};f.defaultProps={renderActions:()=>null};var v=f;const k=e=>{const n=(0,i.useFragment)(s,e.me);return n.anonymous?(0,y.jsx)(o.Z,{renderActions:e.renderAnonActions,children:e.children}):(0,y.jsx)(v,{me:n,renderActions:e.renderAuthActions,children:e.children})};k.defaultProps={renderAnonActions:()=>[(0,y.jsx)("li",{children:(0,y.jsx)(u.Z,{href:"/plans",children:"Pricing"})},"pricing"),(0,y.jsx)("li",{children:(0,y.jsx)(u.Z,{href:"/register",children:"Sign Up"})},"register"),(0,y.jsx)("li",{children:(0,y.jsx)(u.Z,{href:"/login",children:"Log In"})},"login")],renderAuthActions:()=>null};var C=k},97407:function(e,n,a){function l(e){return e.cases[e.value]}a.d(n,{Z:function(){return l}})},22644:function(e,n,a){a.d(n,{Z:function(){return d},A:function(){return c}});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"isCodeshareProSubscriber_user",selections:[{alias:null,args:[{kind:"Literal",name:"first",value:100}],concreteType:"SubscriptionPlanConnection",kind:"LinkedField",name:"subscriptionPlans",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlanConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"planId",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"subscriptionPlans(first:100)"}],type:"User",abstractKey:null,hash:"0a367950ad2673a37f1f11672c59a01a"};var s=l;const r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"isCodeshareProSubscriber_me",selections:[{alias:null,args:[{kind:"Literal",name:"first",value:100}],concreteType:"SubscriptionPlanConnection",kind:"LinkedField",name:"subscriptionPlans",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlanConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"planId",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"subscriptionPlans(first:100)"}],type:"Me",abstractKey:null,hash:"224ec0e9ba50a655106a84b960e7c056"};var i=r,o=a(67912);const t="PRO_49";function d(e){return(0,o.useFragment)(i,e).subscriptionPlans.edges.some((e=>{var n,a;return(null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.isActive)&&(null===e||void 0===e||null===(a=e.node)||void 0===a?void 0:a.planId)===t}))}function c(e){return(0,o.useFragment)(s,e).subscriptionPlans.edges.some((e=>{var n,a;return(null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.isActive)&&(null===e||void 0===e||null===(a=e.node)||void 0===a?void 0:a.planId)===t}))}}}]);