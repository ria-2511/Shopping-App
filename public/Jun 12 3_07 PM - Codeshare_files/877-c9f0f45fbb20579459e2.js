(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[877],{15845:function(t,e,n){t.exports=n(47434)().Promise},98922:function(t){"use strict";var e="@@any-promise/REGISTRATION",n=null;t.exports=function(t,r){return function(i,o){i=i||null;var s=!1!==(o=o||{}).global;if(null===n&&s&&(n=t[e]||null),null!==n&&null!==i&&n.implementation!==i)throw new Error('any-promise already defined as "'+n.implementation+'".  You can only register an implementation before the first  call to require("any-promise") and an implementation cannot be changed');return null===n&&(n=null!==i&&"undefined"!==typeof o.Promise?{Promise:o.Promise,implementation:i}:r(i),s&&(t[e]=n)),n}}},47434:function(t,e,n){"use strict";t.exports=n(98922)(window,(function(){if("undefined"===typeof window.Promise)throw new Error("any-promise browser requires a polyfill or explicit registration e.g: require('any-promise/register/bluebird')");return{Promise:window.Promise,implementation:"window.Promise"}}))},55292:function(t,e,n){!function(t){function e(e,n,r){var i,o=e.getWrapperElement();return(i=o.appendChild(document.createElement("div"))).className=r?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof n?i.innerHTML=n:i.appendChild(n),t.addClass(o,"dialog-opened"),i}function n(t,e){t.state.currentNotificationClose&&t.state.currentNotificationClose(),t.state.currentNotificationClose=e}t.defineExtension("openDialog",(function(r,i,o){o||(o={}),n(this,null);var s=e(this,r,o.bottom),a=!1,c=this;function u(e){if("string"==typeof e)h.value=e;else{if(a)return;a=!0,t.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s),c.focus(),o.onClose&&o.onClose(s)}}var l,h=s.getElementsByTagName("input")[0];return h?(h.focus(),o.value&&(h.value=o.value,!1!==o.selectValueOnOpen&&h.select()),o.onInput&&t.on(h,"input",(function(t){o.onInput(t,h.value,u)})),o.onKeyUp&&t.on(h,"keyup",(function(t){o.onKeyUp(t,h.value,u)})),t.on(h,"keydown",(function(e){o&&o.onKeyDown&&o.onKeyDown(e,h.value,u)||((27==e.keyCode||!1!==o.closeOnEnter&&13==e.keyCode)&&(h.blur(),t.e_stop(e),u()),13==e.keyCode&&i(h.value,e))})),!1!==o.closeOnBlur&&t.on(s,"focusout",(function(t){null!==t.relatedTarget&&u()}))):(l=s.getElementsByTagName("button")[0])&&(t.on(l,"click",(function(){u(),c.focus()})),!1!==o.closeOnBlur&&t.on(l,"blur",u),l.focus()),u})),t.defineExtension("openConfirm",(function(r,i,o){n(this,null);var s=e(this,r,o&&o.bottom),a=s.getElementsByTagName("button"),c=!1,u=this,l=1;function h(){c||(c=!0,t.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s),u.focus())}a[0].focus();for(var f=0;f<a.length;++f){var p=a[f];!function(e){t.on(p,"click",(function(n){t.e_preventDefault(n),h(),e&&e(u)}))}(i[f]),t.on(p,"blur",(function(){--l,setTimeout((function(){l<=0&&h()}),200)})),t.on(p,"focus",(function(){++l}))}})),t.defineExtension("openNotification",(function(r,i){n(this,u);var o,s=e(this,r,i&&i.bottom),a=!1,c=i&&"undefined"!==typeof i.duration?i.duration:5e3;function u(){a||(a=!0,clearTimeout(o),t.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s))}return t.on(s,"click",(function(e){t.e_preventDefault(e),u()})),c&&(o=setTimeout(u,c)),u}))}(n(4631))},21994:function(t,e,n){!function(t){"use strict";function e(e,r){function i(){e.display.wrapper.offsetHeight?(n(e,r),e.display.lastWrapHeight!=e.display.wrapper.clientHeight&&e.refresh()):r.timeout=setTimeout(i,r.delay)}r.timeout=setTimeout(i,r.delay),r.hurry=function(){clearTimeout(r.timeout),r.timeout=setTimeout(i,50)},t.on(window,"mouseup",r.hurry),t.on(window,"keyup",r.hurry)}function n(e,n){clearTimeout(n.timeout),t.off(window,"mouseup",n.hurry),t.off(window,"keyup",n.hurry)}t.defineOption("autoRefresh",!1,(function(t,r){t.state.autoRefresh&&(n(t,t.state.autoRefresh),t.state.autoRefresh=null),r&&0==t.display.wrapper.offsetHeight&&e(t,t.state.autoRefresh={delay:r.delay||250})}))}(n(4631))},88386:function(t,e,n){!function(t){function e(t){t.state.placeholder&&(t.state.placeholder.parentNode.removeChild(t.state.placeholder),t.state.placeholder=null)}function n(t){e(t);var n=t.state.placeholder=document.createElement("pre");n.style.cssText="height: 0; overflow: visible",n.style.direction=t.getOption("direction"),n.className="CodeMirror-placeholder CodeMirror-line-like";var r=t.getOption("placeholder");"string"==typeof r&&(r=document.createTextNode(r)),n.appendChild(r),t.display.lineSpace.insertBefore(n,t.display.lineSpace.firstChild)}function r(t){o(t)&&n(t)}function i(t){var r=t.getWrapperElement(),i=o(t);r.className=r.className.replace(" CodeMirror-empty","")+(i?" CodeMirror-empty":""),i?n(t):e(t)}function o(t){return 1===t.lineCount()&&""===t.getLine(0)}t.defineOption("placeholder","",(function(n,o,s){var a=s&&s!=t.Init;if(o&&!a)n.on("blur",r),n.on("change",i),n.on("swapDoc",i),i(n);else if(!o&&a){n.off("blur",r),n.off("change",i),n.off("swapDoc",i),e(n);var c=n.getWrapperElement();c.className=c.className.replace(" CodeMirror-empty","")}o&&!n.hasFocus()&&r(n)}))}(n(4631))},4328:function(t,e,n){!function(t){var e=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),n=t.Pos,r={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function i(t){return t&&t.bracketRegex||/[(){}[\]]/}function o(t,e,o){var a=t.getLineHandle(e.line),c=e.ch-1,u=o&&o.afterCursor;null==u&&(u=/(^| )cm-fat-cursor($| )/.test(t.getWrapperElement().className));var l=i(o),h=!u&&c>=0&&l.test(a.text.charAt(c))&&r[a.text.charAt(c)]||l.test(a.text.charAt(c+1))&&r[a.text.charAt(++c)];if(!h)return null;var f=">"==h.charAt(1)?1:-1;if(o&&o.strict&&f>0!=(c==e.ch))return null;var p=t.getTokenTypeAt(n(e.line,c+1)),d=s(t,n(e.line,c+(f>0?1:0)),f,p||null,o);return null==d?null:{from:n(e.line,c),to:d&&d.pos,match:d&&d.ch==h.charAt(0),forward:f>0}}function s(t,e,o,s,a){for(var c=a&&a.maxScanLineLength||1e4,u=a&&a.maxScanLines||1e3,l=[],h=i(a),f=o>0?Math.min(e.line+u,t.lastLine()+1):Math.max(t.firstLine()-1,e.line-u),p=e.line;p!=f;p+=o){var d=t.getLine(p);if(d){var m=o>0?0:d.length-1,g=o>0?d.length:-1;if(!(d.length>c))for(p==e.line&&(m=e.ch-(o<0?1:0));m!=g;m+=o){var v=d.charAt(m);if(h.test(v)&&(void 0===s||t.getTokenTypeAt(n(p,m+1))==s)){var y=r[v];if(y&&">"==y.charAt(1)==o>0)l.push(v);else{if(!l.length)return{pos:n(p,m),ch:v};l.pop()}}}}}return p-o!=(o>0?t.lastLine():t.firstLine())&&null}function a(t,r,i){for(var s=t.state.matchBrackets.maxHighlightLineLength||1e3,a=[],c=t.listSelections(),u=0;u<c.length;u++){var l=c[u].empty()&&o(t,c[u].head,i);if(l&&t.getLine(l.from.line).length<=s){var h=l.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";a.push(t.markText(l.from,n(l.from.line,l.from.ch+1),{className:h})),l.to&&t.getLine(l.to.line).length<=s&&a.push(t.markText(l.to,n(l.to.line,l.to.ch+1),{className:h}))}}if(a.length){e&&t.state.focused&&t.focus();var f=function(){t.operation((function(){for(var t=0;t<a.length;t++)a[t].clear()}))};if(!r)return f;setTimeout(f,800)}}function c(t){t.operation((function(){t.state.matchBrackets.currentlyHighlighted&&(t.state.matchBrackets.currentlyHighlighted(),t.state.matchBrackets.currentlyHighlighted=null),t.state.matchBrackets.currentlyHighlighted=a(t,!1,t.state.matchBrackets)}))}t.defineOption("matchBrackets",!1,(function(e,n,r){r&&r!=t.Init&&(e.off("cursorActivity",c),e.state.matchBrackets&&e.state.matchBrackets.currentlyHighlighted&&(e.state.matchBrackets.currentlyHighlighted(),e.state.matchBrackets.currentlyHighlighted=null)),n&&(e.state.matchBrackets="object"==typeof n?n:{},e.on("cursorActivity",c))})),t.defineExtension("matchBrackets",(function(){a(this,!0)})),t.defineExtension("findMatchingBracket",(function(t,e,n){return(n||"boolean"==typeof e)&&(n?(n.strict=e,e=n):e=e?{strict:!0}:null),o(this,t,e)})),t.defineExtension("scanForBracket",(function(t,e,n,r){return s(this,t,e,n,r)}))}(n(4631))},87093:function(t,e,n){!function(t){"use strict";t.multiplexingMode=function(e){var n=Array.prototype.slice.call(arguments,1);function r(t,e,n,r){if("string"==typeof e){var i=t.indexOf(e,n);return r&&i>-1?i+e.length:i}var o=e.exec(n?t.slice(n):t);return o?o.index+n+(r?o[0].length:0):-1}return{startState:function(){return{outer:t.startState(e),innerActive:null,inner:null}},copyState:function(n){return{outer:t.copyState(e,n.outer),innerActive:n.innerActive,inner:n.innerActive&&t.copyState(n.innerActive.mode,n.inner)}},token:function(i,o){if(o.innerActive){var s=o.innerActive;if(u=i.string,!s.close&&i.sol())return o.innerActive=o.inner=null,this.token(i,o);if((h=s.close?r(u,s.close,i.pos,s.parseDelimiters):-1)==i.pos&&!s.parseDelimiters)return i.match(s.close),o.innerActive=o.inner=null,s.delimStyle&&s.delimStyle+" "+s.delimStyle+"-close";h>-1&&(i.string=u.slice(0,h));var a=s.mode.token(i,o.inner);return h>-1&&(i.string=u),h==i.pos&&s.parseDelimiters&&(o.innerActive=o.inner=null),s.innerStyle&&(a=a?a+" "+s.innerStyle:s.innerStyle),a}for(var c=1/0,u=i.string,l=0;l<n.length;++l){var h,f=n[l];if((h=r(u,f.open,i.pos))==i.pos){f.parseDelimiters||i.match(f.open),o.innerActive=f;var p=0;if(e.indent){var d=e.indent(o.outer,"","");d!==t.Pass&&(p=d)}return o.inner=t.startState(f.mode,p),f.delimStyle&&f.delimStyle+" "+f.delimStyle+"-open"}-1!=h&&h<c&&(c=h)}c!=1/0&&(i.string=u.slice(0,c));var m=e.token(i,o.outer);return c!=1/0&&(i.string=u),m},indent:function(n,r,i){var o=n.innerActive?n.innerActive.mode:e;return o.indent?o.indent(n.innerActive?n.inner:n.outer,r,i):t.Pass},blankLine:function(r){var i=r.innerActive?r.innerActive.mode:e;if(i.blankLine&&i.blankLine(r.innerActive?r.inner:r.outer),r.innerActive)"\n"===r.innerActive.close&&(r.innerActive=r.inner=null);else for(var o=0;o<n.length;++o){var s=n[o];"\n"===s.open&&(r.innerActive=s,r.inner=t.startState(s.mode,i.indent?i.indent(r.outer,"",""):0))}},electricChars:e.electricChars,innerMode:function(t){return t.inner?{state:t.inner,mode:t.innerActive.mode}:{state:t.outer,mode:e}}}}}(n(4631))},40790:function(t,e,n){!function(t){"use strict";function e(t,e){if(!t.hasOwnProperty(e))throw new Error("Undefined state "+e+" in simple mode")}function n(t,e){if(!t)return/(?:)/;var n="";return t instanceof RegExp?(t.ignoreCase&&(n="i"),t=t.source):t=String(t),new RegExp((!1===e?"":"^")+"(?:"+t+")",n)}function r(t){if(!t)return null;if(t.apply)return t;if("string"==typeof t)return t.replace(/\./g," ");for(var e=[],n=0;n<t.length;n++)e.push(t[n]&&t[n].replace(/\./g," "));return e}function i(t,i){(t.next||t.push)&&e(i,t.next||t.push),this.regex=n(t.regex),this.token=r(t.token),this.data=t}function o(t,e){return function(n,r){if(r.pending){var i=r.pending.shift();return 0==r.pending.length&&(r.pending=null),n.pos+=i.text.length,i.token}if(r.local){if(r.local.end&&n.match(r.local.end)){var o=r.local.endToken||null;return r.local=r.localState=null,o}var s;return o=r.local.mode.token(n,r.localState),r.local.endScan&&(s=r.local.endScan.exec(n.current()))&&(n.pos=n.start+s.index),o}for(var c=t[r.state],u=0;u<c.length;u++){var l=c[u],h=(!l.data.sol||n.sol())&&n.match(l.regex);if(h){l.data.next?r.state=l.data.next:l.data.push?((r.stack||(r.stack=[])).push(r.state),r.state=l.data.push):l.data.pop&&r.stack&&r.stack.length&&(r.state=r.stack.pop()),l.data.mode&&a(e,r,l.data.mode,l.token),l.data.indent&&r.indent.push(n.indentation()+e.indentUnit),l.data.dedent&&r.indent.pop();var f=l.token;if(f&&f.apply&&(f=f(h)),h.length>2&&l.token&&"string"!=typeof l.token){r.pending=[];for(var p=2;p<h.length;p++)h[p]&&r.pending.push({text:h[p],token:l.token[p-1]});return n.backUp(h[0].length-(h[1]?h[1].length:0)),f[0]}return f&&f.join?f[0]:f}}return n.next(),null}}function s(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=0;for(var r in t)if(t.hasOwnProperty(r)){if(!e.hasOwnProperty(r)||!s(t[r],e[r]))return!1;n++}for(var r in e)e.hasOwnProperty(r)&&n--;return 0==n}function a(e,r,i,o){var a;if(i.persistent)for(var c=r.persistentStates;c&&!a;c=c.next)(i.spec?s(i.spec,c.spec):i.mode==c.mode)&&(a=c);var u=a?a.mode:i.mode||t.getMode(e,i.spec),l=a?a.state:t.startState(u);i.persistent&&!a&&(r.persistentStates={mode:u,spec:i.spec,state:l,next:r.persistentStates}),r.localState=l,r.local={mode:u,end:i.end&&n(i.end),endScan:i.end&&!1!==i.forceEnd&&n(i.end,!1),endToken:o&&o.join?o[o.length-1]:o}}function c(t,e){for(var n=0;n<e.length;n++)if(e[n]===t)return!0}function u(e,n){return function(r,i,o){if(r.local&&r.local.mode.indent)return r.local.mode.indent(r.localState,i,o);if(null==r.indent||r.local||n.dontIndentStates&&c(r.state,n.dontIndentStates)>-1)return t.Pass;var s=r.indent.length-1,a=e[r.state];t:for(;;){for(var u=0;u<a.length;u++){var l=a[u];if(l.data.dedent&&!1!==l.data.dedentIfLineStart){var h=l.regex.exec(i);if(h&&h[0]){s--,(l.next||l.push)&&(a=e[l.next||l.push]),i=i.slice(h[0].length);continue t}}}break}return s<0?0:r.indent[s]}}t.defineSimpleMode=function(e,n){t.defineMode(e,(function(e){return t.simpleMode(e,n)}))},t.simpleMode=function(n,r){e(r,"start");var s={},a=r.meta||{},c=!1;for(var l in r)if(l!=a&&r.hasOwnProperty(l))for(var h=s[l]=[],f=r[l],p=0;p<f.length;p++){var d=f[p];h.push(new i(d,r)),(d.indent||d.dedent)&&(c=!0)}var m={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:c?[]:null}},copyState:function(e){var n={state:e.state,pending:e.pending,local:e.local,localState:null,indent:e.indent&&e.indent.slice(0)};e.localState&&(n.localState=t.copyState(e.local.mode,e.localState)),e.stack&&(n.stack=e.stack.slice(0));for(var r=e.persistentStates;r;r=r.next)n.persistentStates={mode:r.mode,spec:r.spec,state:r.state==e.localState?n.localState:t.copyState(r.mode,r.state),next:n.persistentStates};return n},token:o(s,n),innerMode:function(t){return t.local&&{mode:t.local.mode,state:t.localState}},indent:u(s,a)};if(a)for(var g in a)a.hasOwnProperty(g)&&(m[g]=a[g]);return m}}(n(4631))},32095:function(t,e,n){!function(t){"use strict";var e,n,r=t.Pos;function i(t){var e=t.flags;return null!=e?e:(t.ignoreCase?"i":"")+(t.global?"g":"")+(t.multiline?"m":"")}function o(t,e){for(var n=i(t),r=n,o=0;o<e.length;o++)-1==r.indexOf(e.charAt(o))&&(r+=e.charAt(o));return n==r?t:new RegExp(t.source,r)}function s(t){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(t.source)}function a(t,e,n){e=o(e,"g");for(var i=n.line,s=n.ch,a=t.lastLine();i<=a;i++,s=0){e.lastIndex=s;var c=t.getLine(i),u=e.exec(c);if(u)return{from:r(i,u.index),to:r(i,u.index+u[0].length),match:u}}}function c(t,e,n){if(!s(e))return a(t,e,n);e=o(e,"gm");for(var i,c=1,u=n.line,l=t.lastLine();u<=l;){for(var h=0;h<c&&!(u>l);h++){var f=t.getLine(u++);i=null==i?f:i+"\n"+f}c*=2,e.lastIndex=n.ch;var p=e.exec(i);if(p){var d=i.slice(0,p.index).split("\n"),m=p[0].split("\n"),g=n.line+d.length-1,v=d[d.length-1].length;return{from:r(g,v),to:r(g+m.length-1,1==m.length?v+m[0].length:m[m.length-1].length),match:p}}}}function u(t,e,n){for(var r,i=0;i<=t.length;){e.lastIndex=i;var o=e.exec(t);if(!o)break;var s=o.index+o[0].length;if(s>t.length-n)break;(!r||s>r.index+r[0].length)&&(r=o),i=o.index+1}return r}function l(t,e,n){e=o(e,"g");for(var i=n.line,s=n.ch,a=t.firstLine();i>=a;i--,s=-1){var c=t.getLine(i),l=u(c,e,s<0?0:c.length-s);if(l)return{from:r(i,l.index),to:r(i,l.index+l[0].length),match:l}}}function h(t,e,n){if(!s(e))return l(t,e,n);e=o(e,"gm");for(var i,a=1,c=t.getLine(n.line).length-n.ch,h=n.line,f=t.firstLine();h>=f;){for(var p=0;p<a&&h>=f;p++){var d=t.getLine(h--);i=null==i?d:d+"\n"+i}a*=2;var m=u(i,e,c);if(m){var g=i.slice(0,m.index).split("\n"),v=m[0].split("\n"),y=h+g.length,b=g[g.length-1].length;return{from:r(y,b),to:r(y+v.length-1,1==v.length?b+v[0].length:v[v.length-1].length),match:m}}}}function f(t,e,n,r){if(t.length==e.length)return n;for(var i=0,o=n+Math.max(0,t.length-e.length);;){if(i==o)return i;var s=i+o>>1,a=r(t.slice(0,s)).length;if(a==n)return s;a>n?o=s:i=s+1}}function p(t,i,o,s){if(!i.length)return null;var a=s?e:n,c=a(i).split(/\r|\n\r?/);t:for(var u=o.line,l=o.ch,h=t.lastLine()+1-c.length;u<=h;u++,l=0){var p=t.getLine(u).slice(l),d=a(p);if(1==c.length){var m=d.indexOf(c[0]);if(-1==m)continue t;return o=f(p,d,m,a)+l,{from:r(u,f(p,d,m,a)+l),to:r(u,f(p,d,m+c[0].length,a)+l)}}var g=d.length-c[0].length;if(d.slice(g)==c[0]){for(var v=1;v<c.length-1;v++)if(a(t.getLine(u+v))!=c[v])continue t;var y=t.getLine(u+c.length-1),b=a(y),x=c[c.length-1];if(b.slice(0,x.length)==x)return{from:r(u,f(p,d,g,a)+l),to:r(u+c.length-1,f(y,b,x.length,a))}}}}function d(t,i,o,s){if(!i.length)return null;var a=s?e:n,c=a(i).split(/\r|\n\r?/);t:for(var u=o.line,l=o.ch,h=t.firstLine()-1+c.length;u>=h;u--,l=-1){var p=t.getLine(u);l>-1&&(p=p.slice(0,l));var d=a(p);if(1==c.length){var m=d.lastIndexOf(c[0]);if(-1==m)continue t;return{from:r(u,f(p,d,m,a)),to:r(u,f(p,d,m+c[0].length,a))}}var g=c[c.length-1];if(d.slice(0,g.length)==g){var v=1;for(o=u-c.length+1;v<c.length-1;v++)if(a(t.getLine(o+v))!=c[v])continue t;var y=t.getLine(u+1-c.length),b=a(y);if(b.slice(b.length-c[0].length)==c[0])return{from:r(u+1-c.length,f(y,b,y.length-c[0].length,a)),to:r(u,f(p,d,g.length,a))}}}}function m(t,e,n,i){var s;this.atOccurrence=!1,this.doc=t,n=n?t.clipPos(n):r(0,0),this.pos={from:n,to:n},"object"==typeof i?s=i.caseFold:(s=i,i=null),"string"==typeof e?(null==s&&(s=!1),this.matches=function(n,r){return(n?d:p)(t,e,r,s)}):(e=o(e,"gm"),i&&!1===i.multiline?this.matches=function(n,r){return(n?l:a)(t,e,r)}:this.matches=function(n,r){return(n?h:c)(t,e,r)})}String.prototype.normalize?(e=function(t){return t.normalize("NFD").toLowerCase()},n=function(t){return t.normalize("NFD")}):(e=function(t){return t.toLowerCase()},n=function(t){return t}),m.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){for(var n=this.matches(e,this.doc.clipPos(e?this.pos.from:this.pos.to));n&&0==t.cmpPos(n.from,n.to);)e?n.from.ch?n.from=r(n.from.line,n.from.ch-1):n=n.from.line==this.doc.firstLine()?null:this.matches(e,this.doc.clipPos(r(n.from.line-1))):n.to.ch<this.doc.getLine(n.to.line).length?n.to=r(n.to.line,n.to.ch+1):n=n.to.line==this.doc.lastLine()?null:this.matches(e,r(n.to.line+1,0));if(n)return this.pos=n,this.atOccurrence=!0,this.pos.match||!0;var i=r(e?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:i,to:i},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(e,n){if(this.atOccurrence){var i=t.splitLines(e);this.doc.replaceRange(i,this.pos.from,this.pos.to,n),this.pos.to=r(this.pos.from.line+i.length-1,i[i.length-1].length+(1==i.length?this.pos.from.ch:0))}}},t.defineExtension("getSearchCursor",(function(t,e,n){return new m(this.doc,t,e,n)})),t.defineDocExtension("getSearchCursor",(function(t,e,n){return new m(this,t,e,n)})),t.defineExtension("selectMatches",(function(e,n){for(var r=[],i=this.getSearchCursor(e,this.getCursor("from"),n);i.findNext()&&!(t.cmpPos(i.to(),this.getCursor("to"))>0);)r.push({anchor:i.from(),head:i.to()});r.length&&this.setSelections(r,0)}))}(n(4631))},73986:function(t,e,n){!function(t){"use strict";var e=t.Pos;function n(t,e){return t.line==e.line&&t.ch==e.ch}var r=[];function i(t){r.push(t),r.length>50&&r.shift()}function o(t){if(!r.length)return i(t);r[r.length-1]+=t}function s(t){return r[r.length-(t?Math.min(t,1):1)]||""}function a(){return r.length>1&&r.pop(),s()}var c=null;function u(t,e,r,s,a){null==a&&(a=t.getRange(e,r)),"grow"==s&&c&&c.cm==t&&n(e,c.pos)&&t.isClean(c.gen)?o(a):!1!==s&&i(a),t.replaceRange("",e,r,"+delete"),c="grow"==s?{cm:t,pos:e,gen:t.changeGeneration()}:null}function l(t,e,n){return t.findPosH(e,n,"char",!0)}function h(t,e,n){return t.findPosH(e,n,"word",!0)}function f(t,e,n){return t.findPosV(e,n,"line",t.doc.sel.goalColumn)}function p(t,e,n){return t.findPosV(e,n,"page",t.doc.sel.goalColumn)}function d(t,n,r){for(var i=n.line,o=t.getLine(i),s=/\S/.test(r<0?o.slice(0,n.ch):o.slice(n.ch)),a=t.firstLine(),c=t.lastLine();;){if((i+=r)<a||i>c)return t.clipPos(e(i-r,r<0?0:null));if(o=t.getLine(i),/\S/.test(o))s=!0;else if(s)return e(i,0)}}function m(t,n,r){for(var i=n.line,o=n.ch,s=t.getLine(n.line),a=!1;;){var c=s.charAt(o+(r<0?-1:0));if(c){if(a&&/[!?.]/.test(c))return e(i,o+(r>0?1:0));a||(a=/\w/.test(c)),o+=r}else{if(i==(r<0?t.firstLine():t.lastLine()))return e(i,o);if(s=t.getLine(i+r),!/\S/.test(s))return e(i,o);i+=r,o=r<0?s.length:0}}}function g(t,r,i){var o;if(t.findMatchingBracket&&(o=t.findMatchingBracket(r,{strict:!0}))&&o.match&&(o.forward?1:-1)==i)return i>0?e(o.to.line,o.to.ch+1):o.to;for(var s=!0;;s=!1){var a=t.getTokenAt(r),c=e(r.line,i<0?a.start:a.end);if(!(s&&i>0&&a.end==r.ch)&&/\w/.test(a.string))return c;var u=t.findPosH(c,i,"char");if(n(c,u))return r;r=u}}function v(t,e){var n=t.state.emacsPrefix;return n?(L(t),"-"==n?-1:Number(n)):e?null:1}function y(t){var e="string"==typeof t?function(e){e.execCommand(t)}:t;return function(t){var n=v(t);e(t);for(var r=1;r<n;++r)e(t)}}function b(t,e,r,i){var o=v(t);o<0&&(i=-i,o=-o);for(var s=0;s<o;++s){var a=r(t,e,i);if(n(a,e))break;e=a}return e}function x(t,e){var n=function(n){n.extendSelection(b(n,n.getCursor(),t,e))};return n.motion=!0,n}function C(t,e,n,r){for(var i,o=t.listSelections(),s=o.length;s--;)u(t,i=o[s].head,b(t,i,e,n),r)}function w(t,e){if(t.somethingSelected()){for(var n,r=t.listSelections(),i=r.length;i--;)u(t,(n=r[i]).anchor,n.head,e);return!0}}function _(t,e){t.state.emacsPrefix?"-"!=e&&(t.state.emacsPrefix+=e):(t.state.emacsPrefix=e,t.on("keyHandled",E),t.on("inputRead",T))}var S={"Alt-G":!0,"Ctrl-X":!0,"Ctrl-Q":!0,"Ctrl-U":!0};function E(t,e){t.state.emacsPrefixMap||S.hasOwnProperty(e)||L(t)}function L(t){t.state.emacsPrefix=null,t.off("keyHandled",E),t.off("inputRead",T)}function T(t,e){var n=v(t);if(n>1&&"+input"==e.origin){for(var r=e.text.join("\n"),i="",o=1;o<n;++o)i+=r;t.replaceSelection(i)}}function A(t){t.state.emacsPrefixMap=!0,t.addKeyMap(j),t.on("keyHandled",k),t.on("inputRead",k)}function k(t,e){("string"!=typeof e||!/^\d$/.test(e)&&"Ctrl-U"!=e)&&(t.removeKeyMap(j),t.state.emacsPrefixMap=!1,t.off("keyHandled",k),t.off("inputRead",k))}function I(t){t.setCursor(t.getCursor()),t.setExtending(!t.getExtending()),t.on("change",(function(){t.setExtending(!1)}))}function M(t){t.setExtending(!1),t.setCursor(t.getCursor())}function N(t,e,n){t.openDialog?t.openDialog(e+': <input type="text" style="width: 10em"/>',n,{bottom:!0}):n(prompt(e,""))}function O(t,e){var n=t.getCursor(),r=t.findPosH(n,1,"word");t.replaceRange(e(t.getRange(n,r)),n,r),t.setCursor(r)}function P(t){for(var n=t.getCursor(),r=n.line,i=n.ch,o=[];r>=t.firstLine();){for(var s=t.getLine(r),a=null==i?s.length:i;a>0;)if(")"==(i=s.charAt(--a)))o.push("(");else if("]"==i)o.push("[");else if("}"==i)o.push("{");else if(/[\(\{\[]/.test(i)&&(!o.length||o.pop()!=i))return t.extendSelection(e(r,a));--r,i=null}}function R(t){t.execCommand("clearSearch"),M(t)}t.emacs={kill:u,killRegion:w,repeated:y};var F=t.keyMap.emacs=t.normalizeKeyMap({"Ctrl-W":function(t){u(t,t.getCursor("start"),t.getCursor("end"),!0)},"Ctrl-K":y((function(t){var n=t.getCursor(),r=t.clipPos(e(n.line)),i=t.getRange(n,r);/\S/.test(i)||(i+="\n",r=e(n.line+1,0)),u(t,n,r,"grow",i)})),"Alt-W":function(t){i(t.getSelection()),M(t)},"Ctrl-Y":function(t){var e=t.getCursor();t.replaceRange(s(v(t)),e,e,"paste"),t.setSelection(e,t.getCursor())},"Alt-Y":function(t){t.replaceSelection(a(),"around","paste")},"Ctrl-Space":I,"Ctrl-Shift-2":I,"Ctrl-F":x(l,1),"Ctrl-B":x(l,-1),Right:x(l,1),Left:x(l,-1),"Ctrl-D":function(t){C(t,l,1,!1)},Delete:function(t){w(t,!1)||C(t,l,1,!1)},"Ctrl-H":function(t){C(t,l,-1,!1)},Backspace:function(t){w(t,!1)||C(t,l,-1,!1)},"Alt-F":x(h,1),"Alt-B":x(h,-1),"Alt-Right":x(h,1),"Alt-Left":x(h,-1),"Alt-D":function(t){C(t,h,1,"grow")},"Alt-Backspace":function(t){C(t,h,-1,"grow")},"Ctrl-N":x(f,1),"Ctrl-P":x(f,-1),Down:x(f,1),Up:x(f,-1),"Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",End:"goLineEnd",Home:"goLineStart","Alt-V":x(p,-1),"Ctrl-V":x(p,1),PageUp:x(p,-1),PageDown:x(p,1),"Ctrl-Up":x(d,-1),"Ctrl-Down":x(d,1),"Alt-A":x(m,-1),"Alt-E":x(m,1),"Alt-K":function(t){C(t,m,1,"grow")},"Ctrl-Alt-K":function(t){C(t,g,1,"grow")},"Ctrl-Alt-Backspace":function(t){C(t,g,-1,"grow")},"Ctrl-Alt-F":x(g,1),"Ctrl-Alt-B":x(g,-1,"grow"),"Shift-Ctrl-Alt-2":function(t){var e=t.getCursor();t.setSelection(b(t,e,g,1),e)},"Ctrl-Alt-T":function(t){var e=g(t,t.getCursor(),-1),n=g(t,e,1),r=g(t,n,1),i=g(t,r,-1);t.replaceRange(t.getRange(i,r)+t.getRange(n,i)+t.getRange(e,n),e,r)},"Ctrl-Alt-U":y(P),"Alt-Space":function(t){for(var n=t.getCursor(),r=n.ch,i=n.ch,o=t.getLine(n.line);r&&/\s/.test(o.charAt(r-1));)--r;for(;i<o.length&&/\s/.test(o.charAt(i));)++i;t.replaceRange(" ",e(n.line,r),e(n.line,i))},"Ctrl-O":y((function(t){t.replaceSelection("\n","start")})),"Ctrl-T":y((function(t){t.execCommand("transposeChars")})),"Alt-C":y((function(t){O(t,(function(t){var e=t.search(/\w/);return-1==e?t:t.slice(0,e)+t.charAt(e).toUpperCase()+t.slice(e+1).toLowerCase()}))})),"Alt-U":y((function(t){O(t,(function(t){return t.toUpperCase()}))})),"Alt-L":y((function(t){O(t,(function(t){return t.toLowerCase()}))})),"Alt-;":"toggleComment","Ctrl-/":y("undo"),"Shift-Ctrl--":y("undo"),"Ctrl-Z":y("undo"),"Cmd-Z":y("undo"),"Shift-Ctrl-Z":"redo","Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findPersistentNext","Ctrl-R":"findPersistentPrev","Ctrl-G":R,"Shift-Alt-5":"replace","Alt-/":"autocomplete",Enter:"newlineAndIndent","Ctrl-J":y((function(t){t.replaceSelection("\n","end")})),Tab:"indentAuto","Alt-G G":function(t){var e=v(t,!0);if(null!=e&&e>0)return t.setCursor(e-1);N(t,"Goto line",(function(e){var n;e&&!isNaN(n=Number(e))&&n==(0|n)&&n>0&&t.setCursor(n-1)}))},"Ctrl-X Tab":function(t){t.indentSelection(v(t,!0)||t.getOption("indentUnit"))},"Ctrl-X Ctrl-X":function(t){t.setSelection(t.getCursor("head"),t.getCursor("anchor"))},"Ctrl-X Ctrl-S":"save","Ctrl-X Ctrl-W":"save","Ctrl-X S":"saveAll","Ctrl-X F":"open","Ctrl-X U":y("undo"),"Ctrl-X K":"close","Ctrl-X Delete":function(t){u(t,t.getCursor(),m(t,t.getCursor(),1),"grow")},"Ctrl-X H":"selectAll","Ctrl-Q Tab":y("insertTab"),"Ctrl-U":A,fallthrough:"default"}),j={"Ctrl-G":L};function D(t){j[t]=function(e){_(e,t)},F["Ctrl-"+t]=function(e){_(e,t)},S["Ctrl-"+t]=!0}for(var B=0;B<10;++B)D(String(B));D("-")}(n(4631))},23412:function(t,e,n){!function(t){"use strict";var e=t.commands,n=t.Pos;function r(e,r,i){if(i<0&&0==r.ch)return e.clipPos(n(r.line-1));var o=e.getLine(r.line);if(i>0&&r.ch>=o.length)return e.clipPos(n(r.line+1,0));for(var s,a="start",c=r.ch,u=c,l=i<0?0:o.length,h=0;u!=l;u+=i,h++){var f=o.charAt(i<0?u-1:u),p="_"!=f&&t.isWordChar(f)?"w":"o";if("w"==p&&f.toUpperCase()==f&&(p="W"),"start"==a)"o"!=p?(a="in",s=p):c=u+i;else if("in"==a&&s!=p){if("w"==s&&"W"==p&&i<0&&u--,"W"==s&&"w"==p&&i>0){if(u==c+1){s="w";continue}u--}break}}return n(r.line,u)}function i(t,e){t.extendSelectionsBy((function(n){return t.display.shift||t.doc.extend||n.empty()?r(t.doc,n.head,e):e<0?n.from():n.to()}))}function o(e,r){if(e.isReadOnly())return t.Pass;e.operation((function(){for(var t=e.listSelections().length,i=[],o=-1,s=0;s<t;s++){var a=e.listSelections()[s].head;if(!(a.line<=o)){var c=n(a.line+(r?0:1),0);e.replaceRange("\n",c,null,"+insertLine"),e.indentLine(c.line,null,!0),i.push({head:c,anchor:c}),o=a.line+1}}e.setSelections(i)})),e.execCommand("indentAuto")}function s(e,r){for(var i=r.ch,o=i,s=e.getLine(r.line);i&&t.isWordChar(s.charAt(i-1));)--i;for(;o<s.length&&t.isWordChar(s.charAt(o));)++o;return{from:n(r.line,i),to:n(r.line,o),word:s.slice(i,o)}}function a(t,e){for(var n=t.listSelections(),r=[],i=0;i<n.length;i++){var o=n[i],s=t.findPosV(o.anchor,e,"line",o.anchor.goalColumn),a=t.findPosV(o.head,e,"line",o.head.goalColumn);s.goalColumn=null!=o.anchor.goalColumn?o.anchor.goalColumn:t.cursorCoords(o.anchor,"div").left,a.goalColumn=null!=o.head.goalColumn?o.head.goalColumn:t.cursorCoords(o.head,"div").left;var c={anchor:s,head:a};r.push(o),r.push(c)}t.setSelections(r)}function c(e,n,r){for(var i=0;i<e.length;i++)if(0==t.cmpPos(e[i].from(),n)&&0==t.cmpPos(e[i].to(),r))return!0;return!1}e.goSubwordLeft=function(t){i(t,-1)},e.goSubwordRight=function(t){i(t,1)},e.scrollLineUp=function(t){var e=t.getScrollInfo();if(!t.somethingSelected()){var n=t.lineAtHeight(e.top+e.clientHeight,"local");t.getCursor().line>=n&&t.execCommand("goLineUp")}t.scrollTo(null,e.top-t.defaultTextHeight())},e.scrollLineDown=function(t){var e=t.getScrollInfo();if(!t.somethingSelected()){var n=t.lineAtHeight(e.top,"local")+1;t.getCursor().line<=n&&t.execCommand("goLineDown")}t.scrollTo(null,e.top+t.defaultTextHeight())},e.splitSelectionByLine=function(t){for(var e=t.listSelections(),r=[],i=0;i<e.length;i++)for(var o=e[i].from(),s=e[i].to(),a=o.line;a<=s.line;++a)s.line>o.line&&a==s.line&&0==s.ch||r.push({anchor:a==o.line?o:n(a,0),head:a==s.line?s:n(a)});t.setSelections(r,0)},e.singleSelectionTop=function(t){var e=t.listSelections()[0];t.setSelection(e.anchor,e.head,{scroll:!1})},e.selectLine=function(t){for(var e=t.listSelections(),r=[],i=0;i<e.length;i++){var o=e[i];r.push({anchor:n(o.from().line,0),head:n(o.to().line+1,0)})}t.setSelections(r)},e.insertLineAfter=function(t){return o(t,!1)},e.insertLineBefore=function(t){return o(t,!0)},e.selectNextOccurrence=function(e){var r=e.getCursor("from"),i=e.getCursor("to"),o=e.state.sublimeFindFullWord==e.doc.sel;if(0==t.cmpPos(r,i)){var a=s(e,r);if(!a.word)return;e.setSelection(a.from,a.to),o=!0}else{var u=e.getRange(r,i),l=o?new RegExp("\\b"+u+"\\b"):u,h=e.getSearchCursor(l,i),f=h.findNext();if(f||(f=(h=e.getSearchCursor(l,n(e.firstLine(),0))).findNext()),!f||c(e.listSelections(),h.from(),h.to()))return;e.addSelection(h.from(),h.to())}o&&(e.state.sublimeFindFullWord=e.doc.sel)},e.skipAndSelectNextOccurrence=function(n){var r=n.getCursor("anchor"),i=n.getCursor("head");e.selectNextOccurrence(n),0!=t.cmpPos(r,i)&&n.doc.setSelections(n.doc.listSelections().filter((function(t){return t.anchor!=r||t.head!=i})))},e.addCursorToPrevLine=function(t){a(t,-1)},e.addCursorToNextLine=function(t){a(t,1)};var u="(){}[]";function l(e){for(var r=e.listSelections(),i=[],o=0;o<r.length;o++){var s=r[o],a=s.head,c=e.scanForBracket(a,-1);if(!c)return!1;for(;;){var l=e.scanForBracket(a,1);if(!l)return!1;if(l.ch==u.charAt(u.indexOf(c.ch)+1)){var h=n(c.pos.line,c.pos.ch+1);if(0!=t.cmpPos(h,s.from())||0!=t.cmpPos(l.pos,s.to())){i.push({anchor:h,head:l.pos});break}if(!(c=e.scanForBracket(c.pos,-1)))return!1}a=n(l.pos.line,l.pos.ch+1)}}return e.setSelections(i),!0}function h(t){return t?/\bpunctuation\b/.test(t)?t:void 0:null}function f(e,r){if(e.isReadOnly())return t.Pass;for(var i,o=e.listSelections(),s=[],a=0;a<o.length;a++){var c=o[a];if(!c.empty()){for(var u=c.from().line,l=c.to().line;a<o.length-1&&o[a+1].from().line==l;)l=o[++a].to().line;o[a].to().ch||l--,s.push(u,l)}}s.length?i=!0:s.push(e.firstLine(),e.lastLine()),e.operation((function(){for(var t=[],o=0;o<s.length;o+=2){var a=s[o],c=s[o+1],u=n(a,0),l=n(c),h=e.getRange(u,l,!1);r?h.sort():h.sort((function(t,e){var n=t.toUpperCase(),r=e.toUpperCase();return n!=r&&(t=n,e=r),t<e?-1:t==e?0:1})),e.replaceRange(h,u,l),i&&t.push({anchor:u,head:n(c+1,0)})}i&&e.setSelections(t,0)}))}function p(e,n){e.operation((function(){for(var r=e.listSelections(),i=[],o=[],a=0;a<r.length;a++)(u=r[a]).empty()?(i.push(a),o.push("")):o.push(n(e.getRange(u.from(),u.to())));var c;for(e.replaceSelections(o,"around","case"),a=i.length-1;a>=0;a--){var u=r[i[a]];if(!(c&&t.cmpPos(u.head,c)>0)){var l=s(e,u.head);c=l.from,e.replaceRange(n(l.word),l.from,l.to)}}}))}function d(e){var n=e.getCursor("from"),r=e.getCursor("to");if(0==t.cmpPos(n,r)){var i=s(e,n);if(!i.word)return;n=i.from,r=i.to}return{from:n,to:r,query:e.getRange(n,r),word:i}}function m(t,e){var r=d(t);if(r){var i=r.query,o=t.getSearchCursor(i,e?r.to:r.from);(e?o.findNext():o.findPrevious())?t.setSelection(o.from(),o.to()):(o=t.getSearchCursor(i,e?n(t.firstLine(),0):t.clipPos(n(t.lastLine()))),(e?o.findNext():o.findPrevious())?t.setSelection(o.from(),o.to()):r.word&&t.setSelection(r.from,r.to))}}e.selectScope=function(t){l(t)||t.execCommand("selectAll")},e.selectBetweenBrackets=function(e){if(!l(e))return t.Pass},e.goToBracket=function(e){e.extendSelectionsBy((function(r){var i=e.scanForBracket(r.head,1,h(e.getTokenTypeAt(r.head)));if(i&&0!=t.cmpPos(i.pos,r.head))return i.pos;var o=e.scanForBracket(r.head,-1,h(e.getTokenTypeAt(n(r.head.line,r.head.ch+1))));return o&&n(o.pos.line,o.pos.ch+1)||r.head}))},e.swapLineUp=function(e){if(e.isReadOnly())return t.Pass;for(var r=e.listSelections(),i=[],o=e.firstLine()-1,s=[],a=0;a<r.length;a++){var c=r[a],u=c.from().line-1,l=c.to().line;s.push({anchor:n(c.anchor.line-1,c.anchor.ch),head:n(c.head.line-1,c.head.ch)}),0!=c.to().ch||c.empty()||--l,u>o?i.push(u,l):i.length&&(i[i.length-1]=l),o=l}e.operation((function(){for(var t=0;t<i.length;t+=2){var r=i[t],o=i[t+1],a=e.getLine(r);e.replaceRange("",n(r,0),n(r+1,0),"+swapLine"),o>e.lastLine()?e.replaceRange("\n"+a,n(e.lastLine()),null,"+swapLine"):e.replaceRange(a+"\n",n(o,0),null,"+swapLine")}e.setSelections(s),e.scrollIntoView()}))},e.swapLineDown=function(e){if(e.isReadOnly())return t.Pass;for(var r=e.listSelections(),i=[],o=e.lastLine()+1,s=r.length-1;s>=0;s--){var a=r[s],c=a.to().line+1,u=a.from().line;0!=a.to().ch||a.empty()||c--,c<o?i.push(c,u):i.length&&(i[i.length-1]=u),o=u}e.operation((function(){for(var t=i.length-2;t>=0;t-=2){var r=i[t],o=i[t+1],s=e.getLine(r);r==e.lastLine()?e.replaceRange("",n(r-1),n(r),"+swapLine"):e.replaceRange("",n(r,0),n(r+1,0),"+swapLine"),e.replaceRange(s+"\n",n(o,0),null,"+swapLine")}e.scrollIntoView()}))},e.toggleCommentIndented=function(t){t.toggleComment({indent:!0})},e.joinLines=function(t){for(var e=t.listSelections(),r=[],i=0;i<e.length;i++){for(var o=e[i],s=o.from(),a=s.line,c=o.to().line;i<e.length-1&&e[i+1].from().line==c;)c=e[++i].to().line;r.push({start:a,end:c,anchor:!o.empty()&&s})}t.operation((function(){for(var e=0,i=[],o=0;o<r.length;o++){for(var s,a=r[o],c=a.anchor&&n(a.anchor.line-e,a.anchor.ch),u=a.start;u<=a.end;u++){var l=u-e;u==a.end&&(s=n(l,t.getLine(l).length+1)),l<t.lastLine()&&(t.replaceRange(" ",n(l),n(l+1,/^\s*/.exec(t.getLine(l+1))[0].length)),++e)}i.push({anchor:c||s,head:s})}t.setSelections(i,0)}))},e.duplicateLine=function(t){t.operation((function(){for(var e=t.listSelections().length,r=0;r<e;r++){var i=t.listSelections()[r];i.empty()?t.replaceRange(t.getLine(i.head.line)+"\n",n(i.head.line,0)):t.replaceRange(t.getRange(i.from(),i.to()),i.from())}t.scrollIntoView()}))},e.sortLines=function(t){f(t,!0)},e.sortLinesInsensitive=function(t){f(t,!1)},e.nextBookmark=function(t){var e=t.state.sublimeBookmarks;if(e)for(;e.length;){var n=e.shift(),r=n.find();if(r)return e.push(n),t.setSelection(r.from,r.to)}},e.prevBookmark=function(t){var e=t.state.sublimeBookmarks;if(e)for(;e.length;){e.unshift(e.pop());var n=e[e.length-1].find();if(n)return t.setSelection(n.from,n.to);e.pop()}},e.toggleBookmark=function(t){for(var e=t.listSelections(),n=t.state.sublimeBookmarks||(t.state.sublimeBookmarks=[]),r=0;r<e.length;r++){for(var i=e[r].from(),o=e[r].to(),s=e[r].empty()?t.findMarksAt(i):t.findMarks(i,o),a=0;a<s.length;a++)if(s[a].sublimeBookmark){s[a].clear();for(var c=0;c<n.length;c++)n[c]==s[a]&&n.splice(c--,1);break}a==s.length&&n.push(t.markText(i,o,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},e.clearBookmarks=function(t){var e=t.state.sublimeBookmarks;if(e)for(var n=0;n<e.length;n++)e[n].clear();e.length=0},e.selectBookmarks=function(t){var e=t.state.sublimeBookmarks,n=[];if(e)for(var r=0;r<e.length;r++){var i=e[r].find();i?n.push({anchor:i.from,head:i.to}):e.splice(r--,0)}n.length&&t.setSelections(n,0)},e.smartBackspace=function(e){if(e.somethingSelected())return t.Pass;e.operation((function(){for(var r=e.listSelections(),i=e.getOption("indentUnit"),o=r.length-1;o>=0;o--){var s=r[o].head,a=e.getRange({line:s.line,ch:0},s),c=t.countColumn(a,null,e.getOption("tabSize")),u=e.findPosH(s,-1,"char",!1);if(a&&!/\S/.test(a)&&c%i==0){var l=new n(s.line,t.findColumn(a,c-i,i));l.ch!=s.ch&&(u=l)}e.replaceRange("",u,s,"+delete")}}))},e.delLineRight=function(t){t.operation((function(){for(var e=t.listSelections(),r=e.length-1;r>=0;r--)t.replaceRange("",e[r].anchor,n(e[r].to().line),"+delete");t.scrollIntoView()}))},e.upcaseAtCursor=function(t){p(t,(function(t){return t.toUpperCase()}))},e.downcaseAtCursor=function(t){p(t,(function(t){return t.toLowerCase()}))},e.setSublimeMark=function(t){t.state.sublimeMark&&t.state.sublimeMark.clear(),t.state.sublimeMark=t.setBookmark(t.getCursor())},e.selectToSublimeMark=function(t){var e=t.state.sublimeMark&&t.state.sublimeMark.find();e&&t.setSelection(t.getCursor(),e)},e.deleteToSublimeMark=function(e){var n=e.state.sublimeMark&&e.state.sublimeMark.find();if(n){var r=e.getCursor(),i=n;if(t.cmpPos(r,i)>0){var o=i;i=r,r=o}e.state.sublimeKilled=e.getRange(r,i),e.replaceRange("",r,i)}},e.swapWithSublimeMark=function(t){var e=t.state.sublimeMark&&t.state.sublimeMark.find();e&&(t.state.sublimeMark.clear(),t.state.sublimeMark=t.setBookmark(t.getCursor()),t.setCursor(e))},e.sublimeYank=function(t){null!=t.state.sublimeKilled&&t.replaceSelection(t.state.sublimeKilled,null,"paste")},e.showInCenter=function(t){var e=t.cursorCoords(null,"local");t.scrollTo(null,(e.top+e.bottom)/2-t.getScrollInfo().clientHeight/2)},e.findUnder=function(t){m(t,!0)},e.findUnderPrevious=function(t){m(t,!1)},e.findAllUnder=function(t){var e=d(t);if(e){for(var n=t.getSearchCursor(e.query),r=[],i=-1;n.findNext();)r.push({anchor:n.from(),head:n.to()}),n.from().line<=e.from.line&&n.from().ch<=e.from.ch&&i++;t.setSelections(r,i)}};var g=t.keyMap;g.macSublime={"Cmd-Left":"goLineStartSmart","Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-Left":"goSubwordLeft","Ctrl-Right":"goSubwordRight","Ctrl-Alt-Up":"scrollLineUp","Ctrl-Alt-Down":"scrollLineDown","Cmd-L":"selectLine","Shift-Cmd-L":"splitSelectionByLine",Esc:"singleSelectionTop","Cmd-Enter":"insertLineAfter","Shift-Cmd-Enter":"insertLineBefore","Cmd-D":"selectNextOccurrence","Shift-Cmd-Space":"selectScope","Shift-Cmd-M":"selectBetweenBrackets","Cmd-M":"goToBracket","Cmd-Ctrl-Up":"swapLineUp","Cmd-Ctrl-Down":"swapLineDown","Cmd-/":"toggleCommentIndented","Cmd-J":"joinLines","Shift-Cmd-D":"duplicateLine",F5:"sortLines","Cmd-F5":"sortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Cmd-F2":"toggleBookmark","Shift-Cmd-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Cmd-K Cmd-D":"skipAndSelectNextOccurrence","Cmd-K Cmd-K":"delLineRight","Cmd-K Cmd-U":"upcaseAtCursor","Cmd-K Cmd-L":"downcaseAtCursor","Cmd-K Cmd-Space":"setSublimeMark","Cmd-K Cmd-A":"selectToSublimeMark","Cmd-K Cmd-W":"deleteToSublimeMark","Cmd-K Cmd-X":"swapWithSublimeMark","Cmd-K Cmd-Y":"sublimeYank","Cmd-K Cmd-C":"showInCenter","Cmd-K Cmd-G":"clearBookmarks","Cmd-K Cmd-Backspace":"delLineLeft","Cmd-K Cmd-1":"foldAll","Cmd-K Cmd-0":"unfoldAll","Cmd-K Cmd-J":"unfoldAll","Ctrl-Shift-Up":"addCursorToPrevLine","Ctrl-Shift-Down":"addCursorToNextLine","Cmd-F3":"findUnder","Shift-Cmd-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Cmd-[":"fold","Shift-Cmd-]":"unfold","Cmd-I":"findIncremental","Shift-Cmd-I":"findIncrementalReverse","Cmd-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"macDefault"},t.normalizeKeyMap(g.macSublime),g.pcSublime={"Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-T":"transposeChars","Alt-Left":"goSubwordLeft","Alt-Right":"goSubwordRight","Ctrl-Up":"scrollLineUp","Ctrl-Down":"scrollLineDown","Ctrl-L":"selectLine","Shift-Ctrl-L":"splitSelectionByLine",Esc:"singleSelectionTop","Ctrl-Enter":"insertLineAfter","Shift-Ctrl-Enter":"insertLineBefore","Ctrl-D":"selectNextOccurrence","Shift-Ctrl-Space":"selectScope","Shift-Ctrl-M":"selectBetweenBrackets","Ctrl-M":"goToBracket","Shift-Ctrl-Up":"swapLineUp","Shift-Ctrl-Down":"swapLineDown","Ctrl-/":"toggleCommentIndented","Ctrl-J":"joinLines","Shift-Ctrl-D":"duplicateLine",F9:"sortLines","Ctrl-F9":"sortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Ctrl-F2":"toggleBookmark","Shift-Ctrl-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Ctrl-K Ctrl-D":"skipAndSelectNextOccurrence","Ctrl-K Ctrl-K":"delLineRight","Ctrl-K Ctrl-U":"upcaseAtCursor","Ctrl-K Ctrl-L":"downcaseAtCursor","Ctrl-K Ctrl-Space":"setSublimeMark","Ctrl-K Ctrl-A":"selectToSublimeMark","Ctrl-K Ctrl-W":"deleteToSublimeMark","Ctrl-K Ctrl-X":"swapWithSublimeMark","Ctrl-K Ctrl-Y":"sublimeYank","Ctrl-K Ctrl-C":"showInCenter","Ctrl-K Ctrl-G":"clearBookmarks","Ctrl-K Ctrl-Backspace":"delLineLeft","Ctrl-K Ctrl-1":"foldAll","Ctrl-K Ctrl-0":"unfoldAll","Ctrl-K Ctrl-J":"unfoldAll","Ctrl-Alt-Up":"addCursorToPrevLine","Ctrl-Alt-Down":"addCursorToNextLine","Ctrl-F3":"findUnder","Shift-Ctrl-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Ctrl-[":"fold","Shift-Ctrl-]":"unfold","Ctrl-I":"findIncremental","Shift-Ctrl-I":"findIncrementalReverse","Ctrl-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"pcDefault"},t.normalizeKeyMap(g.pcSublime);var v=g.default==g.macDefault;g.sublime=v?g.macSublime:g.pcSublime}(n(4631),n(32095),n(4328))},52539:function(t,e,n){!function(t){"use strict";t.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var e=0;e<t.modeInfo.length;e++){var n=t.modeInfo[e];n.mimes&&(n.mime=n.mimes[0])}t.findModeByMIME=function(e){e=e.toLowerCase();for(var n=0;n<t.modeInfo.length;n++){var r=t.modeInfo[n];if(r.mime==e)return r;if(r.mimes)for(var i=0;i<r.mimes.length;i++)if(r.mimes[i]==e)return r}return/\+xml$/.test(e)?t.findModeByMIME("application/xml"):/\+json$/.test(e)?t.findModeByMIME("application/json"):void 0},t.findModeByExtension=function(e){e=e.toLowerCase();for(var n=0;n<t.modeInfo.length;n++){var r=t.modeInfo[n];if(r.ext)for(var i=0;i<r.ext.length;i++)if(r.ext[i]==e)return r}},t.findModeByFileName=function(e){for(var n=0;n<t.modeInfo.length;n++){var r=t.modeInfo[n];if(r.file&&r.file.test(e))return r}var i=e.lastIndexOf("."),o=i>-1&&e.substring(i+1,e.length);if(o)return t.findModeByExtension(o)},t.findModeByName=function(e){e=e.toLowerCase();for(var n=0;n<t.modeInfo.length;n++){var r=t.modeInfo[n];if(r.name.toLowerCase()==e)return r;if(r.alias)for(var i=0;i<r.alias.length;i++)if(r.alias[i].toLowerCase()==e)return r}}}(n(4631))},735:function(t){"use strict";const e=(t,{target:e=document.body}={})=>{const n=document.createElement("textarea"),r=document.activeElement;n.value=t,n.setAttribute("readonly",""),n.style.contain="strict",n.style.position="absolute",n.style.left="-9999px",n.style.fontSize="12pt";const i=document.getSelection();let o=!1;i.rangeCount>0&&(o=i.getRangeAt(0)),e.append(n),n.select(),n.selectionStart=0,n.selectionEnd=t.length;let s=!1;try{s=document.execCommand("copy")}catch(a){}return n.remove(),o&&(i.removeAllRanges(),i.addRange(o)),r&&r.focus(),s};t.exports=e,t.exports.default=e},2707:function(t,e,n){"use strict";var r=n(82109),i=n(13099),o=n(47908),s=n(47293),a=n(9341),c=[],u=c.sort,l=s((function(){c.sort(void 0)})),h=s((function(){c.sort(null)})),f=a("sort");r({target:"Array",proto:!0,forced:l||!h||!f},{sort:function(t){return void 0===t?u.call(o(this)):u.call(o(this),i(t))}})},8726:function(t,e,n){var r,i,o,s;o=function(){var t;return(t=t||{}).utils={},t.utils.makeEventEmitter=function(t,e){t.prototype.allowedEvents_=e,t.prototype.on=function(t,e,n){this.validateEventType_(t),this.eventListeners_=this.eventListeners_||{},this.eventListeners_[t]=this.eventListeners_[t]||[],this.eventListeners_[t].push({callback:e,context:n})},t.prototype.off=function(t,e){this.validateEventType_(t),this.eventListeners_=this.eventListeners_||{};for(var n=this.eventListeners_[t]||[],r=0;r<n.length;r++)if(n[r].callback===e)return void n.splice(r,1)},t.prototype.trigger=function(t){this.eventListeners_=this.eventListeners_||{};for(var e=this.eventListeners_[t]||[],n=0;n<e.length;n++)e[n].callback.apply(e[n].context,Array.prototype.slice.call(arguments,1))},t.prototype.validateEventType_=function(t){if(this.allowedEvents_){for(var e=!1,n=0;n<this.allowedEvents_.length;n++)if(this.allowedEvents_[n]===t){e=!0;break}if(!e)throw new Error('Unknown event "'+t+'"')}}},t.utils.elt=function(e,n,r){var i=document.createElement(e);if("string"==typeof n)t.utils.setTextContent(i,n);else if(n)for(var o=0;o<n.length;++o)i.appendChild(n[o]);for(var s in r||{})i.setAttribute(s,r[s]);return i},t.utils.setTextContent=function(t,e){t.innerHTML="",t.appendChild(document.createTextNode(e))},t.utils.on=function(t,e,n,r){t.addEventListener?t.addEventListener(e,n,r||!1):t.attachEvent&&t.attachEvent("on"+e,n)},t.utils.off=function(t,e,n,r){t.removeEventListener?t.removeEventListener(e,n,r||!1):t.detachEvent&&t.detachEvent("on"+e,n)},t.utils.preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},t.utils.stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},t.utils.stopEvent=function(e){t.utils.preventDefault(e),t.utils.stopPropagation(e)},t.utils.stopEventAnd=function(e){return function(n){return e(n),t.utils.stopEvent(n),!1}},t.utils.trim=function(t){return t.replace(/^\s+/g,"").replace(/\s+$/g,"")},t.utils.stringEndsWith=function(t,e){for(var n="string"==typeof e?[e]:e,r=0;r<n.length;r++)if(e=n[r],-1!==t.indexOf(e,t.length-e.length))return!0;return!1},t.utils.assert=function(t,e){if(!t)throw new Error(e||"assertion error")},t.utils.log=function(){if("undefined"!=typeof console&&void 0!==console.log){for(var t=["Firepad:"],e=0;e<arguments.length;e++)t.push(arguments[e]);console.log.apply(console,t)}},(t=t||{}).Span=function(){function t(t,e){this.pos=t,this.length=e}return t.prototype.end=function(){return this.pos+this.length},t}(),(t=t||{}).TextOp=function(){var e=t.utils;function n(t){this.type=t,this.chars=null,this.text=null,this.attributes=null,"insert"===t?(this.text=arguments[1],e.assert("string"==typeof this.text),this.attributes=arguments[2]||{},e.assert("object"==typeof this.attributes)):"delete"===t?(this.chars=arguments[1],e.assert("number"==typeof this.chars)):"retain"===t&&(this.chars=arguments[1],e.assert("number"==typeof this.chars),this.attributes=arguments[2]||{},e.assert("object"==typeof this.attributes))}return n.prototype.isInsert=function(){return"insert"===this.type},n.prototype.isDelete=function(){return"delete"===this.type},n.prototype.isRetain=function(){return"retain"===this.type},n.prototype.equals=function(t){return this.type===t.type&&this.text===t.text&&this.chars===t.chars&&this.attributesEqual(t.attributes)},n.prototype.attributesEqual=function(t){for(var e in this.attributes)if(this.attributes[e]!==t[e])return!1;for(e in t)if(this.attributes[e]!==t[e])return!1;return!0},n.prototype.hasEmptyAttributes=function(){var t=!0;for(var e in this.attributes){t=!1;break}return t},n}(),(t=t||{}).TextOperation=function(){"use strict";var e=t.TextOp,n=t.utils;function r(){if(!this||this.constructor!==r)return new r;this.ops=[],this.baseLength=0,this.targetLength=0}function i(t){var e=t.ops;switch(e.length){case 1:return e[0];case 2:return e[0].isRetain()?e[1]:e[1].isRetain()?e[0]:null;case 3:if(e[0].isRetain()&&e[2].isRetain())return e[1]}return null}function o(t){return t.ops[0].isRetain()?t.ops[0].chars:0}return r.prototype.equals=function(t){if(this.baseLength!==t.baseLength)return!1;if(this.targetLength!==t.targetLength)return!1;if(this.ops.length!==t.ops.length)return!1;for(var e=0;e<this.ops.length;e++)if(!this.ops[e].equals(t.ops[e]))return!1;return!0},r.prototype.retain=function(t,n){if("number"!=typeof t||t<0)throw new Error("retain expects a positive integer.");if(0===t)return this;this.baseLength+=t,this.targetLength+=t,n=n||{};var r=this.ops.length>0?this.ops[this.ops.length-1]:null;return r&&r.isRetain()&&r.attributesEqual(n)?r.chars+=t:this.ops.push(new e("retain",t,n)),this},r.prototype.insert=function(t,n){if("string"!=typeof t)throw new Error("insert expects a string");if(""===t)return this;n=n||{},this.targetLength+=t.length;var r=this.ops.length>0?this.ops[this.ops.length-1]:null,i=this.ops.length>1?this.ops[this.ops.length-2]:null;return r&&r.isInsert()&&r.attributesEqual(n)?r.text+=t:r&&r.isDelete()?i&&i.isInsert()&&i.attributesEqual(n)?i.text+=t:(this.ops[this.ops.length-1]=new e("insert",t,n),this.ops.push(r)):this.ops.push(new e("insert",t,n)),this},r.prototype.delete=function(t){if("string"==typeof t&&(t=t.length),"number"!=typeof t||t<0)throw new Error("delete expects a positive integer or a string");if(0===t)return this;this.baseLength+=t;var n=this.ops.length>0?this.ops[this.ops.length-1]:null;return n&&n.isDelete()?n.chars+=t:this.ops.push(new e("delete",t)),this},r.prototype.isNoop=function(){return 0===this.ops.length||1===this.ops.length&&this.ops[0].isRetain()&&this.ops[0].hasEmptyAttributes()},r.prototype.clone=function(){for(var t=new r,e=0;e<this.ops.length;e++)this.ops[e].isRetain()?t.retain(this.ops[e].chars,this.ops[e].attributes):this.ops[e].isInsert()?t.insert(this.ops[e].text,this.ops[e].attributes):t.delete(this.ops[e].chars);return t},r.prototype.toString=function(){return(Array.prototype.map||function(t){for(var e=[],n=0,r=this.length;n<r;n++)e[n]=t(this[n]);return e}).call(this.ops,(function(t){return t.isRetain()?"retain "+t.chars:t.isInsert()?"insert '"+t.text+"'":"delete "+t.chars})).join(", ")},r.prototype.toJSON=function(){for(var t=[],e=0;e<this.ops.length;e++)this.ops[e].hasEmptyAttributes()||t.push(this.ops[e].attributes),"retain"===this.ops[e].type?t.push(this.ops[e].chars):"insert"===this.ops[e].type?t.push(this.ops[e].text):"delete"===this.ops[e].type&&t.push(-this.ops[e].chars);return 0===t.length&&t.push(0),t},r.fromJSON=function(t){for(var e=new r,i=0,o=t.length;i<o;i++){var s=t[i],a={};"object"==typeof s&&(a=s,s=t[++i]),"number"==typeof s?s>0?e.retain(s,a):e.delete(-s):(n.assert("string"==typeof s),e.insert(s,a))}return e},r.prototype.apply=function(t,e,r){if(e=e||[],r=r||[],t.length!==this.baseLength)throw new Error("The operation's base length must be equal to the string's length.");for(var i,o,s=[],a=0,c=0,u=this.ops,l=0,h=u.length;l<h;l++){var f=u[l];if(f.isRetain()){if(c+f.chars>t.length)throw new Error("Operation can't retain more characters than are left in the string.");for(s[a++]=t.slice(c,c+f.chars),i=0;i<f.chars;i++){var p=e[c+i]||{},d={};for(o in p)d[o]=p[o],n.assert(!1!==d[o]);for(o in f.attributes)!1===f.attributes[o]?delete d[o]:d[o]=f.attributes[o],n.assert(!1!==d[o]);r.push(d)}c+=f.chars}else if(f.isInsert())for(s[a++]=f.text,i=0;i<f.text.length;i++){var m={};for(o in f.attributes)m[o]=f.attributes[o],n.assert(!1!==m[o]);r.push(m)}else c+=f.chars}if(c!==t.length)throw new Error("The operation didn't operate on the whole string.");var g=s.join("");return n.assert(g.length===r.length),g},r.prototype.invert=function(t){for(var e=0,n=new r,i=this.ops,o=0,s=i.length;o<s;o++){var a=i[o];a.isRetain()?(n.retain(a.chars),e+=a.chars):a.isInsert()?n.delete(a.text.length):(n.insert(t.slice(e,e+a.chars)),e+=a.chars)}return n},r.prototype.compose=function(t){if(this.targetLength!==t.baseLength)throw new Error("The base length of the second operation has to be the target length of the first operation");function e(t,e,n){var r,i={};for(r in t)i[r]=t[r];for(r in e)n&&!1===e[r]?delete i[r]:i[r]=e[r];return i}for(var n,i=new r,o=this.clone().ops,s=t.clone().ops,a=0,c=0,u=o[a++],l=s[c++];void 0!==u||void 0!==l;)if(u&&u.isDelete())i.delete(u.chars),u=o[a++];else if(l&&l.isInsert())i.insert(l.text,l.attributes),l=s[c++];else{if(void 0===u)throw new Error("Cannot compose operations: first operation is too short.");if(void 0===l)throw new Error("Cannot compose operations: first operation is too long.");if(u.isRetain()&&l.isRetain())n=e(u.attributes,l.attributes),u.chars>l.chars?(i.retain(l.chars,n),u.chars-=l.chars,l=s[c++]):u.chars===l.chars?(i.retain(u.chars,n),u=o[a++],l=s[c++]):(i.retain(u.chars,n),l.chars-=u.chars,u=o[a++]);else if(u.isInsert()&&l.isDelete())u.text.length>l.chars?(u.text=u.text.slice(l.chars),l=s[c++]):u.text.length===l.chars?(u=o[a++],l=s[c++]):(l.chars-=u.text.length,u=o[a++]);else if(u.isInsert()&&l.isRetain())n=e(u.attributes,l.attributes,!0),u.text.length>l.chars?(i.insert(u.text.slice(0,l.chars),n),u.text=u.text.slice(l.chars),l=s[c++]):u.text.length===l.chars?(i.insert(u.text,n),u=o[a++],l=s[c++]):(i.insert(u.text,n),l.chars-=u.text.length,u=o[a++]);else{if(!u.isRetain()||!l.isDelete())throw new Error("This shouldn't happen: op1: "+JSON.stringify(u)+", op2: "+JSON.stringify(l));u.chars>l.chars?(i.delete(l.chars),u.chars-=l.chars,l=s[c++]):u.chars===l.chars?(i.delete(l.chars),u=o[a++],l=s[c++]):(i.delete(u.chars),l.chars-=u.chars,u=o[a++])}}return i},r.prototype.shouldBeComposedWith=function(t){if(this.isNoop()||t.isNoop())return!0;var e=o(this),n=o(t),r=i(this),s=i(t);return!(!r||!s)&&(r.isInsert()&&s.isInsert()?e+r.text.length===n:!(!r.isDelete()||!s.isDelete())&&(n+s.chars===e||e===n))},r.prototype.shouldBeComposedWithInverted=function(t){if(this.isNoop()||t.isNoop())return!0;var e=o(this),n=o(t),r=i(this),s=i(t);return!(!r||!s)&&(r.isInsert()&&s.isInsert()?e+r.text.length===n||e===n:!(!r.isDelete()||!s.isDelete())&&n+s.chars===e)},r.transformAttributes=function(t,e){var r,i={},o={},s={};for(r in t)s[r]=!0;for(r in e)s[r]=!0;for(r in s){var a=t[r],c=e[r];n.assert(null!=a||null!=c),null==a?o[r]=c:null==c?i[r]=a:a===c||(i[r]=a)}return[i,o]},r.transform=function(t,e){if(t.baseLength!==e.baseLength)throw new Error("Both operations have to have the same base length");for(var n=new r,i=new r,o=t.clone().ops,s=e.clone().ops,a=0,c=0,u=o[a++],l=s[c++];void 0!==u||void 0!==l;)if(u&&u.isInsert())n.insert(u.text,u.attributes),i.retain(u.text.length),u=o[a++];else if(l&&l.isInsert())n.retain(l.text.length),i.insert(l.text,l.attributes),l=s[c++];else{if(void 0===u)throw new Error("Cannot transform operations: first operation is too short.");if(void 0===l)throw new Error("Cannot transform operations: first operation is too long.");var h;if(u.isRetain()&&l.isRetain()){var f=r.transformAttributes(u.attributes,l.attributes);u.chars>l.chars?(h=l.chars,u.chars-=l.chars,l=s[c++]):u.chars===l.chars?(h=l.chars,u=o[a++],l=s[c++]):(h=u.chars,l.chars-=u.chars,u=o[a++]),n.retain(h,f[0]),i.retain(h,f[1])}else if(u.isDelete()&&l.isDelete())u.chars>l.chars?(u.chars-=l.chars,l=s[c++]):u.chars===l.chars?(u=o[a++],l=s[c++]):(l.chars-=u.chars,u=o[a++]);else if(u.isDelete()&&l.isRetain())u.chars>l.chars?(h=l.chars,u.chars-=l.chars,l=s[c++]):u.chars===l.chars?(h=l.chars,u=o[a++],l=s[c++]):(h=u.chars,l.chars-=u.chars,u=o[a++]),n.delete(h);else{if(!u.isRetain()||!l.isDelete())throw new Error("The two operations aren't compatible");u.chars>l.chars?(h=l.chars,u.chars-=l.chars,l=s[c++]):u.chars===l.chars?(h=u.chars,u=o[a++],l=s[c++]):(h=u.chars,l.chars-=u.chars,u=o[a++]),i.delete(h)}}return[n,i]},r.prototype.transform=function(t){return r.transform(this,t)},r}(),(t=t||{}).AnnotationList=function(){var e=t.Span;function n(t,e){if(!t)throw new Error("AnnotationList assertion failed"+(e?": "+e:""))}function r(t,e){this.pos=t,this.length=e.length,this.annotation=e.annotation,this.attachedObject_=e.attachedObject}function i(t,e){this.pos=t,this.length=e.length,this.annotation=e.annotation,this.node_=e}r.prototype.getAttachedObject=function(){return this.attachedObject_},i.prototype.attachObject=function(t){this.node_.attachedObject=t};var o={equals:function(){return!1}};function s(t){this.head_=new a(0,o),this.changeHandler_=t}function a(t,e){this.length=t,this.annotation=e,this.attachedObject=null,this.next=null}return s.prototype.insertAnnotatedSpan=function(t,r){this.wrapOperation_(new e(t.pos,0),(function(e,i){n(!i||null===i.next);var s=new a(t.length,r);if(i){n(t.pos>e&&t.pos<e+i.length);var c=new a(0,o);return c.next=new a(t.pos-e,i.annotation),c.next.next=s,s.next=new a(e+i.length-t.pos,i.annotation),c.next}return s}))},s.prototype.removeSpan=function(t){0!==t.length&&this.wrapOperation_(t,(function(e,r){n(null!==r);var i=new a(0,o),s=i;for(t.pos>e&&(s.next=new a(t.pos-e,r.annotation),s=s.next);t.end()>e+r.length;)e+=r.length,r=r.next;var c=e+r.length-t.end();return c>0&&(s.next=new a(c,r.annotation)),i.next}))},s.prototype.updateSpan=function(t,e){0!==t.length&&this.wrapOperation_(t,(function(r,i){n(null!==i);var s=new a(0,o),c=s,u=r,l=t.pos-u;for(n(l<i.length),l>0&&(c.next=new a(l,i.annotation),u+=(c=c.next).length);null!==i&&t.end()>=r+i.length;){var h=r+i.length-u;c.next=new a(h,e(i.annotation,h)),c=c.next,r+=i.length,i=i.next,u=r}var f=t.end()-u;return f>0&&(n(f<i.length),c.next=new a(f,e(i.annotation,f)),u+=(c=c.next).length,c.next=new a(r+i.length-u,i.annotation)),s.next}))},s.prototype.wrapOperation_=function(t,e){if(t.pos<0)throw new Error("Span start cannot be negative.");var n,o=[],s=[],c=this.getAffectedNodes_(t);null!==c.start?(n=c.end.next,c.end.next=null):n=c.succ;var u=e(c.startPos,c.start),l=!1,h=!1;if(u){var f;for(this.mergeNodesWithSameAnnotations_(u),c.pred&&c.pred.annotation.equals(u.annotation)?(l=!0,u.length+=c.pred.length,c.beforePred.next=u,f=c.predPos):(c.beforeStart.next=u,f=c.startPos);u.next;)s.push(new i(f,u)),f+=u.length,u=u.next;c.succ&&c.succ.annotation.equals(u.annotation)?(u.length+=c.succ.length,h=!0,u.next=c.succ.next):u.next=n,s.push(new i(f,u))}else c.pred&&c.succ&&c.pred.annotation.equals(c.succ.annotation)?(l=!0,h=!0,u=new a(c.pred.length+c.succ.length,c.pred.annotation),c.beforePred.next=u,u.next=c.succ.next,s.push(new i(c.startPos-c.pred.length,u))):c.beforeStart.next=n;l&&o.push(new r(c.predPos,c.pred));for(var p=c.startPos,d=c.start;null!==d;)o.push(new r(p,d)),p+=d.length,d=d.next;h&&o.push(new r(p,c.succ)),this.changeHandler_(o,s)},s.prototype.getAffectedNodes_=function(t){for(var e={},n=null,r=this.head_,i=r.next,o=0;null!==i&&t.pos>=o+i.length;)o+=i.length,n=r,r=i,i=i.next;if(null===i&&(0!==t.length||t.pos!==o))throw new Error("Span start exceeds the bounds of the AnnotationList.");for(e.startPos=o,0===t.length&&t.pos===o?e.start=null:e.start=i,e.beforeStart=r,o===t.pos&&o>0?(e.pred=r,e.predPos=o-r.length,e.beforePred=n):e.pred=null;null!==i&&t.end()>o;)o+=i.length,r=i,i=i.next;if(t.end()>o)throw new Error("Span end exceeds the bounds of the AnnotationList.");return 0===t.length&&t.end()===o?e.end=null:e.end=r,e.succ=o===t.end()?i:null,e},s.prototype.mergeNodesWithSameAnnotations_=function(t){if(t)for(var e=null,n=t;n;)e&&e.annotation.equals(n.annotation)?(e.length+=n.length,e.next=n.next):e=n,n=n.next},s.prototype.forEach=function(t){for(var e=this.head_.next;null!==e;)t(e.length,e.annotation,e.attachedObject),e=e.next},s.prototype.getAnnotatedSpansForPos=function(t){for(var e=0,n=this.head_.next,i=null;null!==n&&e+n.length<=t;)e+=n.length,i=n,n=n.next;if(null===n&&e!==t)throw new Error("pos exceeds the bounds of the AnnotationList");var o=[];return e===t&&i&&o.push(new r(e-i.length,i)),n&&o.push(new r(e,n)),o},s.prototype.getAnnotatedSpansForSpan=function(t){if(0===t.length)return[];for(var n=[],r=this.getAffectedNodes_(t),i=r.startPos,o=r.start;null!==o&&i<t.end();){var s=Math.max(i,t.pos),a=Math.min(i+o.length,t.end()),c=new e(s,a-s);c.annotation=o.annotation,n.push(c),i+=o.length,o=o.next}return n},s.prototype.count=function(){for(var t=0,e=this.head_.next,r=null;null!==e;)r&&n(!r.annotation.equals(e.annotation)),r=e,e=e.next,t++;return t},a.prototype.clone=function(){var t=new a(this.spanLength,this.annotation);return t.next=this.next,t},s}(),(t=t||{}).Cursor=function(){"use strict";function t(t,e){this.position=t,this.selectionEnd=e}return t.fromJSON=function(e){return new t(e.position,e.selectionEnd)},t.prototype.equals=function(t){return this.position===t.position&&this.selectionEnd===t.selectionEnd},t.prototype.compose=function(t){return t},t.prototype.transform=function(e){function n(t){for(var n=t,r=e.ops,i=0,o=e.ops.length;i<o&&(r[i].isRetain()?t-=r[i].chars:r[i].isInsert()?n+=r[i].text.length:(n-=Math.min(t,r[i].chars),t-=r[i].chars),!(t<0));i++);return n}var r=n(this.position);return this.position===this.selectionEnd?new t(r,r):new t(r,n(this.selectionEnd))},t}(),(t=t||{}).WrappedOperation=function(t){"use strict";function e(t,e){this.wrapped=t,this.meta=e}function n(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function r(t,e){return t&&"object"==typeof t&&"function"==typeof t.transform?t.transform(e):t}return e.prototype.apply=function(){return this.wrapped.apply.apply(this.wrapped,arguments)},e.prototype.invert=function(){var t=this.meta;return new e(this.wrapped.invert.apply(this.wrapped,arguments),t&&"object"==typeof t&&"function"==typeof t.invert?t.invert.apply(t,arguments):t)},e.prototype.compose=function(t){return new e(this.wrapped.compose(t.wrapped),function(t,e){if(t&&"object"==typeof t){if("function"==typeof t.compose)return t.compose(e);var r={};return n(t,r),n(e,r),r}return e}(this.meta,t.meta))},e.transform=function(t,n){var i=t.wrapped.transform(n.wrapped);return[new e(i[0],r(t.meta,n.wrapped)),new e(i[1],r(n.meta,t.wrapped))]},e.prototype.transform=function(t){return e.transform(this,t)},e}(),(t=t||{}).UndoManager=function(){"use strict";var t="normal";function e(e){this.maxItems=e||50,this.state=t,this.dontCompose=!1,this.undoStack=[],this.redoStack=[]}function n(t,e){for(var n=[],r=e.constructor,i=t.length-1;i>=0;i--){var o=r.transform(t[i],e);"function"==typeof o[0].isNoop&&o[0].isNoop()||n.push(o[0]),e=o[1]}return n.reverse()}return e.prototype.add=function(t,e){if("undoing"===this.state)this.redoStack.push(t),this.dontCompose=!0;else if("redoing"===this.state)this.undoStack.push(t),this.dontCompose=!0;else{var n=this.undoStack;!this.dontCompose&&e&&n.length>0?n.push(t.compose(n.pop())):(n.push(t),n.length>this.maxItems&&n.shift()),this.dontCompose=!1,this.redoStack=[]}},e.prototype.transform=function(t){this.undoStack=n(this.undoStack,t),this.redoStack=n(this.redoStack,t)},e.prototype.performUndo=function(e){if(this.state="undoing",0===this.undoStack.length)throw new Error("undo not possible");e(this.undoStack.pop()),this.state=t},e.prototype.performRedo=function(e){if(this.state="redoing",0===this.redoStack.length)throw new Error("redo not possible");e(this.redoStack.pop()),this.state=t},e.prototype.canUndo=function(){return 0!==this.undoStack.length},e.prototype.canRedo=function(){return 0!==this.redoStack.length},e.prototype.isUndoing=function(){return"undoing"===this.state},e.prototype.isRedoing=function(){return"redoing"===this.state},e}(),(t=t||{}).Client=function(){"use strict";function t(){this.state=n}function e(){}t.prototype.setState=function(t){this.state=t},t.prototype.applyClient=function(t){this.setState(this.state.applyClient(this,t))},t.prototype.applyServer=function(t){this.setState(this.state.applyServer(this,t))},t.prototype.serverAck=function(){this.setState(this.state.serverAck(this))},t.prototype.serverRetry=function(){this.setState(this.state.serverRetry(this))},t.prototype.sendOperation=function(t){throw new Error("sendOperation must be defined in child class")},t.prototype.applyOperation=function(t){throw new Error("applyOperation must be defined in child class")},t.Synchronized=e,e.prototype.applyClient=function(t,e){return t.sendOperation(e),new r(e)},e.prototype.applyServer=function(t,e){return t.applyOperation(e),this},e.prototype.serverAck=function(t){throw new Error("There is no pending operation.")},e.prototype.serverRetry=function(t){throw new Error("There is no pending operation.")};var n=new e;function r(t){this.outstanding=t}function i(t,e){this.outstanding=t,this.buffer=e}return t.AwaitingConfirm=r,r.prototype.applyClient=function(t,e){return new i(this.outstanding,e)},r.prototype.applyServer=function(t,e){var n=this.outstanding.transform(e);return t.applyOperation(n[1]),new r(n[0])},r.prototype.serverAck=function(t){return n},r.prototype.serverRetry=function(t){return t.sendOperation(this.outstanding),this},t.AwaitingWithBuffer=i,i.prototype.applyClient=function(t,e){var n=this.buffer.compose(e);return new i(this.outstanding,n)},i.prototype.applyServer=function(t,e){var n=this.outstanding.transform(e),r=this.buffer.transform(n[1]);return t.applyOperation(r[1]),new i(n[0],r[0])},i.prototype.serverRetry=function(t){var e=this.outstanding.compose(this.buffer);return t.sendOperation(e),new r(e)},i.prototype.serverAck=function(t){return t.sendOperation(this.buffer),new r(this.buffer)},t}(),(t=t||{}).EditorClient=function(){"use strict";var e=t.Client,n=t.Cursor,r=t.UndoManager,i=t.WrappedOperation;function o(t,e){this.cursorBefore=t,this.cursorAfter=e}function s(t,e){this.id=t,this.editorAdapter=e}function a(t,i){e.call(this),this.serverAdapter=t,this.editorAdapter=i,this.undoManager=new r,this.clients={};var o=this;this.editorAdapter.registerCallbacks({change:function(t,e){o.onChange(t,e)},cursorActivity:function(){o.onCursorActivity()},blur:function(){o.onBlur()},focus:function(){o.onFocus()}}),this.editorAdapter.registerUndo((function(){o.undo()})),this.editorAdapter.registerRedo((function(){o.redo()})),this.serverAdapter.registerCallbacks({ack:function(){o.serverAck(),o.focused&&o.state instanceof e.Synchronized&&(o.updateCursor(),o.sendCursor(o.cursor)),o.emitStatus()},retry:function(){o.serverRetry()},operation:function(t){o.applyServer(t)},cursor:function(t,r,i){if(o.serverAdapter.userId_!==t&&o.state instanceof e.Synchronized){var s=o.getClientObject(t);r?(i&&s.setColor(i),s.updateCursor(n.fromJSON(r))):s.removeCursor()}}})}return o.prototype.invert=function(){return new o(this.cursorAfter,this.cursorBefore)},o.prototype.compose=function(t){return new o(this.cursorBefore,t.cursorAfter)},o.prototype.transform=function(t){return new o(this.cursorBefore?this.cursorBefore.transform(t):null,this.cursorAfter?this.cursorAfter.transform(t):null)},s.prototype.setColor=function(t){this.color=t},s.prototype.updateCursor=function(t){this.removeCursor(),this.cursor=t,this.mark=this.editorAdapter.setOtherCursor(t,this.color,this.id)},s.prototype.removeCursor=function(){this.mark&&this.mark.clear()},function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}(a,e),a.prototype.getClientObject=function(t){return this.clients[t]||(this.clients[t]=new s(t,this.editorAdapter))},a.prototype.applyUnredo=function(t){this.undoManager.add(this.editorAdapter.invertOperation(t)),this.editorAdapter.applyOperation(t.wrapped),this.cursor=t.meta.cursorAfter,this.cursor&&this.editorAdapter.setCursor(this.cursor),this.applyClient(t.wrapped)},a.prototype.undo=function(){var t=this;this.undoManager.canUndo()&&this.undoManager.performUndo((function(e){t.applyUnredo(e)}))},a.prototype.redo=function(){var t=this;this.undoManager.canRedo()&&this.undoManager.performRedo((function(e){t.applyUnredo(e)}))},a.prototype.onChange=function(t,e){var n=this.cursor;this.updateCursor();var r,s=this.undoManager.undoStack.length>0&&e.shouldBeComposedWithInverted((r=this.undoManager.undoStack,r[r.length-1]).wrapped),a=new o(this.cursor,n);this.undoManager.add(new i(e,a),s),this.applyClient(t)},a.prototype.updateCursor=function(){this.cursor=this.editorAdapter.getCursor()},a.prototype.onCursorActivity=function(){var t=this.cursor;this.updateCursor(),!this.focused||t&&this.cursor.equals(t)||this.sendCursor(this.cursor)},a.prototype.onBlur=function(){this.cursor=null,this.sendCursor(null),this.focused=!1},a.prototype.onFocus=function(){this.focused=!0,this.onCursorActivity()},a.prototype.sendCursor=function(t){this.state instanceof e.AwaitingWithBuffer||this.serverAdapter.sendCursor(t)},a.prototype.sendOperation=function(t){this.serverAdapter.sendOperation(t),this.emitStatus()},a.prototype.applyOperation=function(t){this.editorAdapter.applyOperation(t),this.updateCursor(),this.undoManager.transform(new i(t,null))},a.prototype.emitStatus=function(){var t=this;setTimeout((function(){t.trigger("synced",t.state instanceof e.Synchronized)}),0)},a}(),t.utils.makeEventEmitter(t.EditorClient,["synced"]),(t=t||{}).AttributeConstants={BOLD:"b",ITALIC:"i",UNDERLINE:"u",STRIKE:"s",FONT:"f",FONT_SIZE:"fs",COLOR:"c",BACKGROUND_COLOR:"bc",ENTITY_SENTINEL:"ent",LINE_SENTINEL:"l",LINE_INDENT:"li",LINE_ALIGN:"la",LIST_TYPE:"lt"},t.sentinelConstants={LINE_SENTINEL_CHARACTER:"\ue000",ENTITY_SENTINEL_CHARACTER:"\ue001"},(t=t||{}).EntityManager=function(){var e=t.utils;function n(){this.entities_={};var t=["src","alt","width","height","style","class"];this.register("img",{render:function(t){e.assert(t.src,"image entity should have 'src'!");for(var n=["src","alt","width","height","style","class"],r="<img ",i=0;i<n.length;i++){var o=n[i];o in t&&(r+=" "+o+'="'+t[o]+'"')}return r+">"},fromElement:function(e){for(var n={},r=0;r<t.length;r++){var i=t[r];e.hasAttribute(i)&&(n[i]=e.getAttribute(i))}return n}})}return n.prototype.register=function(e,n){t.utils.assert(n.render,"Entity options should include a 'render' function!"),t.utils.assert(n.fromElement,"Entity options should include a 'fromElement' function!"),this.entities_[e]=n},n.prototype.renderToElement=function(t,e){return this.tryRenderToElement_(t,"render",e)},n.prototype.exportToElement=function(t){var e=this.tryRenderToElement_(t,"export")||this.tryRenderToElement_(t,"getHtml")||this.tryRenderToElement_(t,"render");return e.setAttribute("data-firepad-entity",t.type),e},n.prototype.updateElement=function(t,e){var n=t.type,r=t.info;this.entities_[n]&&void 0!==this.entities_[n].update&&this.entities_[n].update(r,e)},n.prototype.fromElement=function(e){var n=e.getAttribute("data-firepad-entity");if(n||(n=e.nodeName.toLowerCase()),n&&this.entities_[n]){var r=this.entities_[n].fromElement(e);return new t.Entity(n,r)}},n.prototype.tryRenderToElement_=function(e,n,r){var i=e.type,o=e.info;if(this.entities_[i]&&this.entities_[i][n]){var s=t.document||window&&window.document,a=this.entities_[i][n](o,r,s);if(a){if("string"==typeof a){var c=(t.document||document).createElement("div");return c.innerHTML=a,c.childNodes[0]}if("object"==typeof a)return t.utils.assert(void 0!==a.nodeType,"Error rendering "+i+" entity.  render() function must return an html string or a DOM element."),a}}},n.prototype.entitySupportsUpdate=function(t){return this.entities_[t]&&this.entities_[t].update},n}(),(t=t||{}).Entity=function(){var e=t.AttributeConstants.ENTITY_SENTINEL,n=e+"_";function r(t,e){if(!(this instanceof r))return new r(t,e);this.type=t,this.info=e||{}}return r.prototype.toAttributes=function(){var t={};for(var r in t[e]=this.type,this.info)t[n+r]=this.info[r];return t},r.fromAttributes=function(t){var i=t[e],o={};for(var s in t)0===s.indexOf(n)&&(o[s.substr(n.length)]=t[s]);return new r(i,o)},r}(),(t=t||{}).RichTextCodeMirror=function(){var e=t.AnnotationList,n=t.Span,r=t.utils,i=t.AttributeConstants,o={c:"color",bc:"background-color",fs:"font-size",li:function(t){return"padding-left: "+40*t+"px"}},s={};function a(t,n,r){this.codeMirror=t,this.options_=r||{},this.entityManager_=n,this.currentAttributes_=null;var i=this;this.annotationList_=new e((function(t,e){i.onAnnotationsChanged_(t,e)})),this.initAnnotationList_(),p(this,"onCodeMirrorBeforeChange_"),p(this,"onCodeMirrorChange_"),p(this,"onCursorActivity_"),parseInt(CodeMirror.version)>=4?this.codeMirror.on("changes",this.onCodeMirrorChange_):this.codeMirror.on("change",this.onCodeMirrorChange_),this.codeMirror.on("beforeChange",this.onCodeMirrorBeforeChange_),this.codeMirror.on("cursorActivity",this.onCursorActivity_),this.changeId_=0,this.outstandingChanges_={},this.dirtyLines_=[]}r.makeEventEmitter(a,["change","attributesChange","newLine"]);var c=t.sentinelConstants.LINE_SENTINEL_CHARACTER,u=t.sentinelConstants.ENTITY_SENTINEL_CHARACTER;function l(t,e){return function(t,e){return t.line-e.line||t.ch-e.ch}(t,e)<=0}function h(t){if(0===t.length)return 0;for(var e=0,n=0;n<t.length;n++)e+=t[n].length;return e+t.length-1}function f(t){this.attributes=t||{}}function p(t,e){var n=t[e];t[e]=function(){n.apply(t,arguments)}}return a.prototype.detach=function(){this.codeMirror.off("beforeChange",this.onCodeMirrorBeforeChange_),this.codeMirror.off("change",this.onCodeMirrorChange_),this.codeMirror.off("changes",this.onCodeMirrorChange_),this.codeMirror.off("cursorActivity",this.onCursorActivity_),this.clearAnnotations_()},a.prototype.toggleAttribute=function(t,e){var n=e||!0;if(this.emptySelection_()){var r=this.getCurrentAttributes_();r[t]===n?delete r[t]:r[t]=n,this.currentAttributes_=r}else{var i=this.getCurrentAttributes_()[t]!==n&&n;this.setAttribute(t,i)}},a.prototype.setAttribute=function(t,e){var n=this.codeMirror;if(this.emptySelection_()){var r=this.getCurrentAttributes_();!1===e?delete r[t]:r[t]=e,this.currentAttributes_=r}else this.updateTextAttributes(n.indexFromPos(n.getCursor("start")),n.indexFromPos(n.getCursor("end")),(function(n){!1===e?delete n[t]:n[t]=e})),this.updateCurrentAttributes_()},a.prototype.updateTextAttributes=function(t,e,r,o,s){var a=[],c=t,u=this;this.annotationList_.updateSpan(new n(t,e-t),(function(t,e){var n={};for(var l in t.attributes)n[l]=t.attributes[l];n[i.LINE_SENTINEL]&&!s||r(n);var h={},p={};return u.computeChangedAttributes_(t.attributes,n,h,p),function(t){for(var e in t)return!1;return!0}(h)||a.push({start:c,end:c+e,attributes:h,attributesInverse:p,origin:o}),c+=e,new f(n)})),a.length>0&&this.trigger("attributesChange",this,a)},a.prototype.computeChangedAttributes_=function(t,e,n,r){var i,o={};for(i in t)o[i]=!0;for(i in e)o[i]=!0;for(i in o)i in e?i in t?t[i]!==e[i]&&(n[i]=e[i],r[i]=t[i]):(n[i]=e[i],r[i]=!1):(n[i]=!1,r[i]=t[i])},a.prototype.toggleLineAttribute=function(t,e){var n,r=this.getCurrentLineAttributes_();n=!(t in r&&r[t]===e)&&e,this.setLineAttribute(t,n)},a.prototype.setLineAttribute=function(t,e){this.updateLineAttributesForSelection((function(n){!1===e?delete n[t]:n[t]=e}))},a.prototype.updateLineAttributesForSelection=function(t){var e=this.codeMirror,n=e.getCursor("start"),r=e.getCursor("end"),i=n.line,o=r.line,s=e.getLine(o),a=this.areLineSentinelCharacters_(s.substr(0,r.ch));o>i&&a&&o--,this.updateLineAttributes(i,o,t)},a.prototype.updateLineAttributes=function(t,e,n){for(var r=t;r<=e;r++){var o=this.codeMirror.getLine(r),s=this.codeMirror.indexFromPos({line:r,ch:0});if(o[0]!==c){var a={};a[i.LINE_SENTINEL]=!0,n(a),this.insertText(s,c,a)}else this.updateTextAttributes(s,s+1,n,null,!0)}},a.prototype.replaceText=function(t,e,n,r,i){this.changeId_++;var o="cmrt-"+this.changeId_;this.outstandingChanges_[o]={origOrigin:i,attributes:r};var s=this.codeMirror,a=s.posFromIndex(t),c="number"==typeof e?s.posFromIndex(e):null;s.replaceRange(n,a,c,o)},a.prototype.insertText=function(t,e,n,r){var i=this.codeMirror,o=i.getCursor(),s="RTCMADAPTER"==r&&!i.somethingSelected()&&t==i.indexFromPos(o);this.replaceText(t,null,e,n,r),s&&i.setCursor(o)},a.prototype.removeText=function(t,e,n){var r=this.codeMirror;r.replaceRange("",r.posFromIndex(t),r.posFromIndex(e),n)},a.prototype.insertEntityAtCursor=function(t,e,n){var r=this.codeMirror,i=r.indexFromPos(r.getCursor("head"));this.insertEntityAt(i,t,e,n)},a.prototype.insertEntityAt=function(e,n,r,i){this.codeMirror,this.insertEntity_(e,new t.Entity(n,r),i)},a.prototype.insertEntity_=function(t,e,n){this.replaceText(t,null,u,e.toAttributes(),n)},a.prototype.getAttributeSpans=function(t,e){for(var r=[],i=this.annotationList_.getAnnotatedSpansForSpan(new n(t,e-t)),o=0;o<i.length;o++)r.push({length:i[o].length,attributes:i[o].annotation.attributes});return r},a.prototype.end=function(){var t=this.codeMirror.lineCount()-1;return this.codeMirror.indexFromPos({line:t,ch:this.codeMirror.getLine(t).length})},a.prototype.getRange=function(t,e){var n=this.codeMirror.posFromIndex(t),r=this.codeMirror.posFromIndex(e);return this.codeMirror.getRange(n,r)},a.prototype.initAnnotationList_=function(){var t=this.end();0!==t&&this.annotationList_.insertAnnotatedSpan(new n(0,t),new f)},a.prototype.onAnnotationsChanged_=function(t,e){var n,r={};this.tryToUpdateEntitiesInPlace(t,e);for(var o=0;o<t.length;o++){var s=t[o].annotation.attributes;i.LINE_SENTINEL in s&&(r[this.codeMirror.posFromIndex(t[o].pos).line]=!0),(n=t[o].getAttachedObject())&&n.clear()}for(o=0;o<e.length;o++){var a=e[o].annotation,c=i.LINE_SENTINEL in a.attributes,u=i.ENTITY_SENTINEL in a.attributes,l=this.codeMirror.posFromIndex(e[o].pos);if(c)r[l.line]=!0;else if(u)this.markEntity_(e[o]);else{var h=this.getClassNameForAttributes_(a.attributes);if(""!==h){var f=this.codeMirror.posFromIndex(e[o].pos+e[o].length);n=this.codeMirror.markText(l,f,{className:h}),e[o].attachObject(n)}}}for(var p in r)this.dirtyLines_.push(this.codeMirror.getLineHandle(Number(p))),this.queueLineMarking_()},a.prototype.tryToUpdateEntitiesInPlace=function(t,e){for(var n=t.length;n--;)for(var r=t[n],i=e.length;i--;){var o=e[i];if(r.pos==o.pos&&r.length==o.length&&r.annotation.attributes.ent&&r.annotation.attributes.ent==o.annotation.attributes.ent){var s=o.annotation.attributes.ent;if(this.entityManager_.entitySupportsUpdate(s)){t.splice(n,1),e.splice(i,1);var a=r.getAttachedObject();a.update(o.annotation.attributes),o.attachObject(a)}}}},a.prototype.queueLineMarking_=function(){if(null==this.lineMarkTimeout_){var t=this;this.lineMarkTimeout_=setTimeout((function(){t.lineMarkTimeout_=null;for(var e=[],n=0;n<t.dirtyLines_.length;n++){var r=t.codeMirror.getLineNumber(t.dirtyLines_[n]);e.push(Number(r))}t.dirtyLines_=[],e.sort((function(t,e){return t-e}));var i=-1;for(n=0;n<e.length;n++){var o=e[n];o>i&&(i=t.markLineSentinelCharactersForChangedLines_(o,o))}}),0)}},a.prototype.addStyleWithCSS_=function(t){var e=document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n)},a.prototype.getClassNameForAttributes_=function(e){var n="";for(var r in e){var a=e[r];if(r===i.LINE_SENTINEL)t.utils.assert(!0===a,"LINE_SENTINEL attribute should be true if it exists.");else{var c=(this.options_.cssPrefix||"cmrt-")+r;if(!0!==a){r===i.FONT_SIZE&&"string"!=typeof a&&(a+="px");var u=a.toString().toLowerCase().replace(/[^a-z0-9-_]/g,"-");if(c+="-"+u,o[r]&&(s[r]||(s[r]={}),!s[r][u])){s[r][u]=!0;var l=o[r],h="function"==typeof l?l(a):l+": "+a,f=r==i.LINE_INDENT?"pre."+c:"."+c;this.addStyleWithCSS_(f+" { "+h+" }"),r===i.LINE_INDENT&&(f="pre.CodeMirror-line."+c,this.addStyleWithCSS_(f+" { "+h+" }"))}}n=n+" "+c}}return n},a.prototype.markEntity_=function(e){for(var n=e.annotation.attributes,r=t.Entity.fromAttributes(n),i=this.codeMirror,o=this,s=[],a=0;a<e.length;a++){var c=i.posFromIndex(e.pos+a),u=i.posFromIndex(e.pos+a+1),l={collapsed:!0,atomic:!0,inclusiveLeft:!1,inclusiveRight:!1},h=this.createEntityHandle_(r,e.pos),f=this.entityManager_.renderToElement(r,h);f&&(l.replacedWith=f);var p=i.markText(c,u,l);s.push(p),h.setMarker(p)}e.attachObject({clear:function(){for(var t=0;t<s.length;t++)s[t].clear()},update:function(e){for(var n=t.Entity.fromAttributes(e),r=0;r<s.length;r++)o.entityManager_.updateElement(n,s[r].replacedWith)}}),this.queueRefresh_()},a.prototype.queueRefresh_=function(){var t=this;this.refreshTimer_||(this.refreshTimer_=setTimeout((function(){t.codeMirror.refresh(),t.refreshTimer_=null}),0))},a.prototype.createEntityHandle_=function(e,n){var r=null,i=this;function o(){if(r){var t=r.find();return t?i.codeMirror.indexFromPos(t.from):null}return n}return{find:o,remove:function(){var t=o();null!=t&&(i.codeMirror.focus(),i.removeText(t,t+1))},replace:function(n){var r=t.AttributeConstants.ENTITY_SENTINEL,s=r+"_",a=o();i.updateTextAttributes(a,a+1,(function(t){for(var i in t)delete t[i];for(var o in t[r]=e.type,n)t[s+o]=n[o]}))},setMarker:function(t){r=t}}},a.prototype.lineClassRemover_=function(t){var e=this.codeMirror,n=e.getLineHandle(t);return{clear:function(){e.removeLineClass(n,"text",".*")}}},a.prototype.emptySelection_=function(){var t=this.codeMirror.getCursor("start"),e=this.codeMirror.getCursor("end");return t.line===e.line&&t.ch===e.ch},a.prototype.onCodeMirrorBeforeChange_=function(t,e){if("+input"===e.origin||"paste"===e.origin){for(var n=[],r=0;r<e.text.length;r++){var i=e.text[r];i=i.replace(new RegExp("["+c+u+"]","g"),""),n.push(i)}e.update(e.from,e.to,n)}},a.prototype.onCodeMirrorChange_=function(t,e){if("object"==typeof e.from){for(var r=[];e;)r.push(e),e=e.next;e=r}for(var i=this.convertCoordinateSystemForChanges_(e),o=[],s=0;s<i.length;s++){var a,c=i[s],u=c.start,l=(c.end,c.text),h=c.removed,p=c.origin;if(h.length>0){for(var d=this.annotationList_.getAnnotatedSpansForSpan(new n(u,h.length)),m=0,g=0;g<d.length;g++){var v=d[g];o.push({start:u,end:u+v.length,removedAttributes:v.annotation.attributes,removed:h.substr(m,v.length),attributes:{},text:"",origin:c.origin}),m+=v.length}this.annotationList_.removeSpan(new n(u,h.length))}l.length>0&&("+input"===c.origin||"paste"===c.origin?a=this.currentAttributes_||{}:p in this.outstandingChanges_?(a=this.outstandingChanges_[p].attributes,p=this.outstandingChanges_[p].origOrigin,delete this.outstandingChanges_[p]):a={},this.annotationList_.insertAnnotatedSpan(new n(u,l.length),new f(a)),o.push({start:u,end:u,removedAttributes:{},removed:"",text:l,attributes:a,origin:p}))}this.markLineSentinelCharactersForChanges_(e),o.length>0&&this.trigger("change",this,o)},a.prototype.convertCoordinateSystemForChanges_=function(t){var e=this,n=function(t){return e.codeMirror.indexFromPos(t)};function r(t,e){return function(n){return l(n,e.from)?t(n):l(e.to,n)?t({line:n.line+e.text.length-1-(e.to.line-e.from.line),ch:e.to.line<n.line?n.ch:e.text.length<=1?n.ch-(e.to.ch-e.from.ch)+h(e.text):n.ch-e.to.ch+(r=e.text,r[r.length-1]).length})+h(e.removed)-h(e.text):e.from.line===n.line?t(e.from)+n.ch-e.from.ch:t(e.from)+h(e.removed.slice(0,n.line-e.from.line))+1+n.ch;var r}}for(var i=[],o=t.length-1;o>=0;o--){var s=t[o],a=(n=r(n,s))(s.from),c=s.removed.join("\n"),u=s.text.join("\n");i.unshift({start:a,end:a+c.length,removed:c,text:u,origin:s.origin})}return i},a.prototype.markLineSentinelCharactersForChanges_=function(t){for(var e=Number.MAX_VALUE,n=-1,r=0;r<t.length;r++){var i=t[r],o=i.from.line;i.from.ch,(i.removed.length>1||i.removed[0].indexOf(c)>=0)&&(e=Math.min(e,o),n=Math.max(n,o)),i.text.length>1?(e=Math.min(e,o),n=Math.max(n,o+i.text.length-1)):i.text[0].indexOf(c)>=0&&(e=Math.min(e,o),n=Math.max(n,o))}n=Math.min(n,this.codeMirror.lineCount()-1),this.markLineSentinelCharactersForChangedLines_(e,n)},a.prototype.markLineSentinelCharactersForChangedLines_=function(t,e){if(t<Number.MAX_VALUE)for(;t>0&&this.lineIsListItemOrIndented_(t-1);)t--;if(e>-1)for(var n=this.codeMirror.lineCount();e+1<n&&this.lineIsListItemOrIndented_(e+1);)e++;for(var r=[],i=this.codeMirror,o=t;o<=e;o++){var s=i.getLine(o),a=i.getLineHandle(o);if(i.removeLineClass(a,"text",".*"),s.length>0)for(var u=s.indexOf(c);u>=0;){for(var l=u;u<s.length&&s[u]===c;){for(var h=i.findMarksAt({line:o,ch:u}),f=0;f<h.length;f++)h[f].isForLineSentinel&&h[f].clear();u++}this.markLineSentinelCharacters_(o,l,u,r),u=s.indexOf(c,u)}else r=[]}return e},a.prototype.markLineSentinelCharacters_=function(t,e,n,r){var o=this.codeMirror,s=null,a=null,c=function(){var t=a.find();return t?t.from.line:null};if(0===e){var u=this.getLineAttributes_(t),l=u[i.LIST_TYPE],h=u[i.LINE_INDENT]||0;for(l&&0===h&&(h=1);h>=r.length;)r.push(1);"o"===l?(s=this.makeOrderedListElement_(r[h]),r[h]++):"u"===l?(s=this.makeUnorderedListElement_(),r[h]=1):"t"===l?(s=this.makeTodoListElement_(!1,c),r[h]=1):"tc"===l&&(s=this.makeTodoListElement_(!0,c),r[h]=1);var f=this.getClassNameForAttributes_(u);""!==f&&this.codeMirror.addLineClass(t,"text",f),r[h+1]=1}var p={inclusiveLeft:!0,collapsed:!0};s&&(p.replacedWith=s),(a=o.markText({line:t,ch:e},{line:t,ch:n},p)).isForLineSentinel=!0},a.prototype.makeOrderedListElement_=function(t){return r.elt("div",t+".",{class:"firepad-list-left"})},a.prototype.makeUnorderedListElement_=function(){return r.elt("div","\u2022",{class:"firepad-list-left"})},a.prototype.toggleTodo=function(t){var e,n=i.LIST_TYPE,r=this.getCurrentLineAttributes_();!(n in r)||"t"!==r[n]&&"tc"!==r[n]?e="t":"t"===r[n]?e="tc":"tc"===r[n]&&(e=!!t&&"t"),this.setLineAttribute(n,e)},a.prototype.makeTodoListElement_=function(t,e){var n={type:"checkbox",class:"firepad-todo-left"};t&&(n.checked=!0);var i=r.elt("input",!1,n),o=this;return r.on(i,"click",r.stopEventAnd((function(t){o.codeMirror.setCursor({line:e(),ch:1}),o.toggleTodo(!0)}))),i},a.prototype.lineIsListItemOrIndented_=function(t){var e=this.getLineAttributes_(t);return!1!==(e[i.LIST_TYPE]||!1)||0!==(e[i.LINE_INDENT]||0)},a.prototype.onCursorActivity_=function(){var t=this;setTimeout((function(){t.updateCurrentAttributes_()}),1)},a.prototype.getCurrentAttributes_=function(){return this.currentAttributes_||this.updateCurrentAttributes_(),this.currentAttributes_},a.prototype.updateCurrentAttributes_=function(){var e=this.codeMirror,n=e.indexFromPos(e.getCursor("anchor")),r=e.indexFromPos(e.getCursor("head")),o=r;if(n>r){for(;o<this.end();){var s=this.getRange(o,o+1);if("\n"!==s&&s!==c)break;o++}o<this.end()&&o++}else for(;o>0&&("\n"===(s=this.getRange(o-1,o))||s===c);)o--;var a=this.annotationList_.getAnnotatedSpansForPos(o);this.currentAttributes_={};var u={};for(var l in a.length>0&&!(i.LINE_SENTINEL in a[0].annotation.attributes)?u=a[0].annotation.attributes:a.length>1&&(t.utils.assert(!(i.LINE_SENTINEL in a[1].annotation.attributes),"Cursor can't be between two line sentinel characters."),u=a[1].annotation.attributes),u)"l"!==l&&"lt"!==l&&"li"!==l&&0!==l.indexOf(i.ENTITY_SENTINEL)&&(this.currentAttributes_[l]=u[l])},a.prototype.getCurrentLineAttributes_=function(){var t=this.codeMirror,e=t.getCursor("anchor"),n=t.getCursor("head"),r=n.line;return 0===n.ch&&e.line<n.line&&r--,this.getLineAttributes_(r)},a.prototype.getLineAttributes_=function(e){var r={},i=this.codeMirror.getLine(e);if(i.length>0&&i[0]===c){var o=this.codeMirror.indexFromPos({line:e,ch:0}),s=this.annotationList_.getAnnotatedSpansForSpan(new n(o,1));for(var a in t.utils.assert(1===s.length),s[0].annotation.attributes)r[a]=s[0].annotation.attributes[a]}return r},a.prototype.clearAnnotations_=function(){this.annotationList_.updateSpan(new n(0,this.end()),(function(t,e){return new f({})}))},a.prototype.newline=function(){var t=this.codeMirror,e=this;if(this.emptySelection_()){var n=t.getCursor("head").line,r=this.getLineAttributes_(n),o=r[i.LIST_TYPE];o&&1===t.getLine(n).length?this.updateLineAttributes(n,n,(function(t){delete t[i.LIST_TYPE],delete t[i.LINE_INDENT]})):(t.replaceSelection("\n","end","+input"),this.updateLineAttributes(n+1,n+1,(function(t){for(var s in r)t[s]=r[s];"tc"===o&&(t[i.LIST_TYPE]="t"),e.trigger("newLine",{line:n+1,attr:t})})))}else t.replaceSelection("\n","end","+input")},a.prototype.deleteLeft=function(){var t=this.codeMirror,e=t.getCursor("head"),n=this.getLineAttributes_(e.line),r=n[i.LIST_TYPE],o=n[i.LINE_INDENT],s=this.emptySelection_()&&1===e.ch;s&&r?this.updateLineAttributes(e.line,e.line,(function(t){delete t[i.LIST_TYPE],delete t[i.LINE_INDENT]})):s&&o&&o>0?this.unindent():t.deleteH(-1,"char")},a.prototype.deleteRight=function(){var t=this.codeMirror,e=t.getCursor("head"),n=t.getLine(e.line),r=this.areLineSentinelCharacters_(n),i=e.line+1<t.lineCount()?t.getLine(e.line+1):"";this.emptySelection_()&&r&&i[0]===c?(t.replaceRange("",{line:e.line,ch:0},{line:e.line+1,ch:0},"+input"),t.setCursor({line:e.line,ch:0})):t.deleteH(1,"char")},a.prototype.indent=function(){this.updateLineAttributesForSelection((function(t){var e=t[i.LINE_INDENT],n=t[i.LIST_TYPE];e?t[i.LINE_INDENT]++:t[i.LINE_INDENT]=n?2:1}))},a.prototype.unindent=function(){this.updateLineAttributesForSelection((function(t){var e=t[i.LINE_INDENT];e&&e>1?t[i.LINE_INDENT]=e-1:(delete t[i.LIST_TYPE],delete t[i.LINE_INDENT])}))},a.prototype.getText=function(){return this.codeMirror.getValue().replace(new RegExp(c,"g"),"")},a.prototype.areLineSentinelCharacters_=function(t){for(var e=0;e<t.length;e++)if(t[e]!==c)return!1;return!0},f.prototype.equals=function(t){if(!(t instanceof f))return!1;var e;for(e in this.attributes)if(t.attributes[e]!==this.attributes[e])return!1;for(e in t.attributes)if(t.attributes[e]!==this.attributes[e])return!1;return!0},a}(),(t=t||{}).RichTextCodeMirrorAdapter=function(){"use strict";var e=t.TextOperation,n=t.WrappedOperation,r=t.Cursor;function i(t){this.rtcm=t,this.cm=t.codeMirror,a(this,"onChange"),a(this,"onAttributesChange"),a(this,"onCursorActivity"),a(this,"onFocus"),a(this,"onBlur"),this.rtcm.on("change",this.onChange),this.rtcm.on("attributesChange",this.onAttributesChange),this.cm.on("cursorActivity",this.onCursorActivity),this.cm.on("focus",this.onFocus),this.cm.on("blur",this.onBlur)}function o(t){var e=t.lineCount()-1;return t.indexFromPos({line:e,ch:t.getLine(e).length})}function s(t,e){if(!t)throw new Error(e||"assertion error")}function a(t,e){var n=t[e];t[e]=function(){n.apply(t,arguments)}}function c(t){for(var e in t)return!1;return!0}function u(t,e){if("string"!=typeof t)throw new TypeError("Expected a string");3===(t=t.replace(/^#/,"")).length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var n,r=parseInt(t,16),i=[r>>16,r>>8&255,255&r],o="rgb";return null!==(n=e)&&void 0!==n&&(o="rgba",i.push(e)),o+"("+i.join(",")+")"}return i.prototype.detach=function(){this.rtcm.off("change",this.onChange),this.rtcm.off("attributesChange",this.onAttributesChange),this.cm.off("cursorActivity",this.onCursorActivity),this.cm.off("focus",this.onFocus),this.cm.off("blur",this.onBlur)},i.operationFromCodeMirrorChanges=function(t,n){for(var r=o(n),i=(new e).retain(r),s=(new e).retain(r),a=t.length-1;a>=0;a--){var c=t[a],u=c.start,l=r-u-c.text.length;i=(new e).retain(u).delete(c.removed.length).insert(c.text,c.attributes).retain(l).compose(i),s=s.compose((new e).retain(u).delete(c.text.length).insert(c.removed,c.removedAttributes).retain(l)),r+=c.removed.length-c.text.length}return[i,s]},i.operationFromAttributesChanges=function(t,n){for(var r=o(n),i=new e,a=new e,c=0,u=0;u<t.length;u++){var l=t[u],h=l.start-c;s(h>=0),i.retain(h),a.retain(h);var f=l.end-l.start;i.retain(f,l.attributes),a.retain(f,l.attributesInverse),c=l.start+f}return i.retain(r-c),a.retain(r-c),[i,a]},i.prototype.registerCallbacks=function(t){this.callbacks=t},i.prototype.onChange=function(t,e){if("RTCMADAPTER"!==e[0].origin){var n=i.operationFromCodeMirrorChanges(e,this.cm);this.trigger("change",n[0],n[1])}},i.prototype.onAttributesChange=function(t,e){if("RTCMADAPTER"!==e[0].origin){var n=i.operationFromAttributesChanges(e,this.cm);this.trigger("change",n[0],n[1])}},i.prototype.onCursorActivity=function(){var t=this;setTimeout((function(){t.trigger("cursorActivity")}),1)},i.prototype.onFocus=function(){this.trigger("focus")},i.prototype.onBlur=function(){this.cm.somethingSelected()||this.trigger("blur")},i.prototype.getValue=function(){return this.cm.getValue()},i.prototype.getCursor=function(){var t,e=this.cm,n=e.getCursor(),i=e.indexFromPos(n);if(e.somethingSelected()){var o=e.getCursor(!0),s=0===function(t,e){return t.line<e.line?-1:t.line>e.line?1:t.ch<e.ch?-1:t.ch>e.ch?1:0}(n,o)?e.getCursor(!1):o;t=e.indexFromPos(s)}else t=i;return new r(i,t)},i.prototype.setCursor=function(t){this.cm.setSelection(this.cm.posFromIndex(t.position),this.cm.posFromIndex(t.selectionEnd))},i.prototype.addStyleRule=function(t){if("undefined"!=typeof document&&null!==document){if(!this.addedStyleRules){this.addedStyleRules={};var e=document.createElement("style");document.documentElement.getElementsByTagName("head")[0].appendChild(e),this.addedStyleSheet=e.sheet}if(!this.addedStyleRules[t])return this.addedStyleRules[t]=!0,this.addedStyleSheet.insertRule(t,0)}},i.prototype.setOtherCursor=function(t,e,n){var r=this.cm.posFromIndex(t.position);if("string"==typeof e&&e.match(/^#[a-fA-F0-9]{3,6}$/)){var i=this.rtcm.end();if("object"==typeof t&&"number"==typeof t.position&&"number"==typeof t.selectionEnd&&!(t.position<0||t.position>i||t.selectionEnd<0||t.selectionEnd>i)){if(t.position===t.selectionEnd){var o=this.cm.cursorCoords(r),s=document.createElement("span");return s.className="other-client",s.style.borderLeftWidth="2px",s.style.borderLeftStyle="solid",s.style.borderLeftColor=e,s.style.marginLeft=s.style.marginRight="-1px",s.style.height=.9*(o.bottom-o.top)+"px",s.setAttribute("data-clientid",n),s.style.zIndex=0,this.cm.setBookmark(r,{widget:s,insertLeft:!0})}var a,c,l="selection-"+e.replace("#",""),h="."+l+" { background: "+u(e)+";\n background: "+u(e,.4)+";}";return this.addStyleRule(h),t.selectionEnd>t.position?(a=r,c=this.cm.posFromIndex(t.selectionEnd)):(a=this.cm.posFromIndex(t.selectionEnd),c=r),this.cm.markText(a,c,{className:l})}}},i.prototype.trigger=function(t){var e=Array.prototype.slice.call(arguments,1),n=this.callbacks&&this.callbacks[t];n&&n.apply(this,e)},i.prototype.applyOperation=function(t){t.ops.length>10&&this.rtcm.codeMirror.getWrapperElement().setAttribute("style","display: none");for(var e=t.ops,n=0,r=0,i=e.length;r<i;r++){var o=e[r];o.isRetain()?(c(o.attributes)||this.rtcm.updateTextAttributes(n,n+o.chars,(function(t){for(var e in o.attributes)!1===o.attributes[e]?delete t[e]:t[e]=o.attributes[e]}),"RTCMADAPTER",!0),n+=o.chars):o.isInsert()?(this.rtcm.insertText(n,o.text,o.attributes,"RTCMADAPTER"),n+=o.text.length):o.isDelete()&&this.rtcm.removeText(n,n+o.chars,"RTCMADAPTER")}t.ops.length>10&&(this.rtcm.codeMirror.getWrapperElement().setAttribute("style",""),this.rtcm.codeMirror.refresh())},i.prototype.registerUndo=function(t){this.cm.undo=t},i.prototype.registerRedo=function(t){this.cm.redo=t},i.prototype.invertOperation=function(t){for(var r,i,o=0,s=this.rtcm.codeMirror,a=new e,u=0;u<t.wrapped.ops.length;u++){var l=t.wrapped.ops[u];if(l.isRetain())if(c(l.attributes))a.retain(l.chars),o+=l.chars;else for(r=this.rtcm.getAttributeSpans(o,o+l.chars),i=0;i<r.length;i++){var h={};for(var f in l.attributes){var p=l.attributes[f],d=r[i].attributes[f];!1===p?d&&(h[f]=d):p!==d&&(h[f]=d||!1)}a.retain(r[i].length,h),o+=r[i].length}else if(l.isInsert())a.delete(l.text.length);else if(l.isDelete()){var m=s.getRange(s.posFromIndex(o),s.posFromIndex(o+l.chars));r=this.rtcm.getAttributeSpans(o,o+l.chars);var g=0;for(i=0;i<r.length;i++)a.insert(m.substr(g,r[i].length),r[i].attributes),g+=r[i].length;o+=l.chars}}return new n(a,t.meta.invert())},i}(),(t=t||{}).Formatting=function(){var e=t.AttributeConstants;function n(t){if(!(this instanceof n))return new n(t);this.attributes=t||{}}return n.prototype.cloneWithNewAttribute_=function(t,e){var r={};for(var i in this.attributes)r[i]=this.attributes[i];return!1===e?delete r[t]:r[t]=e,new n(r)},n.prototype.bold=function(t){return this.cloneWithNewAttribute_(e.BOLD,t)},n.prototype.italic=function(t){return this.cloneWithNewAttribute_(e.ITALIC,t)},n.prototype.underline=function(t){return this.cloneWithNewAttribute_(e.UNDERLINE,t)},n.prototype.strike=function(t){return this.cloneWithNewAttribute_(e.STRIKE,t)},n.prototype.font=function(t){return this.cloneWithNewAttribute_(e.FONT,t)},n.prototype.fontSize=function(t){return this.cloneWithNewAttribute_(e.FONT_SIZE,t)},n.prototype.color=function(t){return this.cloneWithNewAttribute_(e.COLOR,t)},n.prototype.backgroundColor=function(t){return this.cloneWithNewAttribute_(e.BACKGROUND_COLOR,t)},n}(),(t=t||{}).Text=function e(n,r){if(!(this instanceof e))return new e(n,r);this.text=n,this.formatting=r||t.Formatting()},(t=t||{}).LineFormatting=function(){var e=t.AttributeConstants;function n(t){if(!(this instanceof n))return new n(t);this.attributes=t||{},this.attributes[e.LINE_SENTINEL]=!0}return n.LIST_TYPE={NONE:!1,ORDERED:"o",UNORDERED:"u",TODO:"t",TODOCHECKED:"tc"},n.prototype.cloneWithNewAttribute_=function(t,e){var r={};for(var i in this.attributes)r[i]=this.attributes[i];return!1===e?delete r[t]:r[t]=e,new n(r)},n.prototype.indent=function(t){return this.cloneWithNewAttribute_(e.LINE_INDENT,t)},n.prototype.align=function(t){return this.cloneWithNewAttribute_(e.LINE_ALIGN,t)},n.prototype.listItem=function(n){return t.utils.assert(!1===n||"u"===n||"o"===n||"t"===n||"tc"===n),this.cloneWithNewAttribute_(e.LIST_TYPE,n)},n.prototype.getIndent=function(){return this.attributes[e.LINE_INDENT]||0},n.prototype.getAlign=function(){return this.attributes[e.LINE_ALIGN]||0},n.prototype.getListItem=function(){return this.attributes[e.LIST_TYPE]||!1},n}(),(t=t||{}).Line=function e(n,r){if(!(this instanceof e))return new e(n,r);"[object Array]"!==Object.prototype.toString.call(n)&&(n=void 0===n?[]:[n]),this.textPieces=n,this.formatting=r||t.LineFormatting()},(t=t||{}).ParseHtml=function(){var e,n=t.LineFormatting.LIST_TYPE;function r(e,r,i){this.listType=e||n.UNORDERED,this.lineFormatting=r||t.LineFormatting(),this.textFormatting=i||t.Formatting()}function i(){this.lines=[],this.currentLine=[],this.currentLineListItemType=null}r.prototype.withTextFormatting=function(t){return new r(this.listType,this.lineFormatting,t)},r.prototype.withLineFormatting=function(t){return new r(this.listType,t,this.textFormatting)},r.prototype.withListType=function(t){return new r(t,this.lineFormatting,this.textFormatting)},r.prototype.withIncreasedIndent=function(){var t=this.lineFormatting.indent(this.lineFormatting.getIndent()+1);return new r(this.listType,t,this.textFormatting)},r.prototype.withAlign=function(t){var e=this.lineFormatting.align(t);return new r(this.listType,e,this.textFormatting)},i.prototype.newlineIfNonEmpty=function(t){this.cleanLine_(),this.currentLine.length>0&&this.newline(t)},i.prototype.newlineIfNonEmptyOrListItem=function(t){this.cleanLine_(),(this.currentLine.length>0||null!==this.currentLineListItemType)&&this.newline(t)},i.prototype.newline=function(e){this.cleanLine_();var n=e.lineFormatting;null!==this.currentLineListItemType&&(n=n.listItem(this.currentLineListItemType),this.currentLineListItemType=null),this.lines.push(t.Line(this.currentLine,n)),this.currentLine=[]},i.prototype.makeListItem=function(t){this.currentLineListItemType=t},i.prototype.cleanLine_=function(){if(this.currentLine.length>0){var t=this.currentLine.length-1;this.currentLine[0].text=this.currentLine[0].text.replace(/^ +/,""),this.currentLine[t].text=this.currentLine[t].text.replace(/ +$/g,"");for(var e=0;e<this.currentLine.length;e++)this.currentLine[e].text=this.currentLine[e].text.replace(/\u00a0/g," ")}1===this.currentLine.length&&""===this.currentLine[0].text&&(this.currentLine=[])};var o=o||{ELEMENT_NODE:1,TEXT_NODE:3};function s(r,i,s){if(r.nodeType===o.ELEMENT_NODE){var c=e.fromElement(r);if(c)return void s.currentLine.push(new t.Text(t.sentinelConstants.ENTITY_SENTINEL_CHARACTER,new t.Formatting(c.toAttributes())))}switch(r.nodeType){case o.TEXT_NODE:var u=r.nodeValue.replace(/[ \n\t]+/g," ");s.currentLine.push(t.Text(u,i.textFormatting));break;case o.ELEMENT_NODE:switch(i=function(e,n){for(var r=e.textFormatting,i=e.lineFormatting,o=n.split(";"),s=0;s<o.length;s++){var a=o[s].split(":");if(2===a.length){var c=t.utils.trim(a[0]).toLowerCase(),u=t.utils.trim(a[1]).toLowerCase();switch(c){case"text-decoration":var l=u.indexOf("underline")>=0,h=u.indexOf("line-through")>=0;r=r.underline(l).strike(h);break;case"font-weight":var f="bold"===u||parseInt(u)>=600;r=r.bold(f);break;case"font-style":var p="italic"===u||"oblique"===u;r=r.italic(p);break;case"color":r=r.color(u);break;case"background-color":r=r.backgroundColor(u);break;case"text-align":i=i.align(u);break;case"font-size":var d=null;t.utils.stringEndsWith(u,["px","pt","%","em","xx-small","x-small","small","medium","large","x-large","xx-large","smaller","larger"])?d=u:parseInt(u)&&(d=parseInt(u)+"px"),d&&(r=r.fontSize(d));break;case"font-family":var m=t.utils.trim(u.split(",")[0]);m=(m=m.replace(/['"]/g,"")).replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})),r=r.font(m)}}}return e.withLineFormatting(i).withTextFormatting(r)}(i,r.getAttribute("style")||""),r.nodeName.toLowerCase()){case"div":case"h1":case"h2":case"h3":case"p":s.newlineIfNonEmpty(i),a(r,i,s),s.newlineIfNonEmpty(i);break;case"center":i=i.withAlign("center"),s.newlineIfNonEmpty(i),a(r,i.withAlign("center"),s),s.newlineIfNonEmpty(i);break;case"b":case"strong":a(r,i.withTextFormatting(i.textFormatting.bold(!0)),s);break;case"u":a(r,i.withTextFormatting(i.textFormatting.underline(!0)),s);break;case"i":case"em":a(r,i.withTextFormatting(i.textFormatting.italic(!0)),s);break;case"s":a(r,i.withTextFormatting(i.textFormatting.strike(!0)),s);break;case"font":var l=r.getAttribute("face"),h=r.getAttribute("color"),f=parseInt(r.getAttribute("size"));l&&(i=i.withTextFormatting(i.textFormatting.font(l))),h&&(i=i.withTextFormatting(i.textFormatting.color(h))),f&&(i=i.withTextFormatting(i.textFormatting.fontSize(f))),a(r,i,s);break;case"br":s.newline(i);break;case"ul":s.newlineIfNonEmptyOrListItem(i);var p="firepad-todo"===r.getAttribute("class")?n.TODO:n.UNORDERED;a(r,i.withListType(p).withIncreasedIndent(),s),s.newlineIfNonEmpty(i);break;case"ol":s.newlineIfNonEmptyOrListItem(i),a(r,i.withListType(n.ORDERED).withIncreasedIndent(),s),s.newlineIfNonEmpty(i);break;case"li":!function(t,e,r){r.newlineIfNonEmptyOrListItem(e);var i="firepad-checked"===t.getAttribute("class")?n.TODOCHECKED:e.listType;r.makeListItem(i);var o=r.currentLine;a(t,e,r),(o===r.currentLine||r.currentLine.length>0)&&r.newline(e)}(r,i,s);break;case"style":break;default:a(r,i,s)}}}function a(t,e,n){if(t.hasChildNodes())for(var r=0;r<t.childNodes.length;r++)s(t.childNodes[r],e,n)}return function(n,o){var a=(t.document||document).createElement("div");a.innerHTML=n,e=o;var c=new i;return s(a,new r,c),c.lines}}(),(t=t||{}).textPiecesToInserts=function(e,n){var r=[];function i(n,i){n instanceof t.Text&&(i=n.formatting.attributes,n=n.text),r.push({string:n,attributes:i}),e="\n"===n[n.length-1]}function o(n,r){e&&i(t.sentinelConstants.LINE_SENTINEL_CHARACTER,n.formatting.attributes);for(var o=0;o<n.textPieces.length;o++)i(n.textPieces[o]);r&&i("\n")}for(var s=0;s<n.length;s++)n[s]instanceof t.Line?o(n[s],s<n.length-1):i(n[s]);return r},(t=t||{}).Firepad=function(e){if(!t.RichTextCodeMirrorAdapter)throw new Error("Oops! It looks like you're trying to include lib/firepad.js directly.  This is actually one of many source files that make up firepad.  You want dist/firepad.js instead.");var n=t.RichTextCodeMirrorAdapter,r=t.RichTextCodeMirror,i=t.RichTextToolbar,o=t.ACEAdapter,s=t.MonacoAdapter,a=(t.FirebaseAdapter,t.EditorClient),c=t.EntityManager,u=t.AttributeConstants,l=t.utils,h=(t.LineFormatting.LIST_TYPE,e.ace);function f(t,i,u){if(!(this instanceof f))return new f(t,i,u);if(!e.CodeMirror&&!h&&!e.monaco)throw new Error("Couldn't find CodeMirror, ACE or Monaco.  Did you forget to include codemirror.js/ace.js or import monaco?");if(this.zombie_=!1,e.CodeMirror&&i instanceof e.CodeMirror){this.codeMirror_=this.editor_=i;var d=this.codeMirror_.getValue();if(""!==d)throw new Error("Can't initialize Firepad with a CodeMirror instance that already contains text.")}else if(h&&i&&i.session instanceof h.EditSession){if(this.ace_=this.editor_=i,""!==(d=this.ace_.getValue()))throw new Error("Can't initialize Firepad with an ACE instance that already contains text.")}else if(e.monaco&&i&&i instanceof e.monaco.constructor){if(e.monaco,this.monaco_=this.editor_=i,""!==(d=this.monaco_.getValue()))throw new Error("Can't initialize Firepad with a Monaco instance that already contains text.")}else this.codeMirror_=this.editor_=new e.CodeMirror(i);var m;m=this.codeMirror_?this.codeMirror_.getWrapperElement():this.ace_?this.ace_.container:this.monaco_.getDomNode(),this.firepadWrapper_=l.elt("div",null,{class:"firepad"}),m.parentNode.replaceChild(this.firepadWrapper_,m),this.firepadWrapper_.appendChild(m),l.on(m,"dragstart",l.stopEvent),this.editor_.firepad=this,this.options_=u||{},this.getOption("richTextShortcuts",!1)&&(e.CodeMirror.keyMap.richtext||this.initializeKeyMap_(),this.codeMirror_.setOption("keyMap","richtext"),this.firepadWrapper_.className+=" firepad-richtext"),this.imageInsertionUI=this.getOption("imageInsertionUI",!0),this.getOption("richTextToolbar",!1)&&(this.addToolbar_(),this.firepadWrapper_.className+=" firepad-richtext firepad-with-toolbar"),this.codeMirror_&&this.codeMirror_.refresh();var g=this.getOption("userId",t.push().key),v=this.getOption("userColor",function(t){for(var e=1,n=0;n<t.length;n++)e=17*(e+t.charCodeAt(n))%360;return function(t,e,n){var r=.5,i=function(t){return t<0&&(t+=1),t>1&&(t-=1),6*t<1?r+3*t:2*t<1?1:3*t<2?r+3*(2/3-t):r};return p(i(t+1/3),i(t),i(t-1/3))}(e/360)}(g));this.entityManager_=new c,this.firebaseAdapter_=new f.FirebaseAdapter(t,g,v),this.codeMirror_?(this.richTextCodeMirror_=new r(this.codeMirror_,this.entityManager_,{cssPrefix:"firepad-"}),this.editorAdapter_=new n(this.richTextCodeMirror_)):this.ace_?this.editorAdapter_=new o(this.ace_):this.editorAdapter_=new s(this.monaco_),this.client_=new a(this.firebaseAdapter_,this.editorAdapter_);var y=this;this.firebaseAdapter_.on("cursor",(function(){y.trigger.apply(y,["cursor"].concat([].slice.call(arguments)))})),this.codeMirror_&&this.richTextCodeMirror_.on("newLine",(function(){y.trigger.apply(y,["newLine"].concat([].slice.call(arguments)))})),this.firebaseAdapter_.on("ready",(function(){y.ready_=!0,this.ace_&&this.editorAdapter_.grabDocumentState(),this.monaco_&&this.editorAdapter_.grabDocumentState();var t=y.getOption("defaultText",null);t&&y.isHistoryEmpty()&&y.setText(t),y.trigger("ready")})),this.client_.on("synced",(function(t){y.trigger("synced",t)})),"Microsoft Internet Explorer"==navigator.appName&&navigator.userAgent.match(/MSIE 8\./)&&(window.onload=function(){var t=document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.styleSheet.cssText=":before,:after{content:none !important;}",t.appendChild(e),setTimeout((function(){t.removeChild(e)}),0)})}function p(t,e,n){function r(t){var e=Math.round(255*t).toString(16);return 1===e.length?"0"+e:e}return"#"+r(t)+r(e)+r(n)}return e.monaco,l.makeEventEmitter(f),f.fromCodeMirror=f,f.fromACE=f,f.fromMonaco=f,f.prototype.dispose=function(){this.zombie_=!0,this.codeMirror_?editorWrapper=this.codeMirror_.getWrapperElement():this.ace_?editorWrapper=this.ace_.container:editorWrapper=this.monaco_.getDomNode(),this.firepadWrapper_.removeChild(editorWrapper),this.firepadWrapper_.parentNode.replaceChild(editorWrapper,this.firepadWrapper_),this.editor_.firepad=null,this.codeMirror_&&"richtext"===this.codeMirror_.getOption("keyMap")&&this.codeMirror_.setOption("keyMap","default"),this.firebaseAdapter_.dispose(),this.editorAdapter_.detach(),this.richTextCodeMirror_&&this.richTextCodeMirror_.detach()},f.prototype.setUserId=function(t){this.firebaseAdapter_.setUserId(t)},f.prototype.setUserColor=function(t){this.firebaseAdapter_.setColor(t)},f.prototype.getText=function(){return this.assertReady_("getText"),this.codeMirror_?this.richTextCodeMirror_.getText():this.ace_?this.ace_.getSession().getDocument().getValue():this.monaco_.getModel().getValue()},f.prototype.setText=function(t){return this.assertReady_("setText"),this.monaco_?this.monaco_.getModel().setValue(t):this.ace_?this.ace_.getSession().getDocument().setValue(t):(this.codeMirror_.getWrapperElement().setAttribute("style","display: none"),this.codeMirror_.setValue(""),this.insertText(0,t),this.codeMirror_.getWrapperElement().setAttribute("style",""),this.codeMirror_.refresh(),void this.editorAdapter_.setCursor({position:0,selectionEnd:0}))},f.prototype.insertTextAtCursor=function(t){this.insertText(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()),t)},f.prototype.insertText=function(e,n){l.assert(!this.ace_,"Not supported for ace yet."),l.assert(!this.monaco_,"Not supported for monaco yet."),this.assertReady_("insertText"),"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]);var r=this;r.codeMirror_.operation((function(){for(var i=0===e,o=t.textPiecesToInserts(i,n),s=0;s<o.length;s++){var a=o[s].string,c=o[s].attributes;r.richTextCodeMirror_.insertText(e,a,c),e+=a.length}}))},f.prototype.getOperationForSpan=function(e,n){for(var r=this.richTextCodeMirror_.getRange(e,n),i=this.richTextCodeMirror_.getAttributeSpans(e,n),o=0,s=new t.TextOperation,a=0;a<i.length;a++)s.insert(r.substr(o,i[a].length),i[a].attributes),o+=i[a].length;return s},f.prototype.getHtml=function(){return this.getHtmlFromRange(null,null)},f.prototype.getHtmlFromSelection=function(){var t=this.codeMirror_.getCursor("start"),e=this.codeMirror_.getCursor("end"),n=this.codeMirror_.indexFromPos(t),r=this.codeMirror_.indexFromPos(e);return this.getHtmlFromRange(n,r)},f.prototype.getHtmlFromRange=function(e,n){this.assertReady_("getHtmlFromRange");var r=null!=e&&null!=n?this.getOperationForSpan(e,n):this.getOperationForSpan(0,this.codeMirror_.getValue().length);return t.SerializeHtml(r,this.entityManager_)},f.prototype.insertHtml=function(e,n){var r=t.ParseHtml(n,this.entityManager_);this.insertText(e,r)},f.prototype.insertHtmlAtCursor=function(t){this.insertHtml(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()),t)},f.prototype.setHtml=function(e){var n=t.ParseHtml(e,this.entityManager_);this.setText(n)},f.prototype.isHistoryEmpty=function(){return this.assertReady_("isHistoryEmpty"),this.firebaseAdapter_.isHistoryEmpty()},f.prototype.bold=function(){this.richTextCodeMirror_.toggleAttribute(u.BOLD),this.codeMirror_.focus()},f.prototype.italic=function(){this.richTextCodeMirror_.toggleAttribute(u.ITALIC),this.codeMirror_.focus()},f.prototype.underline=function(){this.richTextCodeMirror_.toggleAttribute(u.UNDERLINE),this.codeMirror_.focus()},f.prototype.strike=function(){this.richTextCodeMirror_.toggleAttribute(u.STRIKE),this.codeMirror_.focus()},f.prototype.fontSize=function(t){this.richTextCodeMirror_.setAttribute(u.FONT_SIZE,t),this.codeMirror_.focus()},f.prototype.font=function(t){this.richTextCodeMirror_.setAttribute(u.FONT,t),this.codeMirror_.focus()},f.prototype.color=function(t){this.richTextCodeMirror_.setAttribute(u.COLOR,t),this.codeMirror_.focus()},f.prototype.highlight=function(){this.richTextCodeMirror_.toggleAttribute(u.BACKGROUND_COLOR,"rgba(255,255,0,.65)"),this.codeMirror_.focus()},f.prototype.align=function(t){if("left"!==t&&"center"!==t&&"right"!==t)throw new Error('align() must be passed "left", "center", or "right".');this.richTextCodeMirror_.setLineAttribute(u.LINE_ALIGN,t),this.codeMirror_.focus()},f.prototype.orderedList=function(){this.richTextCodeMirror_.toggleLineAttribute(u.LIST_TYPE,"o"),this.codeMirror_.focus()},f.prototype.unorderedList=function(){this.richTextCodeMirror_.toggleLineAttribute(u.LIST_TYPE,"u"),this.codeMirror_.focus()},f.prototype.todo=function(){this.richTextCodeMirror_.toggleTodo(),this.codeMirror_.focus()},f.prototype.newline=function(){this.richTextCodeMirror_.newline()},f.prototype.deleteLeft=function(){this.richTextCodeMirror_.deleteLeft()},f.prototype.deleteRight=function(){this.richTextCodeMirror_.deleteRight()},f.prototype.indent=function(){this.richTextCodeMirror_.indent(),this.codeMirror_.focus()},f.prototype.unindent=function(){this.richTextCodeMirror_.unindent(),this.codeMirror_.focus()},f.prototype.undo=function(){this.codeMirror_.undo()},f.prototype.redo=function(){this.codeMirror_.redo()},f.prototype.insertEntity=function(t,e,n){this.richTextCodeMirror_.insertEntityAtCursor(t,e,n)},f.prototype.insertEntityAt=function(t,e,n,r){this.richTextCodeMirror_.insertEntityAt(t,e,n,r)},f.prototype.registerEntity=function(t,e){this.entityManager_.register(t,e)},f.prototype.getOption=function(t,e){return t in this.options_?this.options_[t]:e},f.prototype.assertReady_=function(t){if(!this.ready_)throw new Error('You must wait for the "ready" event before calling '+t+".");if(this.zombie_)throw new Error("You can't use a Firepad after calling dispose()!  [called "+t+"]")},f.prototype.makeImageDialog_=function(){this.makeDialog_("img","Insert image url")},f.prototype.makeDialog_=function(t,e){var n=this,r=l.elt("input",null,{class:"firepad-dialog-input",id:t,type:"text",placeholder:e,autofocus:"autofocus"}),i=l.elt("a","Submit",{class:"firepad-btn",id:"submitbtn"});l.on(i,"click",l.stopEventAnd((function(){var e=document.getElementById("overlay");e.style.visibility="hidden";var r=document.getElementById(t).value;null!==r&&n.insertEntity(t,{src:r}),n.firepadWrapper_.removeChild(e)})));var o=l.elt("a","Cancel",{class:"firepad-btn"});l.on(o,"click",l.stopEventAnd((function(){var t=document.getElementById("overlay");t.style.visibility="hidden",n.firepadWrapper_.removeChild(t)})));var s=l.elt("div",[i,o],{class:"firepad-btn-group"}),a=l.elt("div",[r,s],{class:"firepad-dialog-div"}),c=l.elt("div",[a],{class:"firepad-dialog",id:"overlay"});this.firepadWrapper_.appendChild(c)},f.prototype.addToolbar_=function(){this.toolbar=new i(this.imageInsertionUI),this.toolbar.on("undo",this.undo,this),this.toolbar.on("redo",this.redo,this),this.toolbar.on("bold",this.bold,this),this.toolbar.on("italic",this.italic,this),this.toolbar.on("underline",this.underline,this),this.toolbar.on("strike",this.strike,this),this.toolbar.on("font-size",this.fontSize,this),this.toolbar.on("font",this.font,this),this.toolbar.on("color",this.color,this),this.toolbar.on("left",(function(){this.align("left")}),this),this.toolbar.on("center",(function(){this.align("center")}),this),this.toolbar.on("right",(function(){this.align("right")}),this),this.toolbar.on("ordered-list",this.orderedList,this),this.toolbar.on("unordered-list",this.unorderedList,this),this.toolbar.on("todo-list",this.todo,this),this.toolbar.on("indent-increase",this.indent,this),this.toolbar.on("indent-decrease",this.unindent,this),this.toolbar.on("insert-image",this.makeImageDialog_,this),this.firepadWrapper_.insertBefore(this.toolbar.element(),this.firepadWrapper_.firstChild)},f.prototype.addPoweredByLogo_=function(){var t=l.elt("a",null,{class:"powered-by-firepad"});t.setAttribute("href","http://www.firepad.io/"),t.setAttribute("target","_blank"),this.firepadWrapper_.appendChild(t)},f.prototype.initializeKeyMap_=function(){function t(t){return function(e){setTimeout((function(){t.call(e.firepad)}),0)}}e.CodeMirror.keyMap.richtext={"Ctrl-B":t(this.bold),"Cmd-B":t(this.bold),"Ctrl-I":t(this.italic),"Cmd-I":t(this.italic),"Ctrl-U":t(this.underline),"Cmd-U":t(this.underline),"Ctrl-H":t(this.highlight),"Cmd-H":t(this.highlight),Enter:t(this.newline),Delete:t(this.deleteRight),Backspace:t(this.deleteLeft),Tab:t(this.indent),"Shift-Tab":t(this.unindent),fallthrough:["default"]}},f}(this),t.Firepad.Formatting=t.Formatting,t.Firepad.Text=t.Text,t.Firepad.Entity=t.Entity,t.Firepad.LineFormatting=t.LineFormatting,t.Firepad.Line=t.Line,t.Firepad.TextOperation=t.TextOperation,t.Firepad.Headless=t.Headless,t.Firepad.RichTextCodeMirrorAdapter=t.RichTextCodeMirrorAdapter,t.Firepad.ACEAdapter=t.ACEAdapter,t.Firepad.MonacoAdapter=t.MonacoAdapter,t.Firepad},s=this,t.exports?t.exports=o():"function"==typeof s.define&&s.define.amd?void 0===(i="function"===typeof(r=o)?r.call(e,n,e,t):r)||(t.exports=i):s.Firepad=o()},32099:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(95278);e.Observable=r.Observable},78390:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(95278);e.Subscription=r.Subscription},95100:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(32099))},84859:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(78390))},95278:function(t,e,n){"use strict";n.r(e),n.d(e,{ArgumentOutOfRangeError:function(){return st},AsyncSubject:function(){return H},BehaviorSubject:function(){return C},ConnectableObservable:function(){return m},EMPTY:function(){return L},EmptyError:function(){return at},GroupedObservable:function(){return y},NEVER:function(){return zt},Notification:function(){return F},NotificationKind:function(){return k},ObjectUnsubscribedError:function(){return a},Observable:function(){return r.y},ReplaySubject:function(){return B},Scheduler:function(){return et.b},Subject:function(){return h},Subscriber:function(){return o.L},Subscription:function(){return s.w},TimeoutError:function(){return ut},UnsubscriptionError:function(){return ct.B},VirtualAction:function(){return tt},VirtualTimeScheduler:function(){return $},animationFrameScheduler:function(){return Q},asapScheduler:function(){return G},asyncScheduler:function(){return X.P},bindCallback:function(){return pt},bindNodeCallback:function(){return gt},combineLatest:function(){return _t},concat:function(){return kt},config:function(){return be.v},defer:function(){return Mt},empty:function(){return T},forkJoin:function(){return Ot},from:function(){return It.D},fromEvent:function(){return Ft},fromEventPattern:function(){return Dt},generate:function(){return Bt},identity:function(){return it.y},iif:function(){return Ht},interval:function(){return Vt},isObservable:function(){return ot},merge:function(){return Kt},never:function(){return Yt},noop:function(){return rt},observable:function(){return x.L},of:function(){return O},onErrorResumeNext:function(){return Zt},pairs:function(){return Gt},partition:function(){return ne},pipe:function(){return nt.z},queueScheduler:function(){return E},race:function(){return re},range:function(){return se},scheduled:function(){return ye.x},throwError:function(){return P},timer:function(){return ce},using:function(){return le},zip:function(){return fe}});var r=n(92772),i=n(70655),o=n(10979),s=n(98760),a=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),c=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return i.ZT(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(s.w),u=n(23142),l=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return i.ZT(e,t),e}(o.L),h=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i.ZT(e,t),e.prototype[u.b]=function(){return new l(this)},e.prototype.lift=function(t){var e=new f(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new a;return this.hasError?(t.error(this.thrownError),s.w.EMPTY):this.isStopped?(t.complete(),s.w.EMPTY):(this.observers.push(t),new c(this,t))},e.prototype.asObservable=function(){var t=new r.y;return t.source=this,t},e.create=function(t,e){return new f(t,e)},e}(r.y),f=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return i.ZT(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.w.EMPTY},e}(h);var p=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new d(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),d=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i.ZT(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(o.L),m=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i.ZT(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new s.w).add(this.source.subscribe(new g(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.w.EMPTY)),t},e.prototype.refCount=function(){return(t=this).lift(new p(t));var t},e}(r.y),g=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i.ZT(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(l);o.L;o.L;var v=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.key=e,i.group=n,i.parent=r,i}return i.ZT(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(o.L),y=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return i.ZT(e,t),e.prototype._subscribe=function(t){var e=new s.w,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new b(n)),e.add(r.subscribe(t)),e},e}(r.y),b=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return i.ZT(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(s.w),x=n(15050),C=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return i.ZT(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(h),w=n(96114),_=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i.ZT(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(w.o),S=n(78399),E=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.ZT(e,t),e}(S.v))(_),L=new r.y((function(t){return t.complete()}));function T(t){return t?function(t){return new r.y((function(e){return t.schedule((function(){return e.complete()}))}))}(t):L}function A(t){return t&&"function"===typeof t.schedule}var k,I=n(56900),M=n(53109);function N(t,e){return e?(0,M.r)(t,e):new r.y((0,I.V)(t))}function O(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return A(n)?(t.pop(),(0,M.r)(t,n)):N(t)}function P(t,e){return e?new r.y((function(n){return e.schedule(R,0,{error:t,subscriber:n})})):new r.y((function(e){return e.error(t)}))}function R(t){var e=t.error;t.subscriber.error(e)}k||(k={});var F=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"===typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return O(this.value);case"E":return P(this.error);case"C":return T()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return"undefined"!==typeof e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();var j=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return i.ZT(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new D(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(F.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(F.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(F.createComplete()),this.unsubscribe()},e}(o.L),D=function(){return function(t,e){this.notification=t,this.destination=e}}(),B=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i.ZT(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new U(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new a;if(this.isStopped||this.hasError?e=s.w.EMPTY:(this.observers.push(t),e=new c(this,t)),i&&t.add(t=new j(t,i)),n)for(var u=0;u<o&&!t.closed;u++)t.next(r[u]);else for(u=0;u<o&&!t.closed;u++)t.next(r[u].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||E).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(h),U=function(){return function(t,e){this.time=t,this.value=e}}(),H=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return i.ZT(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),s.w.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(h),W=1,V=function(){return Promise.resolve()}(),q={};function K(t){return t in q&&(delete q[t],!0)}var z=function(t){var e=W++;return q[e]=!0,V.then((function(){return K(e)&&t()})),e},Y=function(t){K(t)},Z=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i.ZT(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=z(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(Y(n),e.scheduled=void 0)},e}(w.o),G=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.ZT(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(S.v))(Z),X=n(90964),J=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i.ZT(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame((function(){return e.flush(null)}))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(w.o),Q=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.ZT(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(S.v))(J),$=function(t){function e(e,n){void 0===e&&(e=tt),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return i.ZT(e,t),e.prototype.flush=function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n[0])&&e.delay<=r&&(n.shift(),this.frame=e.delay,!(t=e.execute(e.state,e.delay))););if(t){for(;e=n.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(S.v),tt=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1);var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.index=r,i.active=!0,i.index=e.index=r,i}return i.ZT(e,t),e.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(w.o),et=n(38725),nt=n(62561);function rt(){}var it=n(43608);function ot(t){return!!t&&(t instanceof r.y||"function"===typeof t.lift&&"function"===typeof t.subscribe)}var st=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),at=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),ct=n(28782),ut=function(){function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t}(),lt=n(55709),ht=n(93642),ft=n(59026);function pt(t,e,n){if(e){if(!A(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return pt(t,n).apply(void 0,r).pipe((0,lt.U)((function(t){return(0,ft.k)(t)?e.apply(void 0,t):e(t)})))};n=e}return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o,s=this,a={context:s,subject:o,callbackFunc:t,scheduler:n};return new r.y((function(r){if(n){var i={args:e,subscriber:r,params:a};return n.schedule(dt,0,i)}if(!o){o=new H;try{t.apply(s,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.next(t.length<=1?t[0]:t),o.complete()}]))}catch(c){(0,ht._)(o)?o.error(c):console.warn(c)}}return o.subscribe(r)}))}}function dt(t){var e=this,n=t.args,r=t.subscriber,i=t.params,o=i.callbackFunc,s=i.context,a=i.scheduler,c=i.subject;if(!c){c=i.subject=new H;try{o.apply(s,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length<=1?t[0]:t;e.add(a.schedule(mt,0,{value:r,subject:c}))}]))}catch(u){c.error(u)}}this.add(c.subscribe(r))}function mt(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function gt(t,e,n){if(e){if(!A(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return gt(t,n).apply(void 0,r).pipe((0,lt.U)((function(t){return(0,ft.k)(t)?e.apply(void 0,t):e(t)})))};n=e}return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new r.y((function(r){var i=o.context,s=o.subject;if(n)return n.schedule(vt,0,{params:o,subscriber:r,context:i});if(!s){s=o.subject=new H;try{t.apply(i,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();n?s.error(n):(s.next(t.length<=1?t[0]:t),s.complete())}]))}catch(a){(0,ht._)(s)?s.error(a):console.warn(a)}}return s.subscribe(r)}))}}function vt(t){var e=this,n=t.params,r=t.subscriber,i=t.context,o=n.callbackFunc,s=n.args,a=n.scheduler,c=n.subject;if(!c){c=n.subject=new H;try{o.apply(i,s.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.shift();if(r)e.add(a.schedule(bt,0,{err:r,subject:c}));else{var i=t.length<=1?t[0]:t;e.add(a.schedule(yt,0,{value:i,subject:c}))}}]))}catch(u){this.add(a.schedule(bt,0,{err:u,subject:c}))}}this.add(c.subscribe(r))}function yt(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function bt(t){var e=t.err;t.subject.error(e)}var xt=n(62039),Ct=n(47407),wt={};function _t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return A(t[t.length-1])&&(r=t.pop()),"function"===typeof t[t.length-1]&&(n=t.pop()),1===t.length&&(0,ft.k)(t[0])&&(t=t[0]),N(t,r).lift(new St(n))}var St=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Et(t,this.resultSelector))},t}(),Et=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return i.ZT(e,t),e.prototype._next=function(t){this.values.push(wt),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add((0,Ct.D)(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0===(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,s=o[n],a=this.toRespond?s===wt?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(xt.L),Lt=n(47746);function Tt(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),(0,Lt.zg)(it.y,t)}function At(){return Tt(1)}function kt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return At()(O.apply(void 0,t))}var It=n(55760);function Mt(t){return new r.y((function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,It.D)(n):T()).subscribe(e)}))}var Nt=n(92009);function Ot(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){var n=t[0];if((0,ft.k)(n))return Pt(n,null);if((0,Nt.K)(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return Pt(r.map((function(t){return n[t]})),r)}}if("function"===typeof t[t.length-1]){var i=t.pop();return Pt(t=1===t.length&&(0,ft.k)(t[0])?t[0]:t,null).pipe((0,lt.U)((function(t){return i.apply(void 0,t)})))}return Pt(t,null)}function Pt(t,e){return new r.y((function(n){var r=t.length;if(0!==r)for(var i=new Array(r),o=0,s=0,a=function(a){var c=(0,It.D)(t[a]),u=!1;n.add(c.subscribe({next:function(t){u||(u=!0,s++),i[a]=t},error:function(t){return n.error(t)},complete:function(){++o!==r&&u||(s===r&&n.next(e?e.reduce((function(t,e,n){return t[e]=i[n],t}),{}):i),n.complete())}}))},c=0;c<r;c++)a(c);else n.complete()}))}var Rt=n(14156);function Ft(t,e,n,i){return(0,Rt.m)(n)&&(i=n,n=void 0),i?Ft(t,e,n).pipe((0,lt.U)((function(t){return(0,ft.k)(t)?i.apply(void 0,t):i(t)}))):new r.y((function(r){jt(t,e,(function(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)}),r,n)}))}function jt(t,e,n,r,i){var o;if(function(t){return t&&"function"===typeof t.addEventListener&&"function"===typeof t.removeEventListener}(t)){var s=t;t.addEventListener(e,n,i),o=function(){return s.removeEventListener(e,n,i)}}else if(function(t){return t&&"function"===typeof t.on&&"function"===typeof t.off}(t)){var a=t;t.on(e,n),o=function(){return a.off(e,n)}}else if(function(t){return t&&"function"===typeof t.addListener&&"function"===typeof t.removeListener}(t)){var c=t;t.addListener(e,n),o=function(){return c.removeListener(e,n)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var u=0,l=t.length;u<l;u++)jt(t[u],e,n,r,i)}r.add(o)}function Dt(t,e,n){return n?Dt(t,e).pipe((0,lt.U)((function(t){return(0,ft.k)(t)?n.apply(void 0,t):n(t)}))):new r.y((function(n){var r,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(i)}catch(o){return void n.error(o)}if((0,Rt.m)(e))return function(){return e(i,r)}}))}function Bt(t,e,n,i,o){var s,a;if(1==arguments.length){var c=t;a=c.initialState,e=c.condition,n=c.iterate,s=c.resultSelector||it.y,o=c.scheduler}else void 0===i||A(i)?(a=t,s=it.y,o=i):(a=t,s=i);return new r.y((function(t){var r=a;if(o)return o.schedule(Ut,0,{subscriber:t,iterate:n,condition:e,resultSelector:s,state:r});for(;;){if(e){var i=void 0;try{i=e(r)}catch(u){return void t.error(u)}if(!i){t.complete();break}}var c=void 0;try{c=s(r)}catch(u){return void t.error(u)}if(t.next(c),t.closed)break;try{r=n(r)}catch(u){return void t.error(u)}}}))}function Ut(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(o){return void e.error(o)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(o){return void e.error(o)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(o){return void e.error(o)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}function Ht(t,e,n){return void 0===e&&(e=L),void 0===n&&(n=L),Mt((function(){return t()?e:n}))}function Wt(t){return!(0,ft.k)(t)&&t-parseFloat(t)+1>=0}function Vt(t,e){return void 0===t&&(t=0),void 0===e&&(e=X.P),(!Wt(t)||t<0)&&(t=0),e&&"function"===typeof e.schedule||(e=X.P),new r.y((function(n){return n.add(e.schedule(qt,t,{subscriber:n,counter:0,period:t})),n}))}function qt(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}function Kt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,i=null,o=t[t.length-1];return A(o)?(i=t.pop(),t.length>1&&"number"===typeof t[t.length-1]&&(n=t.pop())):"number"===typeof o&&(n=t.pop()),null===i&&1===t.length&&t[0]instanceof r.y?t[0]:Tt(n)(N(t,i))}var zt=new r.y(rt);function Yt(){return zt}function Zt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return L;var n=t[0],i=t.slice(1);return 1===t.length&&(0,ft.k)(n)?Zt.apply(void 0,n):new r.y((function(t){var e=function(){return t.add(Zt.apply(void 0,i).subscribe(t))};return(0,It.D)(n).subscribe({next:function(e){t.next(e)},error:e,complete:e})}))}function Gt(t,e){return e?new r.y((function(n){var r=Object.keys(t),i=new s.w;return i.add(e.schedule(Xt,0,{keys:r,index:0,subscriber:n,subscription:i,obj:t})),i})):new r.y((function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()}))}function Xt(t){var e=t.keys,n=t.index,r=t.subscriber,i=t.subscription,o=t.obj;if(!r.closed)if(n<e.length){var s=e[n];r.next([s,o[s]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}function Jt(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}var Qt=n(67843);function $t(t,e){return function(n){return n.lift(new te(t,e))}}var te=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new ee(t,this.predicate,this.thisArg))},t}(),ee=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return i.ZT(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)},e}(o.L);function ne(t,e,n){return[$t(e,n)(new r.y((0,Qt.s)(t))),$t(Jt(e,n))(new r.y((0,Qt.s)(t)))]}function re(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!(0,ft.k)(t[0]))return t[0];t=t[0]}return N(t,void 0).lift(new ie)}var ie=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new oe(t))},t}(),oe=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i.ZT(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=(0,Ct.D)(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},e}(xt.L);function se(t,e,n){return void 0===t&&(t=0),new r.y((function(r){void 0===e&&(e=t,t=0);var i=0,o=t;if(n)return n.schedule(ae,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}}))}function ae(t){var e=t.start,n=t.index,r=t.count,i=t.subscriber;n>=r?i.complete():(i.next(e),i.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}function ce(t,e,n){void 0===t&&(t=0);var i=-1;return Wt(e)?i=Number(e)<1?1:Number(e):A(e)&&(n=e),A(n)||(n=X.P),new r.y((function(e){var r=Wt(t)?t:+t-n.now();return n.schedule(ue,r,{index:0,period:i,subscriber:e})}))}function ue(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function le(t,e){return new r.y((function(n){var r,i;try{r=t()}catch(s){return void n.error(s)}try{i=e(r)}catch(s){return void n.error(s)}var o=(i?(0,It.D)(i):L).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))}var he=n(999);function fe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"===typeof n&&t.pop(),N(t,void 0).lift(new pe(n))}var pe=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new de(t,this.resultSelector))},t}(),de=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"===typeof n?n:null,i.values=r,i}return i.ZT(e,t),e.prototype._next=function(t){var e=this.iterators;(0,ft.k)(t)?e.push(new ge(t)):"function"===typeof t[he.hZ]?e.push(new me(t[he.hZ]())):e.push(new ve(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe(r,n));else this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){if("function"===typeof(s=t[r]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(r=0;r<e;r++){var s,a=(s=t[r]).next();if(s.hasCompleted()&&(i=!0),a.done)return void n.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(o.L),me=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),ge=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[he.hZ]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),ve=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i.ZT(e,t),e.prototype[he.hZ]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return(0,Ct.D)(this,this.observable,this,e)},e}(xt.L),ye=n(38107),be=n(30150)},81112:function(t,e,n){"use strict";n.d(e,{d:function(){return i}});var r=n(70655),i=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.ZT(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n(10979).L)},92772:function(t,e,n){"use strict";n.d(e,{y:function(){return l}});var r=n(93642),i=n(10979),o=n(23142),s=n(32174);var a=n(15050),c=n(62561),u=n(30150),l=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,a=function(t,e,n){if(t){if(t instanceof i.L)return t;if(t[o.b])return t[o.b]()}return t||e||n?new i.L(t,e,n):new i.L(s.c)}(t,e,n);if(r?a.add(r.call(a,this.source)):a.add(this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),(0,r._)(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=h(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}}),r,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[a.L]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:(0,c.U)(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=h(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function h(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},32174:function(t,e,n){"use strict";n.d(e,{c:function(){return o}});var r=n(30150),i=n(71644),o={closed:!0,next:function(t){},error:function(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete:function(){}}},62039:function(t,e,n){"use strict";n.d(e,{L:function(){return i}});var r=n(70655),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.ZT(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n(10979).L)},38725:function(t,e,n){"use strict";n.d(e,{b:function(){return r}});var r=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}()},10979:function(t,e,n){"use strict";n.d(e,{L:function(){return l}});var r=n(70655),i=n(14156),o=n(32174),s=n(98760),a=n(23142),c=n(30150),u=n(71644),l=function(t){function e(n,r,i){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=o.c;break;case 1:if(!n){s.destination=o.c;break}if("object"===typeof n){n instanceof e?(s.syncErrorThrowable=n.syncErrorThrowable,s.destination=n,n.add(s)):(s.syncErrorThrowable=!0,s.destination=new h(s,n));break}default:s.syncErrorThrowable=!0,s.destination=new h(s,n,r,i)}return s}return r.ZT(e,t),e.prototype[a.b]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(s.w),h=function(t){function e(e,n,r,s){var a,c=t.call(this)||this;c._parentSubscriber=e;var u=c;return(0,i.m)(n)?a=n:n&&(a=n.next,r=n.error,s=n.complete,n!==o.c&&(u=Object.create(n),(0,i.m)(u.unsubscribe)&&c.add(u.unsubscribe.bind(u)),u.unsubscribe=c.unsubscribe.bind(c))),c._context=u,c._next=a,c._error=r,c._complete=s,c}return r.ZT(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;c.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=c.v.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};c.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),c.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}},e.prototype.__tryOrSetError=function(t,e,n){if(!c.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return c.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(l)},98760:function(t,e,n){"use strict";n.d(e,{w:function(){return a}});var r=n(59026),i=n(92009),o=n(14156),s=n(28782),a=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this,a=n._parentOrParents,u=n._unsubscribe,l=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,a instanceof t)a.remove(this);else if(null!==a)for(var h=0;h<a.length;++h){a[h].remove(this)}if((0,o.m)(u))try{u.call(this)}catch(d){e=d instanceof s.B?c(d.errors):[d]}if((0,r.k)(l)){h=-1;for(var f=l.length;++h<f;){var p=l[h];if((0,i.K)(p))try{p.unsubscribe()}catch(d){e=e||[],d instanceof s.B?e=e.concat(c(d.errors)):e.push(d)}}}if(e)throw new s.B(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!==typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=((e=new t).closed=!0,e),t}();function c(t){return t.reduce((function(t,e){return t.concat(e instanceof s.B?e.errors:e)}),[])}},30150:function(t,e,n){"use strict";n.d(e,{v:function(){return i}});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},55760:function(t,e,n){"use strict";n.d(e,{D:function(){return s}});var r=n(92772),i=n(67843),o=n(38107);function s(t,e){return e?(0,o.x)(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},55709:function(t,e,n){"use strict";n.d(e,{U:function(){return o}});var r=n(70655),i=n(10979);function o(t,e){return function(n){if("function"!==typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}var s=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.ZT(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(i.L)},47746:function(t,e,n){"use strict";n.d(e,{zg:function(){return u}});var r=n(70655),i=n(47407),o=n(62039),s=n(81112),a=n(55709),c=n(55760);function u(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"===typeof e?function(r){return r.pipe(u((function(n,r){return(0,c.D)(t(n,r)).pipe((0,a.U)((function(t,i){return e(n,t,r,i)})))}),n))}:("number"===typeof e&&(n=e),function(e){return e.lift(new l(t,n))})}var l=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.project,this.concurrent))},t}(),h=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r.ZT(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new s.d(this,e,n),o=this.destination;o.add(r);var a=(0,i.D)(this,t,void 0,void 0,r);a!==r&&o.add(a)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.L)},74825:function(t,e,n){"use strict";n.d(e,{p:function(){return u}});var r=n(70655),i=n(10979),o=n(90964),s=n(62039),a=n(47407),c={leading:!0,trailing:!1};s.L;function u(t,e,n){return void 0===e&&(e=o.P),void 0===n&&(n=c),function(r){return r.lift(new l(t,e,n.leading,n.trailing))}}var l=function(){function t(t,e,n,r){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),h=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.duration=n,s.scheduler=r,s.leading=i,s.trailing=o,s._hasTrailingValue=!1,s._trailingValue=null,s}return r.ZT(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(f,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(i.L);function f(t){t.subscriber.clearThrottle()}},53109:function(t,e,n){"use strict";n.d(e,{r:function(){return o}});var r=n(92772),i=n(98760);function o(t,e){return new r.y((function(n){var r=new i.w,o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}},38107:function(t,e,n){"use strict";n.d(e,{x:function(){return l}});var r=n(92772),i=n(98760),o=n(15050);var s=n(53109),a=n(999);var c=n(70336),u=n(39217);function l(t,e){if(null!=t){if(function(t){return t&&"function"===typeof t[o.L]}(t))return function(t,e){return new r.y((function(n){var r=new i.w;return r.add(e.schedule((function(){var i=t[o.L]();r.add(i.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}))}(t,e);if((0,c.t)(t))return function(t,e){return new r.y((function(n){var r=new i.w;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}))}(t,e);if((0,u.z)(t))return(0,s.r)(t,e);if(function(t){return t&&"function"===typeof t[a.hZ]}(t)||"string"===typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y((function(n){var r,o=new i.w;return o.add((function(){r&&"function"===typeof r.return&&r.return()})),o.add(e.schedule((function(){r=t[a.hZ](),o.add(e.schedule((function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}})))}))),o}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}},96114:function(t,e,n){"use strict";n.d(e,{o:function(){return i}});var r=n(70655),i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.ZT(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.ZT(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(98760).w))},78399:function(t,e,n){"use strict";n.d(e,{v:function(){return o}});var r=n(70655),i=n(38725),o=function(t){function e(n,r){void 0===r&&(r=i.b.now);var o=t.call(this,n,(function(){return e.delegate&&e.delegate!==o?e.delegate.now():r()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.ZT(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(i.b)},90964:function(t,e,n){"use strict";n.d(e,{P:function(){return i}});var r=n(96114),i=new(n(78399).v)(r.o)},999:function(t,e,n){"use strict";function r(){return"function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,{hZ:function(){return i}});var i=r()},15050:function(t,e,n){"use strict";n.d(e,{L:function(){return r}});var r=function(){return"function"===typeof Symbol&&Symbol.observable||"@@observable"}()},23142:function(t,e,n){"use strict";n.d(e,{b:function(){return r}});var r=function(){return"function"===typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},28782:function(t,e,n){"use strict";n.d(e,{B:function(){return r}});var r=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}()},93642:function(t,e,n){"use strict";n.d(e,{_:function(){return i}});var r=n(10979);function i(t){for(;t;){var e=t,n=e.closed,i=e.destination,o=e.isStopped;if(n||o)return!1;t=i&&i instanceof r.L?i:null}return!0}},71644:function(t,e,n){"use strict";function r(t){setTimeout((function(){throw t}),0)}n.d(e,{z:function(){return r}})},43608:function(t,e,n){"use strict";function r(t){return t}n.d(e,{y:function(){return r}})},59026:function(t,e,n){"use strict";n.d(e,{k:function(){return r}});var r=function(){return Array.isArray||function(t){return t&&"number"===typeof t.length}}()},39217:function(t,e,n){"use strict";n.d(e,{z:function(){return r}});var r=function(t){return t&&"number"===typeof t.length&&"function"!==typeof t}},14156:function(t,e,n){"use strict";function r(t){return"function"===typeof t}n.d(e,{m:function(){return r}})},92009:function(t,e,n){"use strict";function r(t){return null!==t&&"object"===typeof t}n.d(e,{K:function(){return r}})},70336:function(t,e,n){"use strict";function r(t){return!!t&&"function"!==typeof t.subscribe&&"function"===typeof t.then}n.d(e,{t:function(){return r}})},62561:function(t,e,n){"use strict";n.d(e,{z:function(){return i},U:function(){return o}});var r=n(43608);function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(t)}function o(t){return 0===t.length?r.y:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}},67843:function(t,e,n){"use strict";n.d(e,{s:function(){return l}});var r=n(56900),i=n(71644),o=n(999),s=n(15050),a=n(39217),c=n(70336),u=n(92009),l=function(t){if(t&&"function"===typeof t[s.L])return l=t,function(t){var e=l[s.L]();if("function"!==typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,c.t)(t))return n=t,function(t){return n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,i.z),t};if(t&&"function"===typeof t[o.hZ])return e=t,function(t){for(var n=e[o.hZ]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"===typeof n.return&&t.add((function(){n.return&&n.return()})),t};var e,n,l,h=(0,u.K)(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+h+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},56900:function(t,e,n){"use strict";n.d(e,{V:function(){return r}});var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}}},47407:function(t,e,n){"use strict";n.d(e,{D:function(){return s}});var r=n(81112),i=n(67843),o=n(92772);function s(t,e,n,s,a){if(void 0===a&&(a=new r.d(t,n,s)),!a.closed)return e instanceof o.y?e.subscribe(a):(0,i.s)(e)(a)}},46766:function(t,e,n){var r=n(95100).Observable,i=n(84859).Subscription;function o(){r.call(this,(function(e){t._observer=e;for(;t._observerCalls.length;){var n=t._observerCalls.shift();e[n.method].apply(e,n.args)}return new i((()=>{this._observer={next:()=>{},error:()=>{},complete:()=>{}}}))}));var t=this;this._observer=null,this._observerCalls=[]}function s(t){return function(){var e=this._observer;return e?e[t].apply(e,arguments):this._observerCalls.push({method:t,args:Array.prototype.slice.call(arguments)}),this}}t.exports=o,o.next=function(){var t=new o;return t.next.apply(t,arguments)},o.error=function(){var t=new o;return t.error.apply(t,arguments)},o.complete=function(){var t=new o;return t.complete.apply(t,arguments)},o.prototype=Object.create(r.prototype),o.prototype.next=s("next"),o.prototype.error=s("error"),o.prototype.complete=s("complete")},19920:function(t,e,n){var r=n(15845);t.exports=function(t){var e,n=new r((function(n){e=setTimeout(n,t||0)}));return n.clear=function(){return clearTimeout(e)},n}},70655:function(t,e,n){"use strict";n.d(e,{ZT:function(){return i}});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}}]);