(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{40929:function(e){function n(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}n.keys=function(){return[]},n.resolve=n,n.id=40929,e.exports=n},88986:function(e,n,a){"use strict";a.d(n,{Z:function(){return f}});a(57327),a(54747),a(49337);var r=a(4942),s=a(44925);const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PlansButton_me",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareProModal_me"}],type:"Me",abstractKey:null,hash:"2b27f7dc84ef4f6695b151da7adf33a9"};var t=l,o=a(74579),i=a(67294),d=a(67912),u=a(88575),c=a(67814),m=a(51436),g=a(85893);const h=["me","children","locationDesc","noIcon"];function p(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?p(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}var f=e=>{const n=e.me,a=e.children,r=e.locationDesc,l=e.noIcon,p=(0,s.Z)(e,h),f=(0,i.useState)(!1),k=f[0],b=f[1],C=(0,d.useFragment)(t,n);return(0,g.jsxs)(i.Fragment,{children:[(0,g.jsxs)(o.ZP,y(y({},p),{},{onClick:e=>{e.stopPropagation(),e.preventDefault(),b(!0)},children:[l?null:(0,g.jsx)(c.G,{icon:m.Tab}),l?null:" ",a]})),k?(0,g.jsx)(u.Z,{trigger:"plans-button-".concat(r),me:C,onClose:()=>b(!1)}):null]})}},88575:function(e,n,a){"use strict";a.d(n,{Z:function(){return p}});const r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareProModal_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodesharePlans_codeshare"}],type:"Codeshare",abstractKey:null,hash:"df28057b69c7076a2fff28724aca8771"};var s=r;const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareProModal_me",selections:[{args:null,kind:"FragmentSpread",name:"CodesharePlans_me"}],type:"Me",abstractKey:null,hash:"8e0fb67fd71f7761da7bac07bc0ff201"};var t=l,o=a(75312),i=a(67814),d=a(57243),u=a(51436),c=a(85893);var m=e=>(0,c.jsx)(d.Z,{name:e.name,children:(0,c.jsxs)("div",{className:"modal full",onClick:e=>e.stopPropagation(),onKeyDown:n=>{"Escape"===n.key&&e.onClose()},children:[(0,c.jsx)("button",{className:"btn btn-icon btn-icon-lg modal__close",onClick:()=>e.onClose(),children:(0,c.jsx)(i.G,{icon:u.NBC})}),e.renderContent?e.renderContent({onClose:e.onClose}):null]})}),g=a(30924),h=a(67912);function p(e){const n=(0,h.useFragment)(t,e.me),a=e.codeshare?(0,h.useFragment)(s,e.codeshare):void 0;return(0,c.jsx)(m,{name:"codeshare-pro-modal",onClose:e.onClose,renderContent:()=>(g.Z.track("Open PRO info modal",{trigger:e.trigger}),(0,c.jsx)(o.Z,{trigger:e.trigger,me:n,codeshare:a,onSuccess:e.onClose}))})}},2655:function(e,n){"use strict";n.Z=["2","4","6","8"]},77269:function(e,n,a){"use strict";a.r(n);var r;a(15306);n.default=(r=function(e,n){e.modeURL||(e.modeURL="../mode/%N/%N.js");var a={};function r(n,a){var r=e.modes[n].dependencies;if(!r)return a();for(var s=[],l=0;l<r.length;++l)e.modes.hasOwnProperty(r[l])||s.push(r[l]);if(!s.length)return a();var t=function(e,n){var a=n;return function(){0==--a&&e()}}(a,s.length);for(l=0;l<s.length;++l)e.requireMode(s[l],t)}e.requireMode=function(n,s){if("string"!=typeof n&&(n=n.name),e.modes.hasOwnProperty(n))return r(n,s);if(a.hasOwnProperty(n))return a[n].push(s);var l=e.modeURL.replace(/%N/g,n),t=document.createElement("script");t.src=l;var o=document.getElementsByTagName("script")[0],i=a[n]=[s];e.on(t,"load",(function(){r(n,(function(){for(var e=0;e<i.length;++e)i[e]()}))})),o.parentNode.insertBefore(t,o)},e.autoLoadMode=function(n,a){e.modes.hasOwnProperty(a)||e.requireMode(a,(function(){n.setOption("mode",n.getOption("mode"))}))}},void("object"==typeof exports?r(a(4631)):"function"==typeof define&&a.amdO?define(["codemirror"],(function(e){r(e)})):r(CodeMirror)))},94939:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return Zs}});a(57327),a(54747),a(49337);var r=a(4942),s=a(15861),l=(a(4723),a(87757)),t=a.n(l);const o=function(){var e={defaultValue:null,kind:"LocalArgument",name:"codeHistoryAfter"},n={defaultValue:null,kind:"LocalArgument",name:"codeHistoryFirst"},a={defaultValue:null,kind:"LocalArgument",name:"codeshareId"},r={defaultValue:null,kind:"LocalArgument",name:"codeshareUsersAfter"},s={defaultValue:null,kind:"LocalArgument",name:"codeshareUsersFirst"},l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},d=[{kind:"Variable",name:"id",variableName:"codeshareId"}],u={alias:null,args:[{kind:"Literal",name:"first",value:100}],concreteType:"SubscriptionPlanConnection",kind:"LinkedField",name:"subscriptionPlans",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlanConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"planId",storageKey:null},l],storageKey:null}],storageKey:null}],storageKey:"subscriptionPlans(first:100)"},c={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"historyId",storageKey:null},y={alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[m,g,{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null}],storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},k=[{kind:"Variable",name:"after",variableName:"codeHistoryAfter"},{kind:"Variable",name:"first",variableName:"codeHistoryFirst"}],b={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},C={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null},F=[{kind:"Variable",name:"after",variableName:"codeshareUsersAfter"},{kind:"Variable",name:"first",variableName:"codeshareUsersFirst"}],S=[g,m];return{fragment:{argumentDefinitions:[e,n,a,r,s],kind:"Fragment",metadata:null,name:"CodeshareIdQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[l,t,o,i],storageKey:null},{args:null,kind:"FragmentSpread",name:"CodesharePage_viewer"}],storageKey:null},{alias:null,args:d,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[l,{args:null,kind:"FragmentSpread",name:"CodesharePage_codeshare"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,e,n,s,r],kind:"Operation",name:"CodeshareIdQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[l,t,o,i,{alias:null,args:null,concreteType:"UserSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"theme",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"keymap",storageKey:null}],storageKey:null},u],storageKey:null}],storageKey:null},{alias:null,args:d,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[l,c,{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[u,l,{alias:null,args:null,kind:"ScalarField",name:"companyImage",storageKey:null},i,t],storageKey:null},m,g],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[m,{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modeName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tabSize",storageKey:null},{alias:null,args:null,concreteType:"CodeCheckpoint",kind:"LinkedField",name:"codeCheckpoint",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"codeHistoryId",storageKey:null},h,{alias:null,args:null,concreteType:"CodeHistoryEdge",kind:"LinkedField",name:"codeHistoryEdge",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[l,p,h,c,y],storageKey:null},f],storageKey:null}],storageKey:null},{alias:null,args:k,concreteType:"CodeHistoryConnection",kind:"LinkedField",name:"codeHistory",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistoryConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[l,p,h,c,y,b],storageKey:null},f],storageKey:null},C],storageKey:null},{alias:null,args:k,filters:null,handle:"connection",key:"Codeshare_codeHistory",kind:"LinkedHandle",name:"codeHistory"},{alias:null,args:F,concreteType:"CodeshareUsersConnection",kind:"LinkedField",name:"users",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeshareUserConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"CodeshareUser",kind:"LinkedField",name:"node",plural:!1,selections:[l,c,{alias:null,args:null,kind:"ScalarField",name:"modifiedAt",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:S,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,concreteType:"CursorType",kind:"LinkedField",name:"cursor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"position",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectionEnd",storageKey:null}],storageKey:null},b],storageKey:null},f],storageKey:null},C],storageKey:null},{alias:null,args:F,filters:[],handle:"connection",key:"Codeshare_users",kind:"LinkedHandle",name:"users"},{alias:null,args:null,concreteType:"ModifiedBy",kind:"LinkedField",name:"modifiedBy",plural:!1,selections:S,storageKey:null}],storageKey:null}]},params:{cacheID:"eee6e3706831c0258348ec4020e8fd37",id:null,metadata:{},name:"CodeshareIdQuery",operationKind:"query",text:"query CodeshareIdQuery(\n  $codeshareId: String!\n  $codeHistoryAfter: String\n  $codeHistoryFirst: Int!\n  $codeshareUsersFirst: Int!\n  $codeshareUsersAfter: String\n) {\n  viewer {\n    me {\n      id\n      anonymous\n      email\n      name\n    }\n    ...CodesharePage_viewer\n  }\n  codeshare(id: $codeshareId) {\n    id\n    ...CodesharePage_codeshare\n  }\n}\n\nfragment AuthUserNavbar_me on Me {\n  anonymous\n  name\n  email\n  ...Gravatar_me\n}\n\nfragment CodeMirrorCursor_codeshare on Codeshare {\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareCodeMirror_codeshare on Codeshare {\n  ...useCodeshareModeName_codeshare\n  ...useCodeshareTabSize_codeshare\n  ...CodeMirrorCursor_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareCodeMirror_me on Me {\n  id\n  ...useTheme_me\n  ...useKeymap_me\n}\n\nfragment CodeshareDownloadButton_codeshare on Codeshare {\n  title\n  createdAt\n  modeName\n}\n\nfragment CodeshareEditor_codeshare on Codeshare {\n  ...CodeshareFirepad_codeshare\n}\n\nfragment CodeshareEditor_me on Me {\n  ...CodeshareFirepad_me\n}\n\nfragment CodeshareFirepad_codeshare on Codeshare {\n  id\n  ...CodeshareCodeMirror_codeshare\n  ...useCodeshareCodeHistories_codeshare\n  ...useCodeshareUsers_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareFirepad_me on Me {\n  id\n  ...CodeshareCodeMirror_me\n}\n\nfragment CodeshareHead_codeshare on Codeshare {\n  ...CodeshareLazyHead_codeshare\n}\n\nfragment CodeshareHead_me on Me {\n  ...CodeshareLazyHead_me\n  ...useKeymap_me\n}\n\nfragment CodeshareKeymapFormField_me on Me {\n  ...useKeymap_me\n}\n\nfragment CodeshareLazyHead_codeshare on Codeshare {\n  createdAt\n  title\n}\n\nfragment CodeshareLazyHead_me on Me {\n  ...useTheme_me\n}\n\nfragment CodeshareModeNameFormField_codeshare on Codeshare {\n  ...useCodeshareModeName_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareNavbar_codeshare on Codeshare {\n  id\n  createdBy {\n    me\n    user {\n      companyImage\n      id\n    }\n  }\n  title\n  createdAt\n  ...CodeshareShareButton_codeshare\n  ...CodeshareShareModal_codeshare\n}\n\nfragment CodeshareNavbar_me on Me {\n  anonymous\n  ...UserNavbar_me\n  ...CodeshareShareModal_me\n  ...PlansButton_me\n  ...isCodeshareProSubscriber_me\n}\n\nfragment CodesharePage_codeshare on Codeshare {\n  createdAt\n  createdBy {\n    user {\n      ...isCodeshareProSubscriber_user\n      id\n    }\n  }\n  title\n  ...CodeshareHead_codeshare\n  ...CodeshareNavbar_codeshare\n  ...CodeshareEditor_codeshare\n  ...CodeshareSidebar_codeshare\n  ...NagModal_codeshare\n}\n\nfragment CodesharePage_viewer on Viewer {\n  me {\n    ...CodeshareHead_me\n    ...CodeshareNavbar_me\n    ...CodeshareEditor_me\n    ...CodeshareSidebar_me\n    ...NagModal_me\n    ...isCodeshareProSubscriber_me\n    ...SponsorToast_me\n    ...SponsorFooter_me\n    id\n  }\n}\n\nfragment CodesharePlans_me on Me {\n  anonymous\n  ...CodeshareProCheckoutModal_me\n  ...isCodeshareProSubscriber_me\n  ...LoginRegisterModal_me\n}\n\nfragment CodeshareProCheckoutModal_me on Me {\n  ...CodeshareProForm_me\n}\n\nfragment CodeshareProForm_me on Me {\n  id\n  email\n}\n\nfragment CodeshareProModal_me on Me {\n  ...CodesharePlans_me\n}\n\nfragment CodeshareSettingsForm_codeshare on Codeshare {\n  ...CodeshareTitleFormField_codeshare\n  ...CodeshareModeNameFormField_codeshare\n  ...CodeshareTabSizeFormField_codeshare\n}\n\nfragment CodeshareSettingsForm_me on Me {\n  anonymous\n  ...CodeshareThemeFormField_me\n  ...CodeshareKeymapFormField_me\n}\n\nfragment CodeshareShareButton_codeshare on Codeshare {\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareShareModal_codeshare on Codeshare {\n  ...CodeshareShareUrl_codeshare\n  ...CodeshareViewOnlyCheckbox_codeshare\n}\n\nfragment CodeshareShareModal_me on Me {\n  ...CodeshareViewOnlyCheckbox_me\n}\n\nfragment CodeshareShareUrl_codeshare on Codeshare {\n  id\n}\n\nfragment CodeshareSidebar_codeshare on Codeshare {\n  ...CodeshareSettingsForm_codeshare\n  ...CodeshareDownloadButton_codeshare\n  createdBy {\n    user {\n      ...isCodeshareProSubscriber_user\n      id\n    }\n  }\n}\n\nfragment CodeshareSidebar_me on Me {\n  ...isCodeshareProSubscriber_me\n  ...CodeshareSettingsForm_me\n}\n\nfragment CodeshareTabSizeFormField_codeshare on Codeshare {\n  ...useCodeshareTabSize_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareThemeFormField_me on Me {\n  ...useTheme_me\n}\n\nfragment CodeshareTitleFormField_codeshare on Codeshare {\n  ...useCodeshareTitle_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareViewOnlyCheckbox_codeshare on Codeshare {\n  id\n  createdBy {\n    me\n    userId\n    user {\n      id\n      name\n    }\n  }\n  ...isCodeshareViewOnly_codeshare\n}\n\nfragment CodeshareViewOnlyCheckbox_me on Me {\n  anonymous\n  ...isCodeshareProSubscriber_me\n  ...CodeshareProModal_me\n}\n\nfragment Gravatar_me on Me {\n  name\n  email\n}\n\nfragment LoginForm_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  modifiedBy {\n    userId\n    me\n  }\n  canEdit {\n    userIds\n    me\n  }\n}\n\nfragment LoginForm_me on Me {\n  id\n}\n\nfragment LoginRegisterModal_codeshare on Codeshare {\n  id\n  createdBy {\n    me\n    user {\n      anonymous\n      id\n    }\n  }\n  ...LoginForm_codeshare\n  ...RegisterForm_codeshare\n}\n\nfragment LoginRegisterModal_me on Me {\n  ...LoginForm_me\n  ...RegisterForm_me\n}\n\nfragment NagModal_codeshare on Codeshare {\n  ...LoginRegisterModal_codeshare\n  createdBy {\n    me\n    user {\n      ...isCodeshareProSubscriber_user\n      id\n    }\n  }\n}\n\nfragment NagModal_me on Me {\n  anonymous\n  ...LoginRegisterModal_me\n}\n\nfragment PlansButton_me on Me {\n  ...CodeshareProModal_me\n}\n\nfragment RegisterForm_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  modifiedBy {\n    userId\n    me\n  }\n  canEdit {\n    userIds\n    me\n  }\n}\n\nfragment RegisterForm_me on Me {\n  id\n}\n\nfragment SponsorFooter_me on Me {\n  ...PlansButton_me\n  ...SponsorScriptToast_me\n}\n\nfragment SponsorScriptToast_me on Me {\n  ...PlansButton_me\n}\n\nfragment SponsorToast_me on Me {\n  ...PlansButton_me\n  ...SponsorScriptToast_me\n}\n\nfragment UserNavbar_me on Me {\n  anonymous\n  ...AuthUserNavbar_me\n}\n\nfragment isCodeshareProSubscriber_me on Me {\n  subscriptionPlans(first: 100) {\n    edges {\n      node {\n        isActive\n        planId\n        id\n      }\n    }\n  }\n}\n\nfragment isCodeshareProSubscriber_user on User {\n  subscriptionPlans(first: 100) {\n    edges {\n      node {\n        isActive\n        planId\n        id\n      }\n    }\n  }\n}\n\nfragment isCodeshareViewOnly_codeshare on Codeshare {\n  canEdit {\n    userIds\n  }\n}\n\nfragment refetchableCodeHistoryEdges_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  codeCheckpoint {\n    codeHistoryId\n    value\n    codeHistoryEdge {\n      node {\n        id\n        historyId\n        value\n        createdAt\n        createdBy {\n          me\n          userId\n          clientId\n        }\n      }\n      cursor\n    }\n  }\n  codeHistory(after: $codeHistoryAfter, first: $codeHistoryFirst) {\n    edges {\n      node {\n        id\n        historyId\n        value\n        createdAt\n        createdBy {\n          me\n          userId\n          clientId\n        }\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n\nfragment refetchableCodeshareUserEdges_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  users(first: $codeshareUsersFirst, after: $codeshareUsersAfter) {\n    edges {\n      node {\n        id\n        createdAt\n        modifiedAt\n        createdBy {\n          userId\n          me\n        }\n        color\n        cursor {\n          position\n          selectionEnd\n        }\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n\nfragment useCodeshareCodeHistories_codeshare on Codeshare {\n  id\n  ...refetchableCodeHistoryEdges_codeshare\n}\n\nfragment useCodeshareModeName_codeshare on Codeshare {\n  id\n  modeName\n}\n\nfragment useCodeshareTabSize_codeshare on Codeshare {\n  id\n  tabSize\n}\n\nfragment useCodeshareTitle_codeshare on Codeshare {\n  id\n  createdAt\n  title\n}\n\nfragment useCodeshareUsers_codeshare on Codeshare {\n  id\n  ...refetchableCodeshareUserEdges_codeshare\n}\n\nfragment useKeymap_me on Me {\n  id\n  anonymous\n  settings {\n    keymap\n  }\n}\n\nfragment useTheme_me on Me {\n  id\n  anonymous\n  settings {\n    theme\n  }\n}\n"}}}();o.hash="b85d4a61f19a6dd2e6fc7ad737533ac9";var i=o;const d=function(){var e={defaultValue:null,kind:"LocalArgument",name:"codeHistoryAfter"},n={defaultValue:null,kind:"LocalArgument",name:"codeHistoryFirst"},a={defaultValue:null,kind:"LocalArgument",name:"codeshareId"},r={defaultValue:null,kind:"LocalArgument",name:"codeshareUsersAfter"},s={defaultValue:null,kind:"LocalArgument",name:"codeshareUsersFirst"},l=[{kind:"Variable",name:"id",variableName:"codeshareId"}],t={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"historyId",storageKey:null},m={alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[i,d,{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null}],storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},h=[{kind:"Variable",name:"after",variableName:"codeHistoryAfter"},{kind:"Variable",name:"first",variableName:"codeHistoryFirst"}],p={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},y={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null},f=[{kind:"Variable",name:"after",variableName:"codeshareUsersAfter"},{kind:"Variable",name:"first",variableName:"codeshareUsersFirst"}],k=[d,i];return{fragment:{argumentDefinitions:[e,n,a,r,s],kind:"Fragment",metadata:null,name:"CodeshareIdCodeshareReconnectQuery",selections:[{alias:null,args:l,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CodesharePage_codeshare"},{args:null,kind:"FragmentSpread",name:"CodesharePageSubscription_codeshare"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,e,n,s,r],kind:"Operation",name:"CodeshareIdCodeshareReconnectQuery",selections:[{alias:null,args:l,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[t,{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"first",value:100}],concreteType:"SubscriptionPlanConnection",kind:"LinkedField",name:"subscriptionPlans",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlanConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"planId",storageKey:null},o],storageKey:null}],storageKey:null}],storageKey:"subscriptionPlans(first:100)"},o,{alias:null,args:null,kind:"ScalarField",name:"companyImage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null}],storageKey:null},i,d],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},o,{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modeName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tabSize",storageKey:null},{alias:null,args:null,concreteType:"CodeCheckpoint",kind:"LinkedField",name:"codeCheckpoint",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"codeHistoryId",storageKey:null},u,{alias:null,args:null,concreteType:"CodeHistoryEdge",kind:"LinkedField",name:"codeHistoryEdge",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[o,c,u,t,m],storageKey:null},g],storageKey:null}],storageKey:null},{alias:null,args:h,concreteType:"CodeHistoryConnection",kind:"LinkedField",name:"codeHistory",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistoryConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[o,c,u,t,m,p],storageKey:null},g],storageKey:null},y],storageKey:null},{alias:null,args:h,filters:null,handle:"connection",key:"Codeshare_codeHistory",kind:"LinkedHandle",name:"codeHistory"},{alias:null,args:f,concreteType:"CodeshareUsersConnection",kind:"LinkedField",name:"users",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeshareUserConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"CodeshareUser",kind:"LinkedField",name:"node",plural:!1,selections:[o,t,{alias:null,args:null,kind:"ScalarField",name:"modifiedAt",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:k,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,concreteType:"CursorType",kind:"LinkedField",name:"cursor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"position",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectionEnd",storageKey:null}],storageKey:null},p],storageKey:null},g],storageKey:null},y],storageKey:null},{alias:null,args:f,filters:[],handle:"connection",key:"Codeshare_users",kind:"LinkedHandle",name:"users"},{alias:null,args:null,concreteType:"ModifiedBy",kind:"LinkedField",name:"modifiedBy",plural:!1,selections:k,storageKey:null}],storageKey:null}]},params:{cacheID:"0d7f9d5558a1217a057364052a279431",id:null,metadata:{},name:"CodeshareIdCodeshareReconnectQuery",operationKind:"query",text:"query CodeshareIdCodeshareReconnectQuery(\n  $codeshareId: String!\n  $codeHistoryAfter: String\n  $codeHistoryFirst: Int!\n  $codeshareUsersFirst: Int!\n  $codeshareUsersAfter: String\n) {\n  codeshare(id: $codeshareId) {\n    ...CodesharePage_codeshare\n    ...CodesharePageSubscription_codeshare\n    id\n  }\n}\n\nfragment CodeMirrorCursor_codeshare on Codeshare {\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareCodeMirror_codeshare on Codeshare {\n  ...useCodeshareModeName_codeshare\n  ...useCodeshareTabSize_codeshare\n  ...CodeMirrorCursor_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareDownloadButton_codeshare on Codeshare {\n  title\n  createdAt\n  modeName\n}\n\nfragment CodeshareEditor_codeshare on Codeshare {\n  ...CodeshareFirepad_codeshare\n}\n\nfragment CodeshareFirepad_codeshare on Codeshare {\n  id\n  ...CodeshareCodeMirror_codeshare\n  ...useCodeshareCodeHistories_codeshare\n  ...useCodeshareUsers_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareHead_codeshare on Codeshare {\n  ...CodeshareLazyHead_codeshare\n}\n\nfragment CodeshareLazyHead_codeshare on Codeshare {\n  createdAt\n  title\n}\n\nfragment CodeshareModeNameFormField_codeshare on Codeshare {\n  ...useCodeshareModeName_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareNavbar_codeshare on Codeshare {\n  id\n  createdBy {\n    me\n    user {\n      companyImage\n      id\n    }\n  }\n  title\n  createdAt\n  ...CodeshareShareButton_codeshare\n  ...CodeshareShareModal_codeshare\n}\n\nfragment CodesharePageSubscription_codeshare on Codeshare {\n  ...CodeshareSidebarSubscription_codeshare\n}\n\nfragment CodesharePage_codeshare on Codeshare {\n  createdAt\n  createdBy {\n    user {\n      ...isCodeshareProSubscriber_user\n      id\n    }\n  }\n  title\n  ...CodeshareHead_codeshare\n  ...CodeshareNavbar_codeshare\n  ...CodeshareEditor_codeshare\n  ...CodeshareSidebar_codeshare\n  ...NagModal_codeshare\n}\n\nfragment CodeshareSettingsFormSubscription_codeshare on Codeshare {\n  ...CodeshareTitleFormField_codeshare\n  ...CodeshareModeNameFormField_codeshare\n  ...CodeshareTabSizeFormField_codeshare\n}\n\nfragment CodeshareSettingsForm_codeshare on Codeshare {\n  ...CodeshareTitleFormField_codeshare\n  ...CodeshareModeNameFormField_codeshare\n  ...CodeshareTabSizeFormField_codeshare\n}\n\nfragment CodeshareShareButton_codeshare on Codeshare {\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareShareModal_codeshare on Codeshare {\n  ...CodeshareShareUrl_codeshare\n  ...CodeshareViewOnlyCheckbox_codeshare\n}\n\nfragment CodeshareShareUrl_codeshare on Codeshare {\n  id\n}\n\nfragment CodeshareSidebarSubscription_codeshare on Codeshare {\n  ...CodeshareSettingsFormSubscription_codeshare\n}\n\nfragment CodeshareSidebar_codeshare on Codeshare {\n  ...CodeshareSettingsForm_codeshare\n  ...CodeshareDownloadButton_codeshare\n  createdBy {\n    user {\n      ...isCodeshareProSubscriber_user\n      id\n    }\n  }\n}\n\nfragment CodeshareTabSizeFormField_codeshare on Codeshare {\n  ...useCodeshareTabSize_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareTitleFormField_codeshare on Codeshare {\n  ...useCodeshareTitle_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareViewOnlyCheckbox_codeshare on Codeshare {\n  id\n  createdBy {\n    me\n    userId\n    user {\n      id\n      name\n    }\n  }\n  ...isCodeshareViewOnly_codeshare\n}\n\nfragment LoginForm_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  modifiedBy {\n    userId\n    me\n  }\n  canEdit {\n    userIds\n    me\n  }\n}\n\nfragment LoginRegisterModal_codeshare on Codeshare {\n  id\n  createdBy {\n    me\n    user {\n      anonymous\n      id\n    }\n  }\n  ...LoginForm_codeshare\n  ...RegisterForm_codeshare\n}\n\nfragment NagModal_codeshare on Codeshare {\n  ...LoginRegisterModal_codeshare\n  createdBy {\n    me\n    user {\n      ...isCodeshareProSubscriber_user\n      id\n    }\n  }\n}\n\nfragment RegisterForm_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  modifiedBy {\n    userId\n    me\n  }\n  canEdit {\n    userIds\n    me\n  }\n}\n\nfragment isCodeshareProSubscriber_user on User {\n  subscriptionPlans(first: 100) {\n    edges {\n      node {\n        isActive\n        planId\n        id\n      }\n    }\n  }\n}\n\nfragment isCodeshareViewOnly_codeshare on Codeshare {\n  canEdit {\n    userIds\n  }\n}\n\nfragment refetchableCodeHistoryEdges_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  codeCheckpoint {\n    codeHistoryId\n    value\n    codeHistoryEdge {\n      node {\n        id\n        historyId\n        value\n        createdAt\n        createdBy {\n          me\n          userId\n          clientId\n        }\n      }\n      cursor\n    }\n  }\n  codeHistory(after: $codeHistoryAfter, first: $codeHistoryFirst) {\n    edges {\n      node {\n        id\n        historyId\n        value\n        createdAt\n        createdBy {\n          me\n          userId\n          clientId\n        }\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n\nfragment refetchableCodeshareUserEdges_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  users(first: $codeshareUsersFirst, after: $codeshareUsersAfter) {\n    edges {\n      node {\n        id\n        createdAt\n        modifiedAt\n        createdBy {\n          userId\n          me\n        }\n        color\n        cursor {\n          position\n          selectionEnd\n        }\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n\nfragment useCodeshareCodeHistories_codeshare on Codeshare {\n  id\n  ...refetchableCodeHistoryEdges_codeshare\n}\n\nfragment useCodeshareModeName_codeshare on Codeshare {\n  id\n  modeName\n}\n\nfragment useCodeshareTabSize_codeshare on Codeshare {\n  id\n  tabSize\n}\n\nfragment useCodeshareTitle_codeshare on Codeshare {\n  id\n  createdAt\n  title\n}\n\nfragment useCodeshareUsers_codeshare on Codeshare {\n  id\n  ...refetchableCodeshareUserEdges_codeshare\n}\n"}}}();d.hash="2a1999a747b72363294472e7617f4c91";var u=d;const c=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CodeshareIdCodeshareSubscription",selections:[{alias:null,args:n,concreteType:"CodeshareUpdatesPayload",kind:"LinkedField",name:"codeshareUpdates",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CodesharePageSubscription_codeshare"}],storageKey:null}],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CodeshareIdCodeshareSubscription",selections:[{alias:null,args:n,concreteType:"CodeshareUpdatesPayload",kind:"LinkedField",name:"codeshareUpdates",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modeName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tabSize",storageKey:null}],storageKey:null}],storageKey:null}]},params:{cacheID:"931d44c0ace0a797bdac70593b1b5eee",id:null,metadata:{},name:"CodeshareIdCodeshareSubscription",operationKind:"subscription",text:"subscription CodeshareIdCodeshareSubscription(\n  $input: CodeshareUpdatesInput!\n) {\n  codeshareUpdates(input: $input) {\n    codeshare {\n      ...CodesharePageSubscription_codeshare\n      id\n    }\n  }\n}\n\nfragment CodeshareModeNameFormField_codeshare on Codeshare {\n  ...useCodeshareModeName_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodesharePageSubscription_codeshare on Codeshare {\n  ...CodeshareSidebarSubscription_codeshare\n}\n\nfragment CodeshareSettingsFormSubscription_codeshare on Codeshare {\n  ...CodeshareTitleFormField_codeshare\n  ...CodeshareModeNameFormField_codeshare\n  ...CodeshareTabSizeFormField_codeshare\n}\n\nfragment CodeshareSidebarSubscription_codeshare on Codeshare {\n  ...CodeshareSettingsFormSubscription_codeshare\n}\n\nfragment CodeshareTabSizeFormField_codeshare on Codeshare {\n  ...useCodeshareTabSize_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareTitleFormField_codeshare on Codeshare {\n  ...useCodeshareTitle_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment useCodeshareModeName_codeshare on Codeshare {\n  id\n  modeName\n}\n\nfragment useCodeshareTabSize_codeshare on Codeshare {\n  id\n  tabSize\n}\n\nfragment useCodeshareTitle_codeshare on Codeshare {\n  id\n  createdAt\n  title\n}\n"}}}();c.hash="e1ae83afdcb8caac44276dde9b210298";var m=c;const g=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareIdMeReconnectQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CodesharePage_viewer"},{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CodesharePageSubscription_me"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"CodeshareIdMeReconnectQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{alias:null,args:null,concreteType:"UserSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"theme",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"keymap",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:100}],concreteType:"SubscriptionPlanConnection",kind:"LinkedField",name:"subscriptionPlans",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlanConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"planId",storageKey:null},e],storageKey:null}],storageKey:null}],storageKey:"subscriptionPlans(first:100)"}],storageKey:null}],storageKey:null}]},params:{cacheID:"a2aabf25c4b5f67e6fdd18bc6d9cbd1b",id:null,metadata:{},name:"CodeshareIdMeReconnectQuery",operationKind:"query",text:"query CodeshareIdMeReconnectQuery {\n  viewer {\n    ...CodesharePage_viewer\n    me {\n      ...CodesharePageSubscription_me\n      id\n    }\n  }\n}\n\nfragment AuthUserNavbar_me on Me {\n  anonymous\n  name\n  email\n  ...Gravatar_me\n}\n\nfragment CodeshareCodeMirror_me on Me {\n  id\n  ...useTheme_me\n  ...useKeymap_me\n}\n\nfragment CodeshareEditor_me on Me {\n  ...CodeshareFirepad_me\n}\n\nfragment CodeshareFirepad_me on Me {\n  id\n  ...CodeshareCodeMirror_me\n}\n\nfragment CodeshareHead_me on Me {\n  ...CodeshareLazyHead_me\n  ...useKeymap_me\n}\n\nfragment CodeshareKeymapFormField_me on Me {\n  ...useKeymap_me\n}\n\nfragment CodeshareLazyHead_me on Me {\n  ...useTheme_me\n}\n\nfragment CodeshareNavbar_me on Me {\n  anonymous\n  ...UserNavbar_me\n  ...CodeshareShareModal_me\n  ...PlansButton_me\n  ...isCodeshareProSubscriber_me\n}\n\nfragment CodesharePageSubscription_me on Me {\n  ...CodeshareSidebarSubscription_me\n}\n\nfragment CodesharePage_viewer on Viewer {\n  me {\n    ...CodeshareHead_me\n    ...CodeshareNavbar_me\n    ...CodeshareEditor_me\n    ...CodeshareSidebar_me\n    ...NagModal_me\n    ...isCodeshareProSubscriber_me\n    ...SponsorToast_me\n    ...SponsorFooter_me\n    id\n  }\n}\n\nfragment CodesharePlans_me on Me {\n  anonymous\n  ...CodeshareProCheckoutModal_me\n  ...isCodeshareProSubscriber_me\n  ...LoginRegisterModal_me\n}\n\nfragment CodeshareProCheckoutModal_me on Me {\n  ...CodeshareProForm_me\n}\n\nfragment CodeshareProForm_me on Me {\n  id\n  email\n}\n\nfragment CodeshareProModal_me on Me {\n  ...CodesharePlans_me\n}\n\nfragment CodeshareSettingsFormSubscription_me on Me {\n  ...CodeshareThemeFormField_me\n  ...CodeshareKeymapFormField_me\n}\n\nfragment CodeshareSettingsForm_me on Me {\n  anonymous\n  ...CodeshareThemeFormField_me\n  ...CodeshareKeymapFormField_me\n}\n\nfragment CodeshareShareModal_me on Me {\n  ...CodeshareViewOnlyCheckbox_me\n}\n\nfragment CodeshareSidebarSubscription_me on Me {\n  ...CodeshareSettingsFormSubscription_me\n}\n\nfragment CodeshareSidebar_me on Me {\n  ...isCodeshareProSubscriber_me\n  ...CodeshareSettingsForm_me\n}\n\nfragment CodeshareThemeFormField_me on Me {\n  ...useTheme_me\n}\n\nfragment CodeshareViewOnlyCheckbox_me on Me {\n  anonymous\n  ...isCodeshareProSubscriber_me\n  ...CodeshareProModal_me\n}\n\nfragment Gravatar_me on Me {\n  name\n  email\n}\n\nfragment LoginForm_me on Me {\n  id\n}\n\nfragment LoginRegisterModal_me on Me {\n  ...LoginForm_me\n  ...RegisterForm_me\n}\n\nfragment NagModal_me on Me {\n  anonymous\n  ...LoginRegisterModal_me\n}\n\nfragment PlansButton_me on Me {\n  ...CodeshareProModal_me\n}\n\nfragment RegisterForm_me on Me {\n  id\n}\n\nfragment SponsorFooter_me on Me {\n  ...PlansButton_me\n  ...SponsorScriptToast_me\n}\n\nfragment SponsorScriptToast_me on Me {\n  ...PlansButton_me\n}\n\nfragment SponsorToast_me on Me {\n  ...PlansButton_me\n  ...SponsorScriptToast_me\n}\n\nfragment UserNavbar_me on Me {\n  anonymous\n  ...AuthUserNavbar_me\n}\n\nfragment isCodeshareProSubscriber_me on Me {\n  subscriptionPlans(first: 100) {\n    edges {\n      node {\n        isActive\n        planId\n        id\n      }\n    }\n  }\n}\n\nfragment useKeymap_me on Me {\n  id\n  anonymous\n  settings {\n    keymap\n  }\n}\n\nfragment useTheme_me on Me {\n  id\n  anonymous\n  settings {\n    theme\n  }\n}\n"}}}();g.hash="2ed944020620e7a45ce34fc3ff657089";var h=g;const p=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CodeshareIdMeSubscription",selections:[{alias:null,args:n,concreteType:"ViewerResponse",kind:"LinkedField",name:"meUpdates",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CodesharePageSubscription_me"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CodeshareIdMeSubscription",selections:[{alias:null,args:n,concreteType:"ViewerResponse",kind:"LinkedField",name:"meUpdates",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{alias:null,args:null,concreteType:"UserSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"theme",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"keymap",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{cacheID:"7ca23a65635689b64c914692ac28e0fa",id:null,metadata:{},name:"CodeshareIdMeSubscription",operationKind:"subscription",text:"subscription CodeshareIdMeSubscription(\n  $input: MeUpdatesInput!\n) {\n  meUpdates(input: $input) {\n    viewer {\n      me {\n        ...CodesharePageSubscription_me\n        id\n      }\n    }\n  }\n}\n\nfragment CodeshareKeymapFormField_me on Me {\n  ...useKeymap_me\n}\n\nfragment CodesharePageSubscription_me on Me {\n  ...CodeshareSidebarSubscription_me\n}\n\nfragment CodeshareSettingsFormSubscription_me on Me {\n  ...CodeshareThemeFormField_me\n  ...CodeshareKeymapFormField_me\n}\n\nfragment CodeshareSidebarSubscription_me on Me {\n  ...CodeshareSettingsFormSubscription_me\n}\n\nfragment CodeshareThemeFormField_me on Me {\n  ...useTheme_me\n}\n\nfragment useKeymap_me on Me {\n  id\n  anonymous\n  settings {\n    keymap\n  }\n}\n\nfragment useTheme_me on Me {\n  id\n  anonymous\n  settings {\n    theme\n  }\n}\n"}}}();p.hash="6cdaa35b9eb7396fececbcbf027dc495";var y=p,f=a(53127),k=a(67912),b=a(38631),C=a(50559);const F={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodesharePageSubscription_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareSidebarSubscription_codeshare"}],type:"Codeshare",abstractKey:null,hash:"eb3a72bb3b22014ddc4e4488a9de0087"};var S=F;const v={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodesharePageSubscription_me",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareSidebarSubscription_me"}],type:"Me",abstractKey:null,hash:"b430bbd4c60741200f9e789f3e11762f"};var _=v;const K={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodesharePage_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"isCodeshareProSubscriber_user"}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{args:null,kind:"FragmentSpread",name:"CodeshareHead_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareNavbar_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareEditor_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareSidebar_codeshare"},{args:null,kind:"FragmentSpread",name:"NagModal_codeshare"}],type:"Codeshare",abstractKey:null,hash:"9cac4687d4737b7cd6f9adca114369c9"};var E=K;const T={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodesharePage_viewer",selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CodeshareHead_me"},{args:null,kind:"FragmentSpread",name:"CodeshareNavbar_me"},{args:null,kind:"FragmentSpread",name:"CodeshareEditor_me"},{args:null,kind:"FragmentSpread",name:"CodeshareSidebar_me"},{args:null,kind:"FragmentSpread",name:"NagModal_me"},{args:null,kind:"FragmentSpread",name:"isCodeshareProSubscriber_me"},{args:null,kind:"FragmentSpread",name:"SponsorToast_me"},{args:null,kind:"FragmentSpread",name:"SponsorFooter_me"}],storageKey:null}],type:"Viewer",abstractKey:null,hash:"1a0118df165661d3fa0e4d28245dd226"};var M=T,x=a(67294),w=a(22644);var I=(0,x.createContext)({codeMirror:null,setCodeMirror(){}});const O={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareEditor_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareFirepad_codeshare"}],type:"Codeshare",abstractKey:null,hash:"f2123e9b74d7e78f595327e2ea42c12d"};var j=O;const L={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareEditor_me",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareFirepad_me"}],type:"Me",abstractKey:null,hash:"bf03c44d9ffbd7498b47fac5d290a5ac"};var P=L,D=a(98152);a(88674),a(83753);const Z={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareFirepad_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"CodeshareCodeMirror_codeshare"},{args:null,kind:"FragmentSpread",name:"useCodeshareCodeHistories_codeshare"},{args:null,kind:"FragmentSpread",name:"useCodeshareUsers_codeshare"},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"3efd42af1b92b5a5c4d38d39d31a0c6f"};var U=Z;const N={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareFirepad_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"CodeshareCodeMirror_me"}],type:"Me",abstractKey:null,hash:"d3bfab328f52730239c44e56861deb9f"};var A=N;a(66992),a(51532),a(33948),a(21249),a(91038);const H={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCodeshareUsers_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"refetchableCodeshareUserEdges_codeshare"}],type:"Codeshare",abstractKey:null,hash:"513bdbea2543cc4c38d2e51a3423bff8"};var B=H;const R=function(){var e=["users"],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null}],storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"codeshareUsersAfter"},{kind:"RootArgument",name:"codeshareUsersFirst"}],kind:"Fragment",metadata:{connection:[{count:"codeshareUsersFirst",cursor:"codeshareUsersAfter",direction:"forward",path:e}],refetch:{connection:{forward:{count:"codeshareUsersFirst",cursor:"codeshareUsersAfter"},backward:null,path:e},fragmentPathInResult:["node"],operation:a(66880),identifierField:"id"}},name:"refetchableCodeshareUserEdges_codeshare",selections:[n,r,{alias:"users",args:null,concreteType:"CodeshareUsersConnection",kind:"LinkedField",name:"__Codeshare_users_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeshareUserConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"CodeshareUser",kind:"LinkedField",name:"node",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modifiedAt",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,concreteType:"CursorType",kind:"LinkedField",name:"cursor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"position",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectionEnd",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null}}();R.hash="432679eebdeadeba528b71c43deeea74";var V=R;const z={codeshareUsersFirst:100,codeshareUsersAfter:null};function q(e){const n=(0,k.useRefetchableFragment)(V,e),a=(0,D.Z)(n,2),r=a[0],s=a[1];return[(null===r||void 0===r?void 0:r.users.edges)||[],s]}function $(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q;const r=new Map,s=new Map,l=new Map;return e.forEach(((s,t)=>{if(n.has(t)){const r=e.get(t),s=n.get(t);a(r,s)||l.set(t,r)}else r.set(t,s)})),n.forEach(((n,a)=>{e.has(a)||s.set(a,n)})),{created:r,updated:l,deleted:s}}function Q(e,n){return e===n}function G(e,n){const a=new Map;return e.forEach((e=>{const r=n(e);a.set(r,e)})),a}function J(e){if(0!==e.length)return e[e.length-1]}var W=a(92432);const Y=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"DeletionsPayload",kind:"LinkedField",name:"codeshareUserDeletions",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deletedCodeshareUserId",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"onCodeshareUserDeletionsSubscription",selections:n,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"onCodeshareUserDeletionsSubscription",selections:n},params:{cacheID:"571e973d0e4a9dfffc33b976c6a65c8f",id:null,metadata:{},name:"onCodeshareUserDeletionsSubscription",operationKind:"subscription",text:"subscription onCodeshareUserDeletionsSubscription(\n  $input: CodeshareUserDeletionsInput!\n) {\n  codeshareUserDeletions(input: $input) {\n    codeshare {\n      id\n    }\n    deletedCodeshareUserId\n  }\n}\n"}}}();Y.hash="7e4d7eb20a63fdc08c4b860162b60a2f";var X=Y,ee=a(22578);function ne(e,n,a){return W.Z.debug("requestSubscription: codeshareUserDeletions",n),(0,ee.requestSubscription)(e,{subscription:X,variables:n,configs:[{type:"NODE_DELETE",parentName:"codeshare",parentID:n.input.codeshareId,connectionName:"users",deletedIDFieldName:"deletedCodeshareUserId"}],onNext(e){null!==a&&void 0!==a&&a.onNext&&a.onNext(e)},onError(e){null!==a&&void 0!==a&&a.onError&&a.onError(e)},onCompleted(){null!==a&&void 0!==a&&a.onCompleted&&a.onCompleted()}})}const ae=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpsertionsPayload",kind:"LinkedField",name:"codeshareUserUpsertions",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[n],storageKey:null},{alias:null,args:null,concreteType:"CodeshareUserEdge",kind:"LinkedField",name:"upsertedCodeshareUserEdge",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeshareUser",kind:"LinkedField",name:"node",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modifiedAt",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,concreteType:"CursorType",kind:"LinkedField",name:"cursor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"position",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectionEnd",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"onCodeshareUserUpsertionsSubscription",selections:a,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"onCodeshareUserUpsertionsSubscription",selections:a},params:{cacheID:"9136bfa9286bc5919219e547441aa59f",id:null,metadata:{},name:"onCodeshareUserUpsertionsSubscription",operationKind:"subscription",text:"subscription onCodeshareUserUpsertionsSubscription(\n  $input: CodeshareUserUpsertionsInput!\n) {\n  codeshareUserUpsertions(input: $input) {\n    codeshare {\n      id\n    }\n    upsertedCodeshareUserEdge {\n      node {\n        id\n        createdAt\n        modifiedAt\n        createdBy {\n          userId\n          me\n        }\n        color\n        cursor {\n          position\n          selectionEnd\n        }\n      }\n      cursor\n    }\n  }\n}\n"}}}();ae.hash="047a48aaa6f81d25ede85d775204545c";var re=ae;function se(e,n,a){return W.Z.debug("requestSubscription: codeshareUserUpsertions",n),(0,ee.requestSubscription)(e,{subscription:re,variables:n,configs:[{type:"RANGE_ADD",parentName:"codeshare",parentID:n.input.codeshareId,connectionInfo:[{key:"Codeshare_users",filters:[],rangeBehavior:"append"}],edgeName:"upsertedCodeshareUserEdge"}],onNext(e){null!==a&&void 0!==a&&a.onNext&&a.onNext(e)},onError(e){null!==a&&void 0!==a&&a.onError&&a.onError(e)},onCompleted(){null!==a&&void 0!==a&&a.onCompleted&&a.onCompleted()}})}var le=a(51726),te=a(34555);function oe(e){C.Z.assert(te.Z,"onReconnect should only be used on clientside");return{dispose:(0,le.i)().on("reconnected",e)}}a(92222),a(65069),a(32099);var ie=a(44311),de=a(55709),ue=a(74825),ce=a(47746);var me=a(92772),ge=a(46766),he=a.n(ge);function pe(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function ye(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?pe(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}const fe=new class{constructor(){(0,r.Z)(this,"store",new Map),(0,r.Z)(this,"timers",new Map)}set(e,n){return this.clearExpiration(e),this.store.set(e,n),n}get(e){return this.store.get(e)}delete(e){return this.clearExpiration(e),this.store.delete(e)}setWithExpiration(e,n,a){this.set(e,n),this.setExpiration(e,a)}setExpiration(e,n){const a=setTimeout((()=>this.delete(e)),n);this.timers.set(e,a)}clearExpiration(e){const n=this.timers.get(e);n&&(clearTimeout(n),this.timers.delete(e))}};function ke(e,n){return(0,ie.applyOptimisticMutation)(e,ye({},n))}function be(e,n,a){const r=a.mutation.default?a.mutation.default:a.mutation,s="".concat(r.operation.kind,":").concat(r.operation.name);let l=fe.get(s)||{},t=l.source,o=l.observable,i=l.subscription,d=l.optimisticDisposables,u=void 0===d?[]:d;return null!=o&&null!=t&&null!=i||(t=new(he()),o=t.pipe((0,de.U)((e=>{const n=e.environment,a=e.config;return null==a.optimisticResponse&&null==a.optimisticUpdater||(u=u.concat((0,ie.applyOptimisticMutation)(n,ye({},a)))),ye(ye({},e),{},{optimisticDisposables:u})})),(0,ue.p)(n,void 0,{leading:!1,trailing:!0}),(0,ce.zg)((e=>{let n=e.environment,a=e.config,r=e.optimisticDisposables;return W.Z.debug("throttledCommitMutation: mergeMap",{config:a}),new me.y((e=>{let s=(0,ie.commitMutation)(n,ye(ye({},a),{},{onError(n){W.Z.error("throttledCommitMutation: mergeMap: onError",{config:a,error:n}),r.reverse().forEach((e=>e.dispose())),a.onError&&a.onError(n),e.error(n)},onCompleted(n,r){W.Z.debug("throttledCommitMutation: mergeMap: onCompleted",{config:a,response:n,errors:r}),a.onCompleted&&a.onCompleted(n,r),s=null,e.complete()}}));return()=>{var e;W.Z.warn("throttledCommitMutation: mergeMap: cancel",{}),null===(e=s)||void 0===e||e.dispose()}}))}))),i=o.subscribe()),fe.setWithExpiration(s,{source:t,observable:o,subscription:i,optimisticDisposables:u},n),t.next({environment:e,config:a,duration:n}),{dispose:()=>{W.Z.warn("throttledCommitMutation: dispose",{}),i.unsubscribe()}}}const Ce=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpsertMeIntoCodeshareUsersResponse",kind:"LinkedField",name:"upsertMeIntoCodeshareUsers",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[n],storageKey:null},{alias:null,args:null,concreteType:"CodeshareUserEdge",kind:"LinkedField",name:"codeshareUserEdge",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeshareUser",kind:"LinkedField",name:"node",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modifiedAt",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,concreteType:"CursorType",kind:"LinkedField",name:"cursor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"position",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectionEnd",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"upsertMeIntoCodeshareUsersMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"upsertMeIntoCodeshareUsersMutation",selections:a},params:{cacheID:"c3c2d5b715039028b828435c73f93269",id:null,metadata:{},name:"upsertMeIntoCodeshareUsersMutation",operationKind:"mutation",text:"mutation upsertMeIntoCodeshareUsersMutation(\n  $input: UpsertMeIntoCodeshareUsersInput!\n) {\n  upsertMeIntoCodeshareUsers(input: $input) {\n    codeshare {\n      id\n    }\n    codeshareUserEdge {\n      node {\n        id\n        createdAt\n        modifiedAt\n        createdBy {\n          userId\n          me\n        }\n        color\n        cursor {\n          position\n          selectionEnd\n        }\n      }\n      cursor\n    }\n  }\n}\n"}}}();Ce.hash="4eaf409387e508a95ddbc50f22ad998b";var Fe=Ce;function Se(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function ve(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?Se(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function _e(){}function Ke(e){const n=new Date(Date.now()-9e5);return W.Z.debug("isActive",{modifiedAt:new Date(e.node.modifiedAt),expiredDate:n,isActive:new Date(e.node.modifiedAt).valueOf()>n.valueOf()}),new Date(e.node.modifiedAt).valueOf()>n.valueOf()}const Ee={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareCodeMirror_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"useCodeshareModeName_codeshare"},{args:null,kind:"FragmentSpread",name:"useCodeshareTabSize_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeMirrorCursor_codeshare"},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"1ec06678de7a49a8b4c3b3ee76357e32"};var Te=Ee;const Me={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareCodeMirror_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"useTheme_me"},{args:null,kind:"FragmentSpread",name:"useKeymap_me"}],type:"Me",abstractKey:null,hash:"3291f3b574214a824f3c21b6ac74e502"};var xe=Me;const we={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeMirrorCursor_codeshare",selections:[{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"eb2663a0e4e893f83c79b3a042dc1936"};var Ie=we,Oe=a(40154);function je(e){C.Z.assert(te.Z,"onDisconnect should only be used on clientside");return{dispose:(0,le.i)().on("disconnected",e)}}var Le=a(85893);function Pe(){const e=(0,x.useState)(!1),n=e[0],a=e[1],r=(0,x.useState)(!1),s=r[0],l=r[1];function t(){if(window.location.reload)return window.location.reload();window.location.href=window.location.href}return(0,x.useEffect)((()=>{let e=null;const n=je((()=>{e=setTimeout((()=>{e=null;(0,le.i)().closedByUser?l(!0):a(!0)}),5e3)})),r=oe((()=>{null!=e&&clearTimeout(e),a(!1)}));return()=>{null!=e&&clearTimeout(e),n.dispose(),r.dispose()}}),[]),s?(0,Le.jsx)("div",{onClick:()=>t(),className:"toast toast-info toast-disconnect clickable",children:"Session Expired. Click here to refresh."}):n?(0,Le.jsx)("div",{onClick:()=>{if(s)t();else try{(0,Oe.Z)()}catch(e){t()}},className:"toast toast-info toast-disconnect clickable",children:"Apologies we're having trouble with your connection. Reconnecting..."}):null}var De=a(81244);const Ze={readOnly:"nocursor"};function Ue(e){var n,a;const r=e.codeMirror,s=(0,x.useState)(null),l=s[0],t=s[1],o=(0,k.useFragment)(Ie,e.codeshare),i=(0,x.useState)(!1),d=i[0],u=i[1];return(0,x.useEffect)((()=>{let e=null;const n=je((()=>{e=setTimeout((()=>{e=null,u(!0)}),5e3)})),a=oe((()=>{null!=e&&clearTimeout(e),u(!1)}));return()=>{null!=e&&clearTimeout(e),n.dispose(),a.dispose()}}),[]),(0,x.useEffect)((()=>{if(!r)return;const e=()=>{var e;if(!r)return;if(null!==(e=o.canEdit)&&void 0!==e&&e.me)return;r.setOption("cursorBlinkRate",0),r.setOption("cursorHeight",1),l&&clearTimeout(l);const n=setTimeout((()=>{t(null),r.setOption("cursorHeight",0)}),3e3);t(n)};return r.on("cursorActivity",e),()=>{r.off("cursorActivity",e)}}),[r,null===(n=o.canEdit)||void 0===n?void 0:n.me]),(0,x.useEffect)((()=>{var e;if(r)return null!==(e=o.canEdit)&&void 0!==e&&e.me&&!d?(r.setOption("readOnly",!1),r.setOption("cursorBlinkRate",De.Z.cursorBlinkRate),r.setOption("cursorHeight",1)):(r.setOption("readOnly",!0),r.setOption("cursorBlinkRate",-1),r.setOption("cursorHeight",0)),()=>{r.setOption("readOnly",Ze.readOnly)}}),[r,null===(a=o.canEdit)||void 0===a?void 0:a.me,d]),(0,x.useEffect)((()=>{null===r||void 0===r||r.focus()}),[r]),null}a(47042),a(15306);var Ne=a(94294),Ae=a(53028),He=a(26470),Be=a.n(He);var Re=new class{constructor(e){(0,r.Z)(this,"baseUrl",void 0),(0,r.Z)(this,"loadmodeURL",void 0),(0,r.Z)(this,"root",((e,n)=>this.url("/",e,n))),(0,r.Z)(this,"mode",(e=>"null"===e?null:this.url("mode",e+"/"+e,"min.js"))),(0,r.Z)(this,"addon",((e,n)=>"/"===e.charAt(0)?this.url("/",e.slice(1),n||"js"):this.url("addon",e,n||"js"))),(0,r.Z)(this,"keymap",(e=>this.url("keymap",e,"js"))),(0,r.Z)(this,"theme",(e=>this.url("theme",e,"css"))),this.baseUrl=e,this.loadmodeURL=this.url("mode","%N/%N","js")}firepadCSS(){return"//cdn.firebase.com/libs/firepad/1.1.1/firepad.css"}firepadJS(){return(0,Ne.Z)("js/firepad.js")}url(e,n,a){e=e.replace(/^\//,"");var r=Be().join(e,n);return"/"===r[0]&&(r=r.slice(1)),a&&(r+=(Ae.Z||"css"===a?".":".min.")+a),r=r.replace(/\.min\.min/,".min"),this.baseUrl+r}}("https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.53.2/");var Ve=a(62185),ze=a(91629);const qe=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpdateCodeshareResponse",kind:"LinkedField",name:"updateCodeshare",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modeName",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useCodeshareModeNameMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useCodeshareModeNameMutation",selections:n},params:{cacheID:"25f94cda314e3915b03c2f36f54ebd94",id:null,metadata:{},name:"useCodeshareModeNameMutation",operationKind:"mutation",text:"mutation useCodeshareModeNameMutation(\n  $input: UpdateCodeshareInput!\n) {\n  updateCodeshare(input: $input) {\n    codeshare {\n      id\n      modeName\n    }\n  }\n}\n"}}}();qe.hash="febc74741a259b39be34cd9300e62f59";var $e=qe;const Qe={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCodeshareModeName_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modeName",storageKey:null}],type:"Codeshare",abstractKey:null,hash:"7de49cd8ff8d33d694727fab6ca32186"};var Ge=Qe;function Je(e){const n=(0,k.useRelayEnvironment)(),a=(0,k.useFragment)(Ge,e);return[(0,Ve.BL)(a.modeName).name||De.Z.modeName,function(e){be(n,500,{mutation:$e,variables:{input:{id:a.id,modeName:e.toLowerCase()}},optimisticResponse:{updateCodeshare:{codeshare:{id:a.id,modeName:e.toLowerCase()}}}})}]}const We=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpdateCodeshareResponse",kind:"LinkedField",name:"updateCodeshare",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tabSize",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useCodeshareTabSizeMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useCodeshareTabSizeMutation",selections:n},params:{cacheID:"36d614c08dab22204db872fe8d1fae14",id:null,metadata:{},name:"useCodeshareTabSizeMutation",operationKind:"mutation",text:"mutation useCodeshareTabSizeMutation(\n  $input: UpdateCodeshareInput!\n) {\n  updateCodeshare(input: $input) {\n    codeshare {\n      id\n      tabSize\n    }\n  }\n}\n"}}}();We.hash="90088fad605de50b460743b7d808bc2a";var Ye=We;const Xe={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCodeshareTabSize_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tabSize",storageKey:null}],type:"Codeshare",abstractKey:null,hash:"77e1232b25a84f949ec8bdb1cf2b0d7e"};var en=Xe;function nn(e){const n=(0,k.useRelayEnvironment)(),a=(0,k.useFragment)(en,e);return[a.tabSize||De.Z.tabSize,function(e){be(n,500,{mutation:Ye,variables:{input:{id:a.id,tabSize:e}},optimisticResponse:{updateCodeshare:{codeshare:{id:a.id,tabSize:e}}}})}]}const an=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"ViewerResponse",kind:"LinkedField",name:"updateMe",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"UserSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"keymap",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useKeymapMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useKeymapMutation",selections:n},params:{cacheID:"4df1f246be12960a2e354c6d1b98528a",id:null,metadata:{},name:"useKeymapMutation",operationKind:"mutation",text:"mutation useKeymapMutation(\n  $input: UpdateMeInput!\n) {\n  updateMe(input: $input) {\n    viewer {\n      me {\n        id\n        settings {\n          keymap\n        }\n      }\n    }\n  }\n}\n"}}}();an.hash="bd317611258d3ae07c2b711aec373f0a";var rn=an;const sn={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useKeymap_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{alias:null,args:null,concreteType:"UserSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"keymap",storageKey:null}],storageKey:null}],type:"Me",abstractKey:null,hash:"264b0c91d594ab22e67145233babfb05"};var ln=sn,tn=a(6161);function on(e){const n=(0,k.useRelayEnvironment)(),a=(0,k.useFragment)(ln,e);return[a.anonymous?a.settings.keymap||new tn.Z(a.id).getKeymap()||De.Z.keymap:a.settings.keymap||De.Z.keymap,function(e){const r={mutation:rn,variables:{input:{settings:{keymap:e}}},optimisticResponse:{updateMe:{viewer:{me:{id:a.id,settings:{keymap:e}}}}}};a.anonymous?(ke(n,r),new tn.Z(a.id).setKeymap(e)):be(n,500,r)}]}const dn=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"ViewerResponse",kind:"LinkedField",name:"updateMe",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"UserSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"theme",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useThemeMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useThemeMutation",selections:n},params:{cacheID:"d85caecc042d5d270267a51898eb6f6f",id:null,metadata:{},name:"useThemeMutation",operationKind:"mutation",text:"mutation useThemeMutation(\n  $input: UpdateMeInput!\n) {\n  updateMe(input: $input) {\n    viewer {\n      me {\n        id\n        settings {\n          theme\n        }\n      }\n    }\n  }\n}\n"}}}();dn.hash="703845230823301ccf742e028cd83b65";var un=dn;const cn={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useTheme_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{alias:null,args:null,concreteType:"UserSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"theme",storageKey:null}],storageKey:null}],type:"Me",abstractKey:null,hash:"f2680c75c266f3207f639761a5180533"};var mn=cn;function gn(e){const n=(0,k.useRelayEnvironment)(),a=(0,k.useFragment)(mn,e);return[a.anonymous?a.settings.theme||new tn.Z(a.id).getTheme()||De.Z.theme:a.settings.theme||De.Z.theme,function(e){const r={mutation:un,variables:{input:{settings:{theme:e}}},optimisticResponse:{updateMe:{viewer:{me:{id:a.id,settings:{theme:e}}}}}};a.anonymous?(ke(n,r),new tn.Z(a.id).setTheme(e)):be(n,500,r)}]}function hn(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}var pn=(0,x.forwardRef)((function(e,n){const s=(0,x.useRef)(null),l=(0,x.useState)(null),t=l[0],o=l[1],i=(0,x.useState)(!1),d=i[0],u=i[1],c=(0,x.useContext)(I).setCodeMirror,m=(0,k.useFragment)(xe,e.me),g=(0,k.useFragment)(Te,e.codeshare),h=on(m),p=(0,D.Z)(h,1)[0],y=Je(g),f=(0,D.Z)(y,1)[0],b=nn(g),C=(0,D.Z)(b,1)[0],F=gn(m),S=(0,D.Z)(F,1)[0],v=(0,Ve.BL)(f);return(0,x.useImperativeHandle)(n,(()=>t),[t]),(0,x.useEffect)((()=>{if(t)return;if(!s.current)return;const e=window.CodeMirror=a(4631);a(52539),a(88386),a(21994),a(40790),a(87093),a(77269),a(23412),a(82585),a(73986);const n=s.current,l=function(e){const n={};for(let a in e)null!=e[a]&&(n[a]=e[a]);return n}(function(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?hn(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hn(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}({cursorBlinkRate:g.canEdit.me?De.Z.cursorBlinkRate:-1,cursorHeight:1,indentWithTabs:!1,keyMap:p,lineNumbers:!0,mode:(0,ze.vt)(v).mime,tabSize:parseInt(C,10),theme:S},Ze));W.Z.debug("MODE "+(0,ze.vt)(v).mime);const i=e(n,l);e.modeURL=Re.loadmodeURL,e.autoLoadMode(i,v.mode),W.Z.debug("INIT CODEMIRROR"),W.Z.debug("CODEMIRROR ID "+e.ID),Ae.Z,o(i),c(i)}),[s.current]),(0,x.useEffect)((()=>{const n=()=>u(!0);return e.emitter.on("ready",n),()=>{e.emitter.off("ready",n)}}),[t]),(0,x.useEffect)((()=>null===t||void 0===t?void 0:t.setOption("keyMap",p)),[p]),(0,x.useEffect)((()=>{if(!window.CodeMirror)return;if(!t)return;const e=window.CodeMirror;W.Z.debug("MODE "+(0,ze.vt)(v).mime),null===t||void 0===t||t.setOption("mode",(0,ze.vt)(v).mime),e.modeURL=Re.loadmodeURL,e.autoLoadMode(t,v.mode)}),[v]),(0,x.useEffect)((()=>null===t||void 0===t?void 0:t.setOption("tabSize",parseInt(C,10))),[C]),(0,x.useEffect)((()=>null===t||void 0===t?void 0:t.setOption("theme",S)),[S]),(0,Le.jsxs)(x.Fragment,{children:[(0,Le.jsx)("div",{id:e.id,ref:s}),d?(0,Le.jsx)(Ue,{codeMirror:t,codeshare:g,refetching:e.refetching}):null]})}));a(70189);class yn{constructor(){(0,r.Z)(this,"listenersByEvent",new Map)}on(e,n){const a=this.listenersByEvent.get(e)||new Set;a.add(n),this.listenersByEvent.set(e,a)}off(e,n){const a=this.listenersByEvent.get(e);a&&(a.delete(n),0===a.size&&this.listenersByEvent.delete(e))}emit(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];const s=this.listenersByEvent.get(e);s&&s.forEach((e=>e.apply(this,a)))}}class fn extends yn{constructor(){super(...arguments),(0,r.Z)(this,"queueByEvent",[]),(0,r.Z)(this,"ready",!1)}emit(e){const n=this;for(var a=arguments.length,r=new Array(a>1?a-1:0),s=1;s<a;s++)r[s-1]=arguments[s];if(!this.ready)return"operation"===e?(W.Z.debug("FirepadEmitter emit",{event:e,args:r}),void super.emit(e,...r)):"ready"===e?(this.ready=!0,W.Z.debug("FirepadEmitter emit",{event:e,args:r}),super.emit(e,...r),void setTimeout((()=>{for(;n.queueByEvent.length;){const e=n.queueByEvent.pop(),a=(0,D.Z)(e,2),r=a[0],s=a[1];super.emit(r,...s)}}),0)):void this.queueByEvent.push([e,r]);W.Z.debug("FirepadEmitter emit",{event:e,args:r}),super.emit(e,...r)}}var kn=a(8726),bn=a.n(kn),Cn=e=>{let n=e.doc,a=e.emitter,r=e.handleCodeHistoryEdge,s=e.receivedCodeHistoryEdges,l=e.refCodeshare,t=e.sendTextOp,o=e.sentTextOps,i=e.upsertMe;return function(e,d,u){let c=u;function m(){return l.current}const g={sendCursorDisposable:null,sendTextOpDisposable:null,getDocument:()=>n,isHistoryEmpty:()=>Boolean(null===s||void 0===s?void 0:s.size)||!1,registerCallbacks(e){for(var n in e)a.on(n,e[n])},setColor(e){c=e},setUserId(){},sendCursor(e){m().canEdit.me&&(this.sendCursorDisposable=i({color:c,cursor:e},{onError:e=>{W.Z.error("sendCursor: error",e),this.sendCursorDisposable=null},onCompleted:()=>{this.sendCursorDisposable=null}}))},sendOperation(e,a){if(!n)return;if(!m().canEdit.me)return;const l=s.nextHistoryId(),i=(0,D.Z)(l,2),d=i[0],u=i[1];W.Z.debug("sendOperation: start "+d,{op:e,doc:n});const c=()=>{W.Z.debug("sendOperation: transaction: start "+d,{op:e,doc:n}),o.set(u,e),this.sendTextOpDisposable=t(d,e,{onError:r=>{if(W.Z.warn("sendOperation: transaction: error "+d,{err:r,op:e,doc:n}),this.sendTextOpDisposable=null,/timed out/i.test(r.message))return W.Z.warn("sendOperation: retryable error",r),void c();/rate limit/i.test(r.message)&&(W.Z.error("sendOperation: rate limit error",r),alert("rate limit exceeded!")),W.Z.error("sendOperation: error",r),a&&a(null,!1)},onCompleted:(s,l)=>{if(this.sendTextOpDisposable=null,l||!s.createCodeHistory)return W.Z.error("sendOperation: transaction: response errors "+d,{response:s,errors:l,op:e,doc:n}),void(a&&a(null,!1));W.Z.debug("sendOperation: transaction: response success "+d,{response:s,op:e,doc:n}),r(s.createCodeHistory.newCodeHistoryEdge,u),W.Z.debug("sendOperation: end "+d,{op:e,doc:n}),a&&a(null,!0)}})};c()},on(e,n){a.on(e,n)},trigger(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];a.emit(e,...r)},dispose(){var e,n;null===(e=this.sendCursorDisposable)||void 0===e||e.dispose(),null===(n=this.sendTextOpDisposable)||void 0===n||n.dispose()}};return g.setColor(c),g.sendCursor(null),g}};class Fn extends Map{}class Sn extends C.Z{}function vn(e,n){C.Z.assert(te.Z,"composeTextOp can only be used in the browser");try{return e.compose(n)}catch(a){throw Sn.wrap(a,"invalid text op",{doc:e,textOp:n})}}var _n=a(19920),Kn=a.n(_n);class En extends C.Z{}function Tn(){return(Tn=(0,s.Z)(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0,e.abrupt("return",Mn(0,n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mn(e,n){return xn.apply(this,arguments)}function xn(){return(xn=(0,s.Z)(t().mark((function e(n,a){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",a((e=>Promise.reject(En.wrap(e,"retryable")))));case 4:if(e.prev=4,e.t0=e.catch(0),e.t0 instanceof En){e.next=8;break}throw e.t0;case 8:return e.next=10,Kn()(1e3*Math.pow(2,n));case 10:return e.abrupt("return",Mn(n+1,a));case 11:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}var wn=a(42195),In=a.n(wn);class On extends C.Z{}function jn(e){C.Z.assert(te.Z,"parseTextOp can only be used in the browser");try{return bn().TextOperation.fromJSON(e)}catch(n){throw On.wrap(n,"invalid text op",{json:e})}}var Ln=a(6492);const Pn={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCodeshareCodeHistories_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"refetchableCodeHistoryEdges_codeshare"}],type:"Codeshare",abstractKey:null,hash:"559878d3383800802d431e54ba6535bb"};var Dn=Pn;const Zn=function(){var e=["codeHistory"],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"historyId",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},i={alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[s,r,{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null}],storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"codeHistoryAfter"},{kind:"RootArgument",name:"codeHistoryFirst"}],kind:"Fragment",metadata:{connection:[{count:"codeHistoryFirst",cursor:"codeHistoryAfter",direction:"forward",path:e}],refetch:{connection:{forward:{count:"codeHistoryFirst",cursor:"codeHistoryAfter"},backward:null,path:e},fragmentPathInResult:["node"],operation:a(57376),identifierField:"id"}},name:"refetchableCodeHistoryEdges_codeshare",selections:[n,{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[r,s],storageKey:null},{alias:null,args:null,concreteType:"CodeCheckpoint",kind:"LinkedField",name:"codeCheckpoint",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"codeHistoryId",storageKey:null},l,{alias:null,args:null,concreteType:"CodeHistoryEdge",kind:"LinkedField",name:"codeHistoryEdge",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[n,t,l,o,i],storageKey:null},d],storageKey:null}],storageKey:null},{alias:"codeHistory",args:null,concreteType:"CodeHistoryConnection",kind:"LinkedField",name:"__Codeshare_codeHistory_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistoryConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[n,t,l,o,i,{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},d],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null}}();Zn.hash="5480aec223e32374eed87a6905412379";var Un=Zn;const Nn={codeHistoryAfter:null,codeHistoryFirst:1e3};class An{constructor(e,n){(0,r.Z)(this,"prev",void 0),(0,r.Z)(this,"next",void 0),(0,r.Z)(this,"value",void 0),this.value=e,this.prev=(null===n||void 0===n?void 0:n.prev)||null,this.next=(null===n||void 0===n?void 0:n.next)||null}}class Hn extends class{constructor(e){(0,r.Z)(this,"head",null),e&&(this.head=e)}forEach(e){let n=this.head;for(;n;)e(n),n=n.next}find(e){let n=this.head;for(;n;){var a;if(n=n.next,n&&(null===(a=n)||void 0===a?void 0:a.value)===e)return n}}}{static fromNode(e){let n=e,a=null;for(;n;)a=n,n=n.next;const r=a;for(n=e,a=null;n;)a=n,n=n.prev;return new Hn(a,r)}constructor(e,n){super(e),(0,r.Z)(this,"head",null),(0,r.Z)(this,"tail",null),e&&(this.head=e),n&&(this.tail=n)}push(e){if(null==this.head&&null!=this.tail||null==this.tail&&null!=this.head)throw new Error("head xor tail cannot be null");if(null==this.head||null==this.tail)this.head=this.tail=new An(e);else if(this.head===this.tail)this.tail=new An(e,{prev:this.head}),this.head.next=this.tail;else{const n=this.tail;this.tail=new An(e,{prev:this.head}),n.next=this.tail}return this.tail}pop(){if(!this.tail)return null;const e=this.tail;return this.tail=e.prev,e.prev=null,e}clear(){this.head=null,this.tail=null}delete(e){const n=this.find(e);return n&&(n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev)),Boolean(n)}}class Bn extends class{constructor(){(0,r.Z)(this,"list",new Hn),(0,r.Z)(this,"map",new Map)}clear(){this.list.clear(),this.map.clear()}delete(e){return!!this.has(e)&&(this.list.delete(e),this.map.delete(e))}forEachAfter(e,n){this.getList(e).forEach((e=>{const a=e.value,r=this.get(a);r&&n(r,a)}))}forEach(e){this.list.head&&this.forEachAfter(this.list.head.value,e)}getList(e){if(null==e)return this.list;const n=this.map.get(e);return n?new Hn(n.node):new Hn}get(e){const n=this.map.get(e);return null===n||void 0===n?void 0:n.value}has(e){return this.map.has(e)}set(e,n){const a=this.list.push(e);return this.map.set(e,{node:a,value:n}),this}get size(){return this.map.size}get head(){return this.list.head}get tail(){return this.list.tail}}{constructor(){super(...arguments),(0,r.Z)(this,"outOfOrder",new Map),(0,r.Z)(this,"last",null)}nextHistoryId(){let e=0;if(this.outOfOrder.size){let n=0;this.outOfOrder.forEach(((e,a)=>{a>n&&(n=a)})),e=n+1}else if(this.tail){e=this.tail.value+1}return[In().encodeHistoryIndex(e),e]}forEach(e){null==this.last?super.forEach(((n,a)=>{this.last=a,e(n,a)})):this.forEachAfter(this.last,((n,a)=>{this.last=a,e(n,a)}))}has(e){return null!=this.head&&this.head.value>=e||super.has(e)}set(e,n){if(super.has(e))return this;const a=e-1;if(!(0===this.size)&&!this.has(a))return this.outOfOrder.set(e,n),this;super.set(e,n);let r=e+1,s=this.outOfOrder.get(r);for(;s;)super.set(r,s),this.outOfOrder.delete(r),r++,s=this.outOfOrder.get(r);return this}isOutOfOrder(e){return this.outOfOrder.has(e)}}const Rn=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"CreateCodeHistoryResponse",kind:"LinkedField",name:"createCodeHistory",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[n],storageKey:null},{alias:null,args:null,concreteType:"CodeHistoryEdge",kind:"LinkedField",name:"newCodeHistoryEdge",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"codeshareId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"historyId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"createCodeHistoryMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"createCodeHistoryMutation",selections:a},params:{cacheID:"4d2d55434c36e9bdc474081d0f9dd74f",id:null,metadata:{},name:"createCodeHistoryMutation",operationKind:"mutation",text:"mutation createCodeHistoryMutation(\n  $input: CreateCodeHistoryInput!\n) {\n  createCodeHistory(input: $input) {\n    codeshare {\n      id\n    }\n    newCodeHistoryEdge {\n      node {\n        id\n        codeshareId\n        createdAt\n        createdBy {\n          me\n          userId\n          clientId\n        }\n        historyId\n        value\n      }\n      cursor\n    }\n  }\n}\n"}}}();Rn.hash="d8460e699da3d3e3dff197865083443f";var Vn=Rn,zn=a(73855);const qn=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"CodeHistoryCreationsPayload",kind:"LinkedField",name:"codeHistoryCreations",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistoryEdge",kind:"LinkedField",name:"newCodeHistoryEdge",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"codeshareId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"historyId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"onCodeHistoryCreationsSubscription",selections:n,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"onCodeHistoryCreationsSubscription",selections:n},params:{cacheID:"4d8d5759b54b052238f448ad7a34b4a3",id:null,metadata:{},name:"onCodeHistoryCreationsSubscription",operationKind:"subscription",text:"subscription onCodeHistoryCreationsSubscription(\n  $input: CodeHistoryCreationsInput!\n) {\n  codeHistoryCreations(input: $input) {\n    newCodeHistoryEdge {\n      node {\n        id\n        codeshareId\n        createdAt\n        createdBy {\n          me\n          userId\n          clientId\n        }\n        historyId\n        value\n      }\n      cursor\n    }\n  }\n}\n"}}}();qn.hash="f6d7c029ab638b9d8572870aacf131d9";var $n=qn;function Qn(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function Gn(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?Qn(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qn(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}let Jn=!1;function Wn(e){var n;const a=document.querySelector(".CodeMirror");return!!window.localStorage&&(window.localStorage.backup=null===a||void 0===a||null===(n=a.CodeMirror)||void 0===n?void 0:n.getValue(),!1)}function Yn(e,n){if(zn.Z)return[new Bn,()=>({dispose:()=>{}})];const a=()=>{},r=n.onNext||a,s=n.onError||a,l=(n.onCompleted,(0,x.useState)(new Bn)[0]),t=(0,k.useRelayEnvironment)(),o=(0,k.useFragment)(Dn,e),i=function(e){const n=(0,k.useRefetchableFragment)(Un,e),a=(0,D.Z)(n,2),r=a[0],s=a[1];return[(null===r||void 0===r?void 0:r.codeCheckpoint)||null,(null===r||void 0===r?void 0:r.codeHistory.edges)||[],s]}(o),d=(0,D.Z)(i,3),u=d[0],c=d[1],m=d[2],g=(e,n)=>{if(null==e.node)return;const a=e.node.historyId,s=In().decodeHistoryId(a);if(l.has(s))return;if(l.set(s,e),n)return void W.Z.debug("dontCallback code history ".concat(s),{edge:e});if(l.isOutOfOrder(s))return;l.getList(s).forEach((e=>{const n=e.value,a=l.get(n);a&&r(a,n)}))};(0,x.useEffect)((()=>{var e;const n=(null===(e=J(Xn(u,c)))||void 0===e?void 0:e.cursor)||null,a=oe((()=>{m({id:o.id,codeHistoryAfter:n,codeHistoryFirst:1e3},{fetchPolicy:"store-and-network"})}));return()=>a.dispose()}),[o.id,u,c]);const h=(0,x.useRef)(!0);(0,x.useEffect)((()=>{var e;const n=Xn(u,c),a=n.length?n[0]:null;if(l.tail&&null!==a&&void 0!==a&&a.node){l.tail.value,In().decodeHistoryId(a.node.historyId);0}n.forEach((e=>g(e,h.current))),h.current&&(h.current=!1);const r=(null===(e=J(n))||void 0===e?void 0:e.cursor)||null,i=function(e,n,a){return W.Z.debug("requestSubscription: codeHistoryCreations",n),(0,ee.requestSubscription)(e,{subscription:$n,variables:n,onNext(e){null!==a&&void 0!==a&&a.onNext&&a.onNext(e)},onError(e){null!==a&&void 0!==a&&a.onError&&a.onError(e)},onCompleted(){null!==a&&void 0!==a&&a.onCompleted&&a.onCompleted()}})}(t,{input:{codeshareId:o.id,after:r}},{onNext(e){var n;const a=null===e||void 0===e||null===(n=e.codeHistoryCreations)||void 0===n?void 0:n.newCodeHistoryEdge;a&&g(a)},onError(e){s(e)}});return()=>{i.dispose()}}),[o.id,null===u||void 0===u?void 0:u.codeHistoryId,c]);return[l,(e,n,a)=>(Jn=!0,(0,ee.commitMutation)(t,Gn(Gn({mutation:Vn,variables:{input:{codeshareId:o.id,historyId:e,value:n.toJSON()}},configs:[{type:"RANGE_ADD",parentName:"codeshare",parentID:o.id,connectionName:"codeHistory",edgeName:"newCodeHistoryEdge",rangeBehaviors:{"":"append"}}]},a),{},{onError(e){Jn=!1,null!==a&&void 0!==a&&a.onError&&a.onError(e)},onCompleted(e,n){Jn=!1,!n&&e.createCodeHistory&&g(e.createCodeHistory.newCodeHistoryEdge,!0),null!==a&&void 0!==a&&a.onCompleted&&a.onCompleted(e,n)}})))]}function Xn(e,n){let a=[],r=null;return e&&(r=Gn(Gn({},e),{},{node:Gn(Gn({},e.codeHistoryEdge.node),{},{value:e.value})}),a.push(r)),a.concat(n)}te.Z&&window.addEventListener("close",(()=>{!1!==Jn&&Wn("This codeshare has unsaved changes. Want to save a copy before exiting?")}));function ea(e){const n=(0,x.useRef)(te.Z?new(bn().TextOperation):null),a=(0,x.useState)(null),r=a[0],s=a[1],l=(0,x.useState)(new fn)[0],t=(0,x.useState)(null),o=t[0],i=t[1],d=e=>n.current=e;W.Z.debug("CodeshareFirepad",{doc:n.current,firepad:r});const u=(0,k.useRelayEnvironment)(),c=(0,k.useFragment)(A,e.me),m=(0,k.useFragment)(U,e.codeshare),g=(0,x.useRef)(m);g.current=m;const h=Yn(m,{onNext:_}),p=(0,D.Z)(h,2),y=p[0],f=p[1],b=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{onCodeshareUserCreated:_e,onCodeshareUserUpdated:_e,onCodeshareUserDeleted:_e};const a=(0,k.useRelayEnvironment)(),r=(0,k.useFragment)(B,e),s=q(r),l=(0,D.Z)(s,2),t=l[0],o=l[1],i=(0,x.useRef)([]),d=(0,x.useRef)(new Map);function u(e){const a=e.id,r=d.current.get(a);r&&r.dispose(),n.onCodeshareUserDeleted(a)}function c(e){e.createdBy.me||n.onCodeshareUserUpdated(e)}function m(e){e.createdBy.me||n.onCodeshareUserCreated(e)}(0,x.useEffect)((()=>{const e=oe((()=>{o({id:r.id,codeshareUsersFirst:100},{fetchPolicy:"store-and-network"})}));return()=>e.dispose()}),[r.id]),(0,x.useEffect)((()=>{const e=i.current,n=i.current=t.map((e=>e.node)).filter((e=>null!=e)),a=G(e,(e=>e.id)),r=$(G(n,(e=>e.id)),a,((e,n)=>e.id===n.id&&e.modifiedAt===n.modifiedAt));W.Z.debug("useCodeshareUsers deleted "+r.deleted.size,{keys:Array.from(r.deleted.keys())}),W.Z.debug("useCodeshareUsers updated "+r.updated.size,{keys:Array.from(r.updated.keys())}),W.Z.debug("useCodeshareUsers created "+r.created.size,{keys:Array.from(r.created.keys())}),r.deleted.forEach(u),r.updated.forEach(c),r.created.forEach(m)}),[t]),(0,x.useEffect)((()=>{var e;const n=t.filter((e=>null!=e.node)),s=se(a,{input:{codeshareId:r.id,after:null===(e=J(n.filter(Ke)))||void 0===e?void 0:e.cursor}}),l=ne(a,{input:{codeshareId:r.id,currentCodeshareUserIds:n.map((e=>e.node.id))}});return()=>{s.dispose(),l.dispose()}}),[r.id]);return[t,(e,n)=>be(a,500,ve({mutation:Fe,variables:{input:ve({codeshareId:r.id},e)},configs:[{type:"RANGE_ADD",parentName:"codeshare",parentID:r.id,connectionName:"users",edgeName:"codeshareUserEdge",rangeBehaviors:{"":"prepend"}}]},n))]}(m,{onCodeshareUserCreated:function(e){W.Z.debug("handleCodeshareUserCreated",e),l.emit("cursor",e.createdBy.userId,e.cursor,e.color)},onCodeshareUserUpdated:function(e){W.Z.debug("handleCodeshareUserUpdated",{codeshareUser:e}),l.emit("cursor",e.createdBy.userId,e.cursor,e.color)},onCodeshareUserDeleted:function(e){const n=In().decodeRelayId("CodeshareUser",e);W.Z.debug("handleCodeshareUserDeleted",{relayCodeshareUserId:e,userId:n}),l.emit("cursor",n,null)}}),C=(0,D.Z)(b,2),F=(C[0],C[1]),S=(0,x.useState)(new Fn)[0];(0,x.useEffect)((()=>{const e=n.current;if(!e)return;if(!o)return;if(r)return;W.Z.debug("createFirepad",{doc:e,firepad:r}),bn().FirebaseAdapter=Cn({doc:e,emitter:l,handleCodeHistoryEdge:_,receivedCodeHistoryEdges:y,refCodeshare:g,sendTextOp:f,sentTextOps:S,upsertMe:F});const a=bn().fromCodeMirror({push:()=>({key:c.id})},o,{});return s(a),()=>{a.dispose()}}),[o]),(0,x.useEffect)((()=>{r&&function(e){const a=n.current;if(!a)return;W.Z.debug("handleInitialCodeHistoryEdges: start:",{doc:a});let r=a;e.forEach(((e,n)=>{if(null==e.node)return;const s=e.node.historyId;try{r=vn(r,jn(e.node.value)),W.Z.debug("handleInitialCodeHistoryEdges: compose success: ".concat(s),{doc:a,nextDoc:r})}catch(l){W.Z.error("handleInitialCodeHistoryEdges: compose error: ".concat(s),{err:l,doc:a})}}));const s=n.current;d(r);try{l.emit("operation",r)}catch(t){console.error(t,{prevDoc:s,nextDoc:r})}0===e.size&&(null===o||void 0===o||o.setOption("placeholder","Write or paste code here then share. Anyone you share with will see code as it is typed!"));W.Z.debug("handleInitialCodeHistoryEdges: success:",{doc:a,nextDoc:r}),setTimeout((()=>{W.Z.debug("CodeshareFirepad: ready"),l.emit("ready")}),0)}(y)}),[r,y]);let v=!1;function _(e,a){const r=n.current;if(!r)return;if(null==e.node)return;const s=e.node.historyId;let t;W.Z.debug("handleCodeHistoryEdge: start: ".concat(s),{doc:r});let o=r;try{t=jn(e.node.value),o=vn(o,t),W.Z.debug("handleCodeHistoryEdge: compose success: ".concat(s),{doc:r,nextDoc:o}),d(o)}catch(c){return void W.Z.error("handleCodeHistoryEdge: compose error: ".concat(s),{err:c,doc:r,nextDoc:o})}if(S.has(a)){var i;const n=e.node;n&&n.createdBy.me&&null!==(i=S.get(a))&&void 0!==i&&i.equals(t)?((v||0!==a&&a%100===0)&&(v=!1,function(e){Tn.apply(this,arguments)}((e=>new Promise(((a,r)=>(0,ee.commitMutation)(u,{mutation:Ln.Z,variables:{input:{id:m.id,codeCheckpoint:{codeHistoryId:n.id,value:o.toJSON()}}},onError(n){if(/timed out/.test(n.message))return e(n);W.Z.error("saveCheckpointFailed",{err:n}),v=!0,r(n)},onCompleted(){W.Z.debug("saveCheckpointSuccess"),v=!1,a()}}))).catch((e=>{W.Z.error("commit checkpoint error",{codeshareId:m.id,err:e})}))))),W.Z.debug("handleCodeHistoryEdge: ack: "+s),S.delete(a),l.emit("ack")):(W.Z.debug("handleCodeHistoryEdge: retry: "+s),l.emit("operation",t),l.emit("retry"))}else W.Z.debug("handleCodeHistoryEdge: op: "+s),l.emit("operation",t);W.Z.debug("handleCodeHistoryEdge: success: "+s,{doc:r})}return(0,Le.jsx)(x.Fragment,{children:(0,Le.jsx)(pn,{id:e.id,ref:i,codeshare:m,emitter:l,me:c,refetching:e.refetching})})}function na(e){const n=(0,k.useFragment)(P,e.me),a=(0,k.useFragment)(j,e.codeshare);return(0,Le.jsx)(ea,{id:"editor",codeshare:a,me:n,refetching:e.refetching})}const aa={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareHead_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareLazyHead_codeshare"}],type:"Codeshare",abstractKey:null,hash:"ccef966e26c0c44285c596bfe7f5c9d2"};var ra=aa;const sa={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareHead_me",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareLazyHead_me"},{args:null,kind:"FragmentSpread",name:"useKeymap_me"}],type:"Me",abstractKey:null,hash:"e6091dc2407953e33f1d9110d24f56b2"};var la=sa;const ta={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareLazyHead_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],type:"Codeshare",abstractKey:null,hash:"35d209d7aaf75310c379810fa84cfc6a"};var oa=ta;const ia={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareLazyHead_me",selections:[{args:null,kind:"FragmentSpread",name:"useTheme_me"}],type:"Me",abstractKey:null,hash:"be892124d65c50a9fd05824e5bc65b17"};var da=ia,ua=a(14559),ca=a(6327);function ma(e){const n=(0,k.useFragment)(da,e.me),a=(0,k.useFragment)(oa,e.codeshare),r=gn(n),s=(0,D.Z)(r,1)[0],l=(0,x.useRef)(new Set);return l.current.add(s),(0,x.useMemo)((()=>(0,Le.jsxs)(ua.Z,{children:[(0,Le.jsx)("title",{children:"".concat((0,ca.Z)(a)," - Codeshare")}),Array.from(l.current).map((e=>(0,Le.jsx)("link",{rel:"stylesheet",href:Re.theme(e)},e)))]})),[l.current.size])}const ga=[["comment/comment",null],["dialog/dialog",null],["comment/continuecomment",{continueComments:{continueLineComment:!1}}],["edit/closebrackets",{autoCloseBrackets:!0}],["edit/closetag",{autoCloseTags:!0}],["edit/matchbrackets",{matchBrackets:!0}],["edit/trailingspace",null],["mode/overlay",null],["search/match-highlighter",{highlightSelectionMatches:!0}],["search/search",null],["search/searchcursor",null]];function ha(e){const n=(0,x.useContext)(I).codeMirror,a=(0,x.useState)(!1),r=a[0],s=a[1],l=(0,k.useFragment)(la,e.me),t=(0,k.useFragment)(ra,e.codeshare);return(0,x.useEffect)((()=>{if(!n)return;const e=setTimeout((()=>s(!0)),3e3);return()=>clearTimeout(e)}),[n]),(0,Le.jsxs)(x.Fragment,{children:[(0,x.useMemo)((()=>r&&n?n.toggleComment?(0,Le.jsx)(ua.Z,{children:ga.map((e=>{let n=(0,D.Z)(e,3),a=n[0];n[1];return n[2]?(0,Le.jsx)("link",{rel:"stylesheet",href:Re.addon(a,"css")},a):null}))},"lazyHead"):(te.Z&&(window.setCodeMirrorOpts=function(e){const a=ga.find((n=>(0,D.Z)(n,1)[0]===e));if(!a)return;const r=(0,D.Z)(a,2),s=(r[0],r[1]);W.Z.debug("SET "+e,s||{}),Object.keys(s).forEach((e=>n.setOption(e,s[e])))}),(0,Le.jsx)(ua.Z,{children:ga.map((e=>{let n=(0,D.Z)(e,3),a=n[0],r=n[1];return n[2]?(0,Le.jsx)("link",{rel:"stylesheet",href:Re.addon(a,"css")},a):(0,Le.jsx)("script",{src:Re.addon(a),onLoad:r?"window.setCodeMirrorOpts('".concat(a,"')"):""},a)}))})):null),[n,r]),(0,Le.jsx)(ma,{me:l,codeshare:t})]})}const pa={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareNavbar_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"companyImage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{args:null,kind:"FragmentSpread",name:"CodeshareShareButton_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareShareModal_codeshare"}],type:"Codeshare",abstractKey:null,hash:"6edba2d07e75ee075e7a42d37033340d"};var ya=pa;const fa={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareNavbar_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{args:null,kind:"FragmentSpread",name:"UserNavbar_me"},{args:null,kind:"FragmentSpread",name:"CodeshareShareModal_me"},{args:null,kind:"FragmentSpread",name:"PlansButton_me"},{args:null,kind:"FragmentSpread",name:"isCodeshareProSubscriber_me"}],type:"Me",abstractKey:null,hash:"9e9644bbf9ac840fe799d8a66aa02f12"};var ka=fa,ba=a(74579),Ca=a(44925);const Fa={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareShareButton_codeshare",selections:[{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"cdf89f43964cf890ba394db4a41cf7e3"};var Sa=Fa,va=a(51436),_a=a(67814);const Ka=["codeshare"];function Ea(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function Ta(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?Ea(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ea(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}var Ma=e=>{var n;const a=e.codeshare,r=(0,Ca.Z)(e,Ka),s=(0,k.useFragment)(Sa,a);return(0,Le.jsxs)(ba.ZP,Ta(Ta({},r),{},{children:[(0,Le.jsx)(_a.G,{icon:null!==(n=s.canEdit)&&void 0!==n&&n.userIds?va.byT:va.FVb}),"\xa0Share"]}))};const xa={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareShareModal_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareShareUrl_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareViewOnlyCheckbox_codeshare"}],type:"Codeshare",abstractKey:null,hash:"c33dfb6632a168969705d250ba90dc00"};var wa=xa;const Ia={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareShareModal_me",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareViewOnlyCheckbox_me"}],type:"Me",abstractKey:null,hash:"022238053b34a9330071a2c49f03ea7f"};var Oa=Ia;const ja={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareShareUrl_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Codeshare",abstractKey:null,hash:"c3b8e0b16081b3b312e85a5c13aae9f0"};var La=ja,Pa=a(30924),Da=a(735),Za=a.n(Da);function Ua(e){const n=(0,x.useRef)(null),a=(0,x.useState)(!1),r=a[0],s=a[1],l=(0,k.useFragment)(La,e.codeshare),t=In().decodeRelayId("Codeshare",l.id),o="https://codeshare.io/".concat(t),i=()=>{var e;const a=Za()(o);null===(e=n.current)||void 0===e||e.select(),Pa.Z.track("Selected share url"),a?s(!0):W.Z.error("clipboard copy failed")};return(0,x.useEffect)((()=>{if(!r)return;const e=setTimeout((()=>s(!1)),800);return()=>clearTimeout(e)}),[r]),(0,Le.jsxs)("div",{className:"form-field",children:[(0,Le.jsx)("label",{htmlFor:"url",children:"Share this URL"}),(0,Le.jsx)("input",{ref:n,type:"text",name:"url",id:"url",value:o,onClick:i,readOnly:!0}),(0,Le.jsx)(ba.ZP,{theme:ba.yU.ICON,hint:ba.kd.TOP,onClick:i,children:(0,Le.jsx)(_a.G,{icon:va.kZ_})}),(0,Le.jsx)("span",{className:"copy-success",style:{opacity:r?1:0,transition:"opacity .2s cubic-bezier(.17,.67,.83,.67)"},children:"Copied!"})]})}const Na=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareViewOnlyCheckbox_codeshare",selections:[e,{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"isCodeshareViewOnly_codeshare"}],type:"Codeshare",abstractKey:null}}();Na.hash="5bb3dfb73cd62eaf5f318b5be1f2fff6";var Aa=Na;const Ha={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareViewOnlyCheckbox_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{args:null,kind:"FragmentSpread",name:"isCodeshareProSubscriber_me"},{args:null,kind:"FragmentSpread",name:"CodeshareProModal_me"}],type:"Me",abstractKey:null,hash:"cc14316b70c2dceb5a7984e2b64e6b82"};var Ba=Ha,Ra=a(94184),Va=a.n(Ra);const za=["hint","label","name","note","onMouseEnter"];function qa(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function $a(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?qa(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qa(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function Qa(e){e.hint,e.label,e.name,e.note,e.onMouseEnter;const n=(0,Ca.Z)(e,za);return(0,Le.jsxs)("div",{className:"form-field",children:[(0,Le.jsx)("label",{htmlFor:e.name,children:e.label}),(0,Le.jsxs)("label",{className:Va()({switch:!0,"hint--top":null!=e.hint}),onMouseEnter:e.onMouseEnter,"data-hint":e.hint,children:[(0,Le.jsx)("input",$a($a({},n),{},{type:"checkbox",className:"switch-input"})),(0,Le.jsx)("span",{className:"switch-label","data-on":"On","data-off":"Off"}),(0,Le.jsx)("span",{className:"switch-handle"})]}),e.note?(0,Le.jsx)("p",{className:"note",children:e.note}):null]})}var Ga=a(88575);const Ja={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"isCodeshareViewOnly_codeshare",selections:[{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"873602aa31926c022e73c20628d444e0"};var Wa=Ja;const Ya=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpdateCodesharePermissionsResponseType",kind:"LinkedField",name:"updateCodesharePermissions",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"updateCodesharePermissionsMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"updateCodesharePermissionsMutation",selections:n},params:{cacheID:"00a411b92ecb762f89bb9fc3ca09e433",id:null,metadata:{},name:"updateCodesharePermissionsMutation",operationKind:"mutation",text:"mutation updateCodesharePermissionsMutation(\n  $input: UpdateCodesharePermissionsInput!\n) {\n  updateCodesharePermissions(input: $input) {\n    codeshare {\n      id\n      canEdit {\n        userIds\n        me\n      }\n    }\n  }\n}\n"}}}();Ya.hash="f9d0ffae8efb89556ae54819d5817753";var Xa=Ya;function er(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function nr(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?er(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):er(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function ar(e){const n=(0,k.useRelayEnvironment)(),a=(0,k.useFragment)(Ba,e.me),r=(0,k.useFragment)(Aa,e.codeshare),s=(0,x.useState)(!1),l=s[0],t=s[1],o=function(e){const n=(0,k.useFragment)(Wa,e);return Boolean(n.canEdit.userIds)}(r),i=(0,w.Z)(a);function d(){Pa.Z.track("Clicked view-only checkbox",{creator:!r.createdBy.me,anonymous:a.anonymous})}function u(){Pa.Z.track("Hover view-only",{creator:!r.createdBy.me,anonymous:a.anonymous})}let c={checked:o,label:'"View only" mode',note:'Turn on "view only" mode if you dont want others to edit the code',name:"view-only"};return c=r.createdBy.me?a.anonymous?nr(nr({},c),{},{hint:"Sorry, only registered users can manage permissions.",onChange:d,onMouseEnter:u}):nr(nr({},c),{},o||i?{hint:'Toggle "view only" mode',onChange:function(e){(0,ee.commitMutation)(n,{mutation:Xa,variables:{input:{id:r.id,viewOnly:!o}},optimisticResponse:{updateCodesharePermissions:{codeshare:{id:r.id,canEdit:o?{userIds:[r.createdBy.userId],me:r.createdBy.me}:{userIds:null,me:!0}}}}})}}:{hint:"This requires Codeshare Pro. Click to learn more.",onChange:()=>t(!0),onMouseEnter:u}):nr(nr({},c),{},{hint:"Sorry, only the creator of the Codeshare (".concat(r.createdBy.user.name||"anonymous",") can manage permissions."),onChange:d,onMouseEnter:u}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)(Qa,nr({},c)),l?(0,Le.jsx)(Ga.Z,{me:a,trigger:"view-only-checkbox",onClose:()=>t(!1)}):null]})}var rr=a(55769);function sr(e){const n=(0,k.useFragment)(Oa,e.me),a=(0,k.useFragment)(wa,e.codeshare);return(0,Le.jsx)(rr.Z,{onClose:e.onClose,title:"Share Code",renderBody:()=>(0,Le.jsxs)("div",{className:"share-modal",children:[(0,Le.jsx)("p",{children:"Anyone with access to this URL will see your code in real time."}),(0,Le.jsx)(Ua,{codeshare:a}),(0,Le.jsx)(ar,{me:n,codeshare:a})]})})}var lr=a(46359),tr=a(74685),or=a(88986),ir=a(68173);var dr=e=>{const n=(0,x.useState)(!1),a=n[0],r=n[1],s=(0,k.useFragment)(ka,e.me),l=(0,k.useFragment)(ya,e.codeshare),t=(0,w.Z)(s),o=(0,x.useCallback)((()=>l.createdBy.user.companyImage?(0,Le.jsxs)("div",{className:"span6",children:[(0,Le.jsx)(tr.Z,{link:!0,alt:"Codeshare logo",className:"header__logo-only",src:l.createdBy.user.companyImage}),(0,Le.jsx)("h1",{id:"title",children:(0,ca.Z)(l)})]}):s.anonymous?null:(0,Le.jsxs)("div",{className:"span6",children:[(0,Le.jsx)(tr.Z,{link:!0,alt:"Codeshare logo",className:"header__logo-only",src:"/-/img/codeshare-logo-small.svg"}),(0,Le.jsx)("h1",{id:"title",children:(0,ca.Z)(l)})]})),[s,l]);return(0,Le.jsxs)(x.Fragment,{children:[(0,Le.jsx)(ir.Z,{me:s,renderAnonActions:()=>l.createdBy.me?[(0,Le.jsx)("span",{id:"expire-time",children:"Expires in 24 hours\xa0\xa0"},"1"),(0,Le.jsx)(lr.Z,{href:"/register?saveCodeshare=".concat(encodeURIComponent(In().decodeRelayId("Codeshare",l.id))),rel:"nofollow",className:"btn btn-primary btn-sm",children:"Save Codeshare"},"2"),(0,Le.jsx)(Ma,{codeshare:l,onClick:()=>r(!0),size:ba.NO.SMALL,theme:ba.yU.SECONDARY},"share"),(0,Le.jsx)(lr.Z,{href:"/login",className:"btn btn-secondary btn-sm",children:"Log In"},"login")]:[(0,Le.jsx)(Ma,{codeshare:l,onClick:()=>r(!0),size:ba.NO.SMALL,theme:ba.yU.SECONDARY},"share"),(0,Le.jsx)(lr.Z,{href:"/register",className:"btn btn-secondary btn-sm",children:"Sign Up"},"register"),(0,Le.jsx)(lr.Z,{href:"/login",className:"btn btn-secondary btn-sm",children:"Log In"},"login")],renderAuthActions:()=>{const e=[(0,Le.jsx)("li",{children:(0,Le.jsx)(Ma,{codeshare:l,onClick:()=>r(!0),size:ba.NO.SMALL,theme:ba.yU.SECONDARY})},"share")];return t||e.unshift((0,Le.jsx)("li",{children:(0,Le.jsx)(or.Z,{locationDesc:"codeshare-page-navbar",me:s,size:ba.NO.SMALL,theme:ba.yU.PRIMARY,children:"Upgrade"})},"upgrade")),e},children:o()}),a?(0,Le.jsx)(sr,{me:s,codeshare:l,onClose:()=>r(!1)}):null]})};const ur={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareSidebarSubscription_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareSettingsFormSubscription_codeshare"}],type:"Codeshare",abstractKey:null,hash:"a31d58e474c29dcf44656114e10b22b9"};var cr=ur;const mr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareSidebarSubscription_me",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareSettingsFormSubscription_me"}],type:"Me",abstractKey:null,hash:"fb020ffccca7982ae5c81923d87b4fda"};var gr=mr;const hr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareSidebar_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareSettingsForm_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareDownloadButton_codeshare"},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"isCodeshareProSubscriber_user"}],storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"e4d05c3c1bfc12857e8f9188ce26afd2"};var pr=hr;const yr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareSidebar_me",selections:[{args:null,kind:"FragmentSpread",name:"isCodeshareProSubscriber_me"},{args:null,kind:"FragmentSpread",name:"CodeshareSettingsForm_me"}],type:"Me",abstractKey:null,hash:"e0bdb0b33c37b0e3b666f3cd520771e0"};var fr=yr;const kr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareDownloadButton_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modeName",storageKey:null}],type:"Codeshare",abstractKey:null,hash:"6b1de6405f39d8251581f39820b0da40"};var br=kr;a(60285);function Cr(e){const n=(0,x.useContext)(I).codeMirror,a=(0,k.useFragment)(br,e.codeshare);return(0,Le.jsx)("button",{id:"codeshare-download-button",className:"btn-icon hint--left","data-hint":"Download",disabled:null==n,onClick:e=>{if(e.stopPropagation(),!n)return;const r=(0,Ve.BL)(a.modeName),s=Ve.ZP.find((e=>e.name.toLowerCase()===r.name.toLowerCase()))||De.v,l=n.getValue(),t=new Blob([l],{type:"".concat(s.mime,";charset=utf-8")}),o=(0,ca.Z)(a),i=(0,ze.r6)(s);!function(e,n){C.Z.assert(te.Z,"downloadBlob can only be invoked in browser");const a=document.createElement("a");a.download=n,a.innerHTML="Download File",a.href=URL.createObjectURL(e),a.style.display="none",document.body.appendChild(a),a.click(),setTimeout((()=>{URL.revokeObjectURL(a.href),document.body.removeChild(a)}),1e4)}(t,"".concat(o,".").concat(i))},children:(0,Le.jsx)(_a.G,{icon:va.q7m})})}const Fr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareSettingsFormSubscription_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareTitleFormField_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareModeNameFormField_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareTabSizeFormField_codeshare"}],type:"Codeshare",abstractKey:null,hash:"94b85af44b8239876e7471f47ca0fdd4"};var Sr=Fr;const vr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareSettingsFormSubscription_me",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareThemeFormField_me"},{args:null,kind:"FragmentSpread",name:"CodeshareKeymapFormField_me"}],type:"Me",abstractKey:null,hash:"92e087adb56f91c8f7cc3ef5f2d2dbd6"};var _r=vr;const Kr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareSettingsForm_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareTitleFormField_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareModeNameFormField_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareTabSizeFormField_codeshare"}],type:"Codeshare",abstractKey:null,hash:"dae2b1cf9e698af33ed4d7e8097fd905"};var Er=Kr;const Tr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareSettingsForm_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{args:null,kind:"FragmentSpread",name:"CodeshareThemeFormField_me"},{args:null,kind:"FragmentSpread",name:"CodeshareKeymapFormField_me"}],type:"Me",abstractKey:null,hash:"7cb504ff1f8b586781c458eac03ecc0c"};var Mr=Tr;const xr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareKeymapFormField_me",selections:[{args:null,kind:"FragmentSpread",name:"useKeymap_me"}],type:"Me",abstractKey:null,hash:"0d0d273861ff0227c0e1a36283793e4a"};var wr=xr,Ir=a(17607),Or=a(96767);function jr(e){const n=on((0,k.useFragment)(wr,e.me)),a=(0,D.Z)(n,2),r=a[0],s=a[1];return(0,Le.jsx)(Or.Z,{name:"keymap",type:"select",label:"Keymap",autoFocus:e.autoFocus,value:r,options:Ir.ZP,onChange:s})}const Lr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareModeNameFormField_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"useCodeshareModeName_codeshare"},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"44a0b075824a4d3bc10a07fdd92425df"};var Pr=Lr;function Dr(e){const n=(0,k.useFragment)(Pr,e.codeshare),a=Je(n),r=(0,D.Z)(a,2),s=r[0],l=r[1];return(0,Le.jsx)(Or.Z,{name:"modeName",type:"select",label:"Syntax",disabled:!n.canEdit.me,autoFocus:e.autoFocus,value:s,options:Ve.fo,onChange:l})}const Zr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareTabSizeFormField_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"useCodeshareTabSize_codeshare"},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"91604d76920a6f52486445c0776bb8b1"};var Ur=Zr,Nr=a(2655);function Ar(e){const n=(0,k.useFragment)(Ur,e.codeshare),a=nn(n),r=(0,D.Z)(a,2),s=r[0],l=r[1];return(0,Le.jsx)(Or.Z,{name:"tabSize",type:"select",label:"Tab Size",disabled:!n.canEdit.me,autoFocus:e.autoFocus,value:s,options:Nr.Z,onChange:l})}const Hr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareThemeFormField_me",selections:[{args:null,kind:"FragmentSpread",name:"useTheme_me"}],type:"Me",abstractKey:null,hash:"7519a91b3bed27fc7400e354fbe9b34b"};var Br=Hr,Rr=a(38804);function Vr(e){const n=gn((0,k.useFragment)(Br,e.me)),a=(0,D.Z)(n,2),r=a[0],s=a[1];return(0,Le.jsx)(Or.Z,{name:"theme",type:"select",label:"Theme",autoFocus:e.autoFocus,value:r,options:Rr.ZP,onChange:s})}const zr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareTitleFormField_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"useCodeshareTitle_codeshare"},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"ff19f7e9f441897c38962242daaadf94"};var qr=zr;const $r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCodeshareTitleSubscription_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],type:"Codeshare",abstractKey:null,hash:"4761b34677f8cde227277f0fd5a9ee9c"};var Qr=$r;const Gr=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpdateCodeshareResponse",kind:"LinkedField",name:"updateCodeshare",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useCodeshareTitleMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useCodeshareTitleMutation",selections:n},params:{cacheID:"048319df5c66f659c79c80a2c8b45529",id:null,metadata:{},name:"useCodeshareTitleMutation",operationKind:"mutation",text:"mutation useCodeshareTitleMutation(\n  $input: UpdateCodeshareInput!\n) {\n  updateCodeshare(input: $input) {\n    codeshare {\n      id\n      createdAt\n      title\n    }\n  }\n}\n"}}}();Gr.hash="61bcd8eb4195f64f02bc9397bd92c923";var Jr=Gr;const Wr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCodeshareTitle_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],type:"Codeshare",abstractKey:null,hash:"d48bdb65f2475bc1e065c140000d9372"};var Yr=Wr;function Xr(e,n){const a=(0,k.useRelayEnvironment)(),r=(0,k.useFragment)(Yr,e);return[n?r.title||"":(0,ca.Z)(r),function(e){be(a,500,{mutation:Jr,variables:{input:{id:r.id,title:e}},optimisticResponse:{updateCodeshare:{codeshare:{id:r.id,createdAt:r.createdAt,title:e}}}})}]}function es(e){const n=(0,k.useFragment)(qr,e.codeshare),a=Xr(n,!0),r=(0,D.Z)(a,2),s=r[0],l=r[1];return(0,Le.jsx)(Or.Z,{name:"title",type:"text",label:"Title",disabled:!n.canEdit.me,autoFocus:e.autoFocus,value:s,onChange:l})}Xr.subscriptionFragment=Qr;var ns=a(26173);function as(e){const n=(0,k.useFragment)(Mr,e.me),a=(0,k.useFragment)(Er,e.codeshare);return(0,Le.jsxs)(ns.Z,{id:"codeshare-settings",onSubmit:()=>{},children:[n.anonymous?null:(0,Le.jsx)(es,{codeshare:a}),(0,Le.jsx)(Dr,{codeshare:a})," ",(0,Le.jsx)(Ar,{codeshare:a}),(0,Le.jsx)(Vr,{me:n}),(0,Le.jsx)(jr,{me:n})]})}as.meSubscriptionFragment=_r,as.codeshareSubscriptionFragment=Sr;var rs=a(97407);function ss(e){if(!(e.value in e.cases))return e.default;const n=e.value;return(0,Le.jsx)(rs.Z,{value:n,cases:e.cases})}function ls(e){return(0,Le.jsx)("section",{className:"cs-sidebar-panel",children:(0,Le.jsx)(ss,{value:e.activePanel,cases:e.panels,default:null})})}function ts(e){return(0,Le.jsxs)("div",{id:e.id,className:"cs-sidebar-content",children:[(0,Le.jsx)("button",{className:"cs-sidebar-btn-hide btn-icon",onClick:e.onClose,children:(0,Le.jsx)(_a.G,{icon:va.NBC,className:"fa-remove"})}),e.children]})}var os=a(13192);const is=a.n(os)()({ABOUT:null,SETTINGS:null}),ds="Looking for a Job or Hiring?";function us(e){const n=(0,x.useRef)(null),a=(0,x.useRef)(null),r=(0,x.useState)(null),s=r[0],l=r[1],t=(0,x.useState)("Tech Jobs Board"),o=t[0],i=t[1],d=(0,x.useState)(!1),u=d[0],c=d[1];function m(e){if(e===s)return l(null);l(e)}const g=(0,k.useFragment)(fr,e.me),h=(0,k.useFragment)(pr,e.codeshare),p=(0,w.Z)(g),y=(0,w.A)(h.createdBy.user);return(0,x.useEffect)((()=>{function e(e){var a;null!==n&&void 0!==n&&null!==(a=n.current)&&void 0!==a&&a.contains(e.target)||l(null)}return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}}),[]),(0,x.useEffect)((()=>{if(p||y)return;c(!0),i(ds);let e=null;const n=setTimeout((()=>{clearTimeout(e),c(!1)}),1e4);function a(a){e=setTimeout((()=>{clearTimeout(n),c(!1)}),1e3)}return window.addEventListener("click",a),()=>{clearTimeout(n),clearTimeout(e),window.removeEventListener("click",a)}}),[a]),(0,x.useEffect)((()=>{let e=null;return!1===u&&o===ds&&(e=setTimeout((()=>{i("Tech Jobs Board")}),300)),()=>{null!=e&&clearTimeout(e)}}),[u,o]),(0,Le.jsxs)("aside",{id:"sidebar",ref:n,className:Va()({"cs-sidebar":!0,"js-sidebar":!0,"is-open":s}),children:[(0,Le.jsx)("nav",{className:"cs-sidebar-nav",children:(0,Le.jsxs)("ul",{children:[(0,Le.jsx)("li",{children:(0,Le.jsx)("button",{className:Va()({"btn-icon":!0,"hint--left":!0,"is-active":s===is.SETTINGS}),"data-hint":"Editor Settings",onClick:()=>m(is.SETTINGS),children:(0,Le.jsx)(_a.G,{icon:va.b7W})})}),(0,Le.jsx)("li",{children:(0,Le.jsx)(Cr,{codeshare:h})}),(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{className:"btn-icon hint--left",href:"/new",rel:"nofollow","data-hint":"Create a New Codeshare",children:(0,Le.jsx)(_a.G,{icon:va.r8p})})}),(0,Le.jsx)("li",{className:"sidebar-jobs",children:(0,Le.jsx)("a",{ref:a,className:Va()({"btn-icon":!0,"hint--left":!0,"hint--success":!0,transparent:u,hover:u,"glow-after":u}),href:"https://codeshare.pallet.xyz",target:"_blank","data-hint":o,style:{fontSize:"12px",fontWeight:"bold",textDecoration:"none",textAlign:"center",padding:0},children:"JOBS"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)("button",{className:Va()({"btn-icon":!0,"hint--left":!0,"btn-aboutcodeshare":!0,"is-active":s===is.ABOUT}),"data-hint":"About / Request Feature",onClick:()=>m(is.ABOUT),children:(0,Le.jsx)(_a.G,{icon:va.sqG})})})]})}),(0,Le.jsx)(ls,{activePanel:s,panels:{[is.SETTINGS]:(0,Le.jsxs)(ts,{onClose:()=>l(null),children:[(0,Le.jsx)("div",{className:"content-header",children:(0,Le.jsx)("h3",{className:"content-header_title",children:"Settings"})}),(0,Le.jsx)("div",{className:"content-body",children:(0,Le.jsx)(as,{me:g,codeshare:h})})]}),[is.ABOUT]:(0,Le.jsx)(ts,{onClose:()=>l(null),children:(0,Le.jsxs)("div",{className:"content-body",children:[(0,Le.jsx)("p",{children:"\ud83d\udc69\ud83c\udffb\u200d\ud83d\udcbb Codeshare enables developers to share code in real-time. Write or paste code in your browser, share the URL, code in real-time with friends and team mates."}),(0,Le.jsxs)("p",{children:["\ud83d\udd28 Codeshare was built and maintained by"," ",(0,Le.jsx)(lr.Z,{href:"https://twitter.com/leemunroe",target:"_blank",rel:"external",children:"Lee Munroe"})," ","and"," ",(0,Le.jsx)(lr.Z,{href:"https://twitter.com/tjmehta",target:"_blank",rel:"external",children:"TJ Mehta"}),"."]}),(0,Le.jsxs)("p",{children:["\ud83d\udde3\ufe0f If you have feedback or feature requests, please"," ",(0,Le.jsx)(lr.Z,{href:"https://codeshare.uservoice.com/forums/205006-feedback-feature-requests/filters/top",target:"_blank",rel:"external",children:"add/vote here"}),"."]})]})})}})]})}us.meSubscriptionFragment=gr,us.codeshareSubscriptionFragment=cr;const cs={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"NagModal_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"LoginRegisterModal_codeshare"},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"isCodeshareProSubscriber_user"}],storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"46804d156c67c9561c3f5456cdb84567"};var ms=cs;const gs={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"NagModal_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{args:null,kind:"FragmentSpread",name:"LoginRegisterModal_me"}],type:"Me",abstractKey:null,hash:"b448df1e4d5637e577ec84c2c9dc1e45"};var hs=gs,ps=a(13126);function ys(e){const n=(0,x.useState)(!1),a=n[0],r=n[1],s=(0,x.useRef)(!1),l=(0,k.useFragment)(hs,e.me),t=(0,k.useFragment)(ms,e.codeshare),o=!l.anonymous,i=(0,w.A)(t.createdBy.user);return(0,x.useEffect)((()=>{if(o||i)return void W.Z.debug("NagModal: blocked",{userIsRegistered:o,creatorIsProSubscriber:i});let e=Ae.Z?36e5:t.createdBy.me?6e5:9e5;W.Z.debug("NagModal: duration",{duration:e});const n=setTimeout((()=>r(!0)),e);return()=>clearTimeout(n)}),[l.anonymous]),(0,x.useEffect)((()=>()=>{s.current=!0}),[]),a?(0,Le.jsx)(ps.Z,{source:"nag",me:l,codeshare:t,onClose:()=>{s.current||r(!1)}}):null}a(41817);const fs={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SponsorFooter_me",selections:[{args:null,kind:"FragmentSpread",name:"PlansButton_me"},{args:null,kind:"FragmentSpread",name:"SponsorScriptToast_me"}],type:"Me",abstractKey:null,hash:"0612d51d75a8126e730884ec53d1d63b"};var ks=fs;class bs{constructor(){(0,r.Z)(this,"ee",new yn),(0,r.Z)(this,"aborted",!1),(0,r.Z)(this,"onabort",null)}addEventListener(e,n){this.ee.on(e,n)}removeEventListener(e,n){this.ee.off(e,n)}dispatchEvent(e){this.ee.emit(e.type)}}var Cs="undefined"!==typeof AbortController?AbortController:class{constructor(){(0,r.Z)(this,"signal",new bs)}abort(){this.signal.dispatchEvent(new Event("aborted"))}};const Fs={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SponsorScriptToast_me",selections:[{args:null,kind:"FragmentSpread",name:"PlansButton_me"}],type:"Me",abstractKey:null,hash:"c4b5badbc9cb0ce6b2d55a0f3c0707f0"};var Ss=Fs;function vs(){return(0,Le.jsxs)("span",{style:{color:"white",fontSize:"14px",lineHeight:"14px"},children:[(0,Le.jsx)("br",{}),"\xa0\xa0\xa0Please don't block our ads :(",(0,Le.jsx)("br",{}),(0,Le.jsx)("br",{}),"\xa0\xa0\xa0Ad sponsors allow us to make Codeshare free."]})}function _s(e){return(0,Le.jsx)("button",{onClick:e.onClick,className:"btn-icon btn-hide",children:(0,Le.jsx)(_a.G,{icon:va.NBC,className:"fa-remove"})})}const Ks=["me"];function Es(e){const n=(0,x.useState)(!1),a=n[0],r=n[1],s=(0,x.useState)(!1),l=s[0],t=s[1],o=(0,x.useState)(!1),i=o[0],d=o[1],u=(0,x.useState)(!1),c=u[0],m=u[1],g=(0,x.useRef)(null),h=e.me,p=((0,Ca.Z)(e,Ks),(0,k.useFragment)(Ss,h));function y(){Pa.Z.track("Clicked ad",{source:"script"})}function f(){Pa.Z.track("Closed ad",{source:"script"}),r(!1)}return(0,x.useEffect)((()=>{if(!l)return;let e=null;return e=setTimeout((()=>{var e;null!==(e=g.current)&&void 0!==e&&e.querySelector(".sp-content")?d(!0):d(!1)}),1e3),()=>{null!=e&&clearTimeout(e)}}),[l]),(0,x.useEffect)((()=>{const e=new Cs,n=e.signal;let a=null;const s=document.createElement("script");return s.type="text/javascript",s.src="/-/c.js",s.onload=()=>{if(n.aborted)return void W.Z.warn("SPScript: c.js script aborted");const e=window._bsa;null!=e&&(W.Z.debug("SPScript: sp script loaded",{_bsa:e}),null!=a&&clearTimeout(a),a=setTimeout((()=>{n.aborted||r(!0)}),100))},a=setTimeout((()=>{W.Z.warn("SPScript: script load failed"),m(!0)}),5e3),document.body.appendChild(s),()=>{null!=a&&clearTimeout(a),e.abort()}}),[]),(0,x.useEffect)((()=>{if(!a)return;if(!g.current)return;if(l)return;let e=null;return e=setTimeout((()=>function(){const e=window._bsa;if(null==e)return W.Z.warn("SPScript: script init failed"),void m(!0);e.init("custom","CKYDVKQW","placement:nativecarbon",{target:".supersupersuper",template:'\n<a class="sp-click" href=##link## target="_blank">\n  <span class="sp-sponsor">Sponsor</span>\n  <div\n    style="background: ##backgroundColor##;"\n    class="sp-image-embed-bg"\n  >\n    <img src="##logo##" class="sp-image-embed" />\n  </div>\n  <div class="sp-content">\n    <div class="sp-company">##company##</div>\n    <div class="sp-description">##description##</div>\n  </div>\n</a>\n'}),W.Z.debug("SPScript: script init success",{_bsa:e}),t(!0)}()),100),()=>{null!=e&&clearTimeout(e)}}),[a,g.current,l]),(0,x.useMemo)((()=>a||c?(0,Le.jsxs)("div",{ref:g,className:Va()({"sp-tile":!0,"hide-absolute":!c&&!i}),onClick:y,children:[(0,Le.jsx)(_s,{onClick:f}),c?(0,Le.jsx)(vs,{}):null,(0,Le.jsx)("div",{className:"supersupersuper"}),(0,Le.jsx)("div",{className:"clear"}),(0,Le.jsx)(or.Z,{locationDesc:"sponsor-toast",noIcon:!0,me:p,theme:ba.yU.HIDE_ADS,children:"Hide Ads"})]}):null),[a,l,c,i])}class Ts extends C.Z{}function Ms(e){var n,a,r,s,l,t;const o=(0,x.useState)(null),i=o[0],d=o[1],u=(0,x.useState)(!1),c=u[0],m=u[1],g=(0,x.useRef)(null),h=(0,x.useState)(!1),p=h[0],y=h[1],f=(0,x.useState)(!1),b=f[0],C=f[1],F=e.me,S=e.url,v=(0,k.useFragment)(ks,F);(0,x.useEffect)((()=>{const e=new Cs,n=e.signal;return fetch(S,n?{signal:n}:{}).then((e=>{if(n.aborted)throw new Ts("aborted");return e.json()})).then((e=>{if(n.aborted)throw new Ts("aborted");const a=e.ads&&e.ads[0]||null;d(a)})).catch((e=>{"AbortError"!==e.name?(W.Z.warn("SPFoot: sponsor api request failed",{url:S,err:e}),m(!0)):W.Z.warn("SPFoot: fetch json aborted",{url:S,err:e})})),()=>e.abort()}),[]);(null===i||void 0===i?void 0:i.image)||null===i||void 0===i||i.smallImage;if((0,x.useEffect)((()=>{if(p)return;const e=setTimeout((()=>{C(!0)}),2e4);return()=>{C(!1),clearTimeout(e)}}),[p]),(0,x.useEffect)((()=>{var e;g.current&&Pa.Z.track("Viewed ad",{source:"footer",url:S,company:null!==(e=null===i||void 0===i?void 0:i.company)&&void 0!==e?e:"unknown"})}),[g.current]),c||null===i||void 0===i||!i.description)return c||null!=i?"/-/e.json"===S?(W.Z.debug("SPFoot: fallback",{fallbackUrl:"/-/c.json",adFetchFailed:c,noDescription:null==(null===i||void 0===i?void 0:i.description)}),(0,Le.jsx)(Ms,{me:F,url:"/-/c.json"})):"/-/c.json"===S?(W.Z.debug("SPFoot: fallback",{fallbackUrl:"/-/d.json",adFetchFailed:c,noDescription:null==(null===i||void 0===i?void 0:i.description)}),(0,Le.jsx)(Ms,{me:F,url:"/-/d.json"})):(W.Z.debug("SPFoot: fallback",{fallbackUrl:"script",adFetchFailed:c,noDescription:null==(null===i||void 0===i?void 0:i.description)}),(0,Le.jsx)(Es,{me:v})):null;function _(e){var n;e.stopPropagation(),e.preventDefault(),Pa.Z.track("Closed ad",{source:"footer",url:S,company:null!==(n=null===i||void 0===i?void 0:i.company)&&void 0!==n?n:"unknown"}),d(null)}return(0,Le.jsx)("div",{id:"native-fixed-js",className:"sp-footbar",style:{backgroundColor:null!==(n=i.backgroundColor)&&void 0!==n?n:"#000"},children:b?(0,Le.jsxs)("div",{className:"sad-face",style:{color:"white",fontSize:"14px",lineHeight:"14px",backgroundColor:"hsl(70, 8%, 12%)",borderTop:"solid 1px hsla(0, 0%, 13%, 0.8)",position:"fixed",inset:"auto 0 0 0",display:"flex",justifyContent:"center",alignItems:"center",zIndex:5,textDecoration:"none",padding:"1.75ex 2ch",paddingRight:"50px"},children:[(0,Le.jsxs)("span",{style:{color:"#fff"},children:[(0,Le.jsx)(_s,{onClick:_}),(0,Le.jsx)("span",{style:{fontSize:"1em",lineHeight:"1.3",backgroundColor:"hsl(70, 8%, 12%)"},children:"Please don't block our ads :( \uff0d Ad sponsors allow us to make Codeshare free."})]}),(0,Le.jsx)("div",{style:{position:"absolute",right:"62px",top:"10px"},children:(0,Le.jsx)(or.Z,{locationDesc:"sponsor-blocked-footer",noIcon:!0,me:v,theme:ba.yU.HIDE_ADS,children:"Hide Ads"})})]}):(0,Le.jsxs)("a",{className:"native-fixed",href:/[?]/.test(i.statlink)?i.statlink:"".concat(i.statlink,"?segment=placement:codeshareio-footer;"),target:"_blank",rel:"sponsored noopener",onClick:function(){var e;Pa.Z.track("Clicked ad",{source:"footer",url:S,company:null!==(e=null===i||void 0===i?void 0:i.company)&&void 0!==e?e:"unknown"})},style:{backgroundColor:null!==(a=i.backgroundColor)&&void 0!==a?a:"#000"},children:[(0,Le.jsxs)("span",{children:[(0,Le.jsx)(_s,{onClick:_}),(0,Le.jsx)("span",{className:"native-sponsor",style:{color:null!==(r=i.backgroundColor)&&void 0!==r?r:"#000",backgroundColor:null!==(s=i.textColor)&&void 0!==s?s:"#fff"},children:"Sponsor"}),(0,Le.jsx)("span",{ref:g,className:"native-text",style:{color:null!==(l=i.textColor)&&void 0!==l?l:"#fff",backgroundColor:null!==(t=i.backgroundColor)&&void 0!==t?t:"#000"},children:i.company?"".concat(i.company," - ").concat(i.description):i.description}),(0,Le.jsx)("img",{alt:"px",style:{position:"absolute",top:"1000px",height:"1px",width:"1px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==",onLoad:()=>{y(!0)}})]}),(0,Le.jsx)("div",{style:{position:"absolute",right:"62px",top:"8px"},children:(0,Le.jsx)(or.Z,{locationDesc:"sponsor-blocked-footer",noIcon:!0,me:v,theme:ba.yU.HIDE_ADS,children:"Hide Ads"})})]})})}const xs=te.Z?x.Suspense:e=>e.children;function ws(e){(0,x.useEffect)((()=>Pa.Z.page()),[]);const n=(0,x.useState)(null),a=n[0],r=n[1],s=(0,k.useFragment)(M,e.viewer).me,l=(0,k.useFragment)(E,e.codeshare),t=(0,w.Z)(s),o=(0,w.A)(l.createdBy.user),i=(0,x.useRef)(l);l&&(i.current=l);const d=t||o?null:(0,Le.jsx)(Ms,{me:s,url:"/-/e.json"});return(0,Le.jsx)("div",{id:"codeshare",children:(0,Le.jsxs)(I.Provider,{value:{codeMirror:a,setCodeMirror:r},children:[(0,Le.jsx)(ha,{me:s,codeshare:l}),(0,Le.jsx)(dr,{me:s,codeshare:l}),(0,Le.jsx)(Pe,{}),(0,Le.jsx)("div",{id:"main",children:(0,Le.jsx)(xs,{fallback:(0,Le.jsx)("div",{children:"Reloading..."}),children:(0,Le.jsx)(na,{me:s,codeshare:l,refetching:!1})})}),(0,Le.jsx)(us,{me:s,codeshare:l}),(0,Le.jsx)("div",{id:"local-video",className:"local-video"}),(0,Le.jsx)("div",{id:"remote-videos",className:"remote-videos"}),(0,Le.jsx)(ys,{me:s,codeshare:l}),d]})})}ws.meSubscriptionFragment=_,ws.codeshareSubscriptionFragment=S;var Is=a(73496),Os=a(2349);function js(e,n,a){const r=(0,ee.requestSubscription)(e,n),s=a?oe(a):null;return{dispose(){r.dispose(),s&&s.dispose()}}}function Ls(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function Ps(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?Ls(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ls(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}const Ds=e=>{let n=e.apiHeaders,a=e.queryProps,r=e.queryRecords,l=e.codeshareId;W.Z.debug("env!!!",null),C.Z.assert(a,"relay fetch failed",{apiHeaders:n,queryProps:a,queryRecords:r,codeshareId:l});const o=(0,Is.Z)({apiHeaders:n,records:r});te.Z&&(0,x.useEffect)((()=>{W.Z.debug("subscribe: CodeshareIdMeSubscription");const e=js(o,{subscription:y,updater:e=>{const n=e.getRootField("meUpdates").getLinkedRecord("viewer");e.getRoot().setLinkedRecord(n,"viewer")},variables:{input:{}}},function(){var e=(0,s.Z)(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.fetchQuery)(o,h,{}).toPromise();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());W.Z.debug("subscribe: CodeshareIdCodeshareSubscription");const n=js(o,{subscription:m,variables:{input:{id:l}}},function(){var e=(0,s.Z)(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.fetchQuery)(o,u,Ps(Ps({codeshareId:l},Nn),z)).toPromise();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return()=>{e.dispose(),n.dispose()}}),[]);const i=a.viewer;return te.Z&&i.me.email&&Pa.Z.identify(i.me.id,{anonymous:i.me.anonymous,name:i.me.name,email:i.me.email}),(0,Le.jsx)(k.RelayEnvironmentProvider,{environment:o,children:(0,Le.jsx)(f.Z.Provider,{value:new f.J,children:(0,Le.jsx)(ws,{viewer:i,codeshare:a.codeshare})})})};Ds.getInitialProps=function(){var e=(0,s.Z)(t().mark((function e(n){var a,r,s,l,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,Os.Z)(n),r=a.match(/^\/([^\/?]+)/),s=r&&r[1],C.Z.assert(s,"url is invalid",{url:a}),!((l=In().encodeRelayId("Codeshare",s)).length>127)){e.next=7;break}throw new C.Z("Your codeshare url is too long. Please shorten your codeshare url and try again. Codeshare IDs must be less than 127 characters.",{status:400});case 7:return e.next=9,(0,b.Z)(n,i,Ps(Ps({codeshareId:l},Nn),z));case 9:return o=e.sent,e.abrupt("return",Ps(Ps({},o),{},{codeshareId:l}));case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var Zs=Ds},57376:function(e,n,a){"use strict";a.r(n);const r=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"codeHistoryAfter"},{defaultValue:null,kind:"LocalArgument",name:"codeHistoryFirst"},{defaultValue:null,kind:"LocalArgument",name:"id"}],n=[{kind:"Variable",name:"id",variableName:"id"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"historyId",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},d={alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[l,s,{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null}],storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},c=[{kind:"Variable",name:"after",variableName:"codeHistoryAfter"},{kind:"Variable",name:"first",variableName:"codeHistoryFirst"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"refetchableCodeHistoryEdgesRefetchQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"refetchableCodeHistoryEdges_codeshare"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"refetchableCodeHistoryEdgesRefetchQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[a,r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[s,l],storageKey:null},{alias:null,args:null,concreteType:"CodeCheckpoint",kind:"LinkedField",name:"codeCheckpoint",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"codeHistoryId",storageKey:null},t,{alias:null,args:null,concreteType:"CodeHistoryEdge",kind:"LinkedField",name:"codeHistoryEdge",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[r,o,t,i,d],storageKey:null},u],storageKey:null}],storageKey:null},{alias:null,args:c,concreteType:"CodeHistoryConnection",kind:"LinkedField",name:"codeHistory",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistoryConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[r,o,t,i,d,a],storageKey:null},u],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:c,filters:null,handle:"connection",key:"Codeshare_codeHistory",kind:"LinkedHandle",name:"codeHistory"}],type:"Codeshare",abstractKey:null}],storageKey:null}]},params:{cacheID:"d5a3d09d6d7e477641aef6aef8b6a91b",id:null,metadata:{},name:"refetchableCodeHistoryEdgesRefetchQuery",operationKind:"query",text:"query refetchableCodeHistoryEdgesRefetchQuery(\n  $codeHistoryAfter: String\n  $codeHistoryFirst: Int!\n  $id: ID!\n) {\n  node(id: $id) {\n    __typename\n    ...refetchableCodeHistoryEdges_codeshare\n    id\n  }\n}\n\nfragment refetchableCodeHistoryEdges_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  codeCheckpoint {\n    codeHistoryId\n    value\n    codeHistoryEdge {\n      node {\n        id\n        historyId\n        value\n        createdAt\n        createdBy {\n          me\n          userId\n          clientId\n        }\n      }\n      cursor\n    }\n  }\n  codeHistory(after: $codeHistoryAfter, first: $codeHistoryFirst) {\n    edges {\n      node {\n        id\n        historyId\n        value\n        createdAt\n        createdBy {\n          me\n          userId\n          clientId\n        }\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n"}}}();r.hash="5480aec223e32374eed87a6905412379",n.default=r},66880:function(e,n,a){"use strict";a.r(n);const r=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"codeshareUsersAfter"},{defaultValue:null,kind:"LocalArgument",name:"codeshareUsersFirst"},{defaultValue:null,kind:"LocalArgument",name:"id"}],n=[{kind:"Variable",name:"id",variableName:"id"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null}],storageKey:null},l=[{kind:"Variable",name:"after",variableName:"codeshareUsersAfter"},{kind:"Variable",name:"first",variableName:"codeshareUsersFirst"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"refetchableCodeshareUserEdgesQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"refetchableCodeshareUserEdges_codeshare"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"refetchableCodeshareUserEdgesQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[a,r,{kind:"InlineFragment",selections:[s,{alias:null,args:l,concreteType:"CodeshareUsersConnection",kind:"LinkedField",name:"users",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeshareUserConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"CodeshareUser",kind:"LinkedField",name:"node",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modifiedAt",storageKey:null},s,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,concreteType:"CursorType",kind:"LinkedField",name:"cursor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"position",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectionEnd",storageKey:null}],storageKey:null},a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:l,filters:[],handle:"connection",key:"Codeshare_users",kind:"LinkedHandle",name:"users"}],type:"Codeshare",abstractKey:null}],storageKey:null}]},params:{cacheID:"9e600d872023f0845bfe842121700fc5",id:null,metadata:{},name:"refetchableCodeshareUserEdgesQuery",operationKind:"query",text:"query refetchableCodeshareUserEdgesQuery(\n  $codeshareUsersAfter: String\n  $codeshareUsersFirst: Int!\n  $id: ID!\n) {\n  node(id: $id) {\n    __typename\n    ...refetchableCodeshareUserEdges_codeshare\n    id\n  }\n}\n\nfragment refetchableCodeshareUserEdges_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  users(first: $codeshareUsersFirst, after: $codeshareUsersAfter) {\n    edges {\n      node {\n        id\n        createdAt\n        modifiedAt\n        createdBy {\n          userId\n          me\n        }\n        color\n        cursor {\n          position\n          selectionEnd\n        }\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n"}}}();r.hash="432679eebdeadeba528b71c43deeea74",n.default=r},6327:function(e,n,a){"use strict";a.d(n,{Z:function(){return s}});var r=a(75396);function s(e){return e.title||(e.createdAt?(0,r.Z)(e.createdAt):"")}},75396:function(e,n,a){"use strict";a.d(n,{Z:function(){return r}});a(23123),a(39714),a(21249),a(92222);function r(e,n){if(!e)return"";const a=new Date(e).toString().split(" "),r=a[1],s=a[2];let l=a[3];const t=a[4].split(":").map((e=>parseInt(e,10)));t.pop();let o=t[0],i=o>=12?"PM":"AM";o%=12,0===o&&(o=12);let d=t[1]+"";if(d=2===d.length?d:"0"+d,n)return"".concat(o,":").concat(d," ").concat(i);return(new Date).getFullYear()+""===l?"".concat(r," ").concat(s," ").concat(o,":").concat(d," ").concat(i):"".concat(r," ").concat(s,", ").concat(l)}},2349:function(e,n,a){"use strict";a.d(n,{Z:function(){return l}});a(39714);var r=a(50559),s=a(92432);function l(e){var n;return e.req?(r.Z.assert(e.req.url,"url is missing",{req:e.req}),s.Z.debug("NEXTPAGEURL server",e.req.url.pathname),"string"===typeof e.req.url?e.req.url.toString():e.req.url.pathname):(s.Z.debug("NEXTPAGEURL client",{pathname:window.location.pathname,state:null===(n=window.history)||void 0===n?void 0:n.state}),window.location.pathname)}},30143:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[codeshareId]",function(){return a(94939)}])}},function(e){e.O(0,[774,523,126,633,365,607,104,578,460,877,366,698,537,908,888,179],(function(){return n=30143,e(e.s=n);var n}));var n=e.O();_N_E=n}]);